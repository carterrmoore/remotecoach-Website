(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[19],{"./src/main/webapp/universal/src/apps/App/shared/actions/ImagePickerViewActions.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=r(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var o=function e(){(0,n.default)(this,e);this.generateActions("finishLoadingImage")};var i=s.default.createActions(o);t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetPicker/constants/panelIdConstants.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ASSET_PICKER_PANEL_ID=void 0;var r={UNSPLASH_PANEL:"unsplash-panel",MY_LIBRARY:"my-library",GETTY_PANEL:"getty-panel"};t.ASSET_PICKER_PANEL_ID=r},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/PreviewField/ImagePreviewField.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var B=n(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var G=n(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var Y=r(a("./common/temp/node_modules/react/index.js"));var o=n(a("./common/temp/node_modules/prop-types/index.js"));var W=n(a("./src/main/webapp/universal/src/apps/App/shared/components/ImageEditor/index.js"));var H=n(a("./src/main/webapp/universal/src/apps/App/shared/components/LicenseImage/index.js"));var i=a("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var J=n(a("./common/temp/node_modules/lodash/isEqual.js"));var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var K=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,r)}return a}function z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var Z=K.EventTracking.useEventTrackingContext,Q=K.EventTracking.OVERFLOW_OPTION;var d=function e(t,a){return[{name:(0,l.t)("Focal Point"),icon:i.FocalPoint,handler:a,key:K.MenuActionKey.FOCAL_POINT},{name:(0,l.t)("Remove"),icon:K.TrashIcon,handler:t,color:"red",key:K.MenuActionKey.REMOVE}]};var c=function e(t){var a=t.assetDetails,r=t.uploadFile,n=t.onRemove,s=t.onReplace,o=t.onFocalPointChange,i=t.replaceMenuActions,l=t.onAssetPurchaseSuccess,u=(0,G.default)(t,["assetDetails","uploadFile","onRemove","onReplace","onFocalPointChange","replaceMenuActions","onAssetPurchaseSuccess"]);var d=Z(),c=d.trackUserFocalPointUpdate,p=d.trackUserPurchaseStockImage,m=d.trackUserSelectsEditFile,f=d.trackUserSelectsOverflowOption,v=d.trackUserClicksFileOverflow;var b=a.filename,A=a.licensedAssetPreview,h=a.assetUrl;var E=(0,Y.useState)(false),P=(0,B.default)(E,2),g=P[0],j=P[1];var O=(0,Y.useState)(false),w=(0,B.default)(O,2),y=w[0],T=w[1];var I=(0,K.useFocalPoint)(),_=I.focalPointAnchor,U=I.focalPointRef,S=I.isFocalPointOpen,D=I.onCloseFocalPoint,R=I.onOpenFocalPoint;var F=function e(){j(false)};var k=function e(t){F();r(t,true)};var C=function e(){T(true);p(a)};var M=function e(){j(true);m(a)};var x=function e(){return T(false)};var L=function e(){n();f(Q.REMOVE)};var V=function e(){R();f(Q.FOCAL_POINT)};var N=u.getMoreMenuActions(L,V);var q={onChange:function e(t){if(!(0,J.default)(t,a.mediaFocalPoint)){o(t);c(a)}},value:a.mediaFocalPoint,assetUrl:h};return Y.default.createElement(Y.default.Fragment,null,Y.default.createElement(K.FocalPointEditor,{anchor:_,isOpen:S,onRequestClose:D,focalPointProps:q}),Y.default.createElement(K.FocalPointAnchor,{ref:U},h&&Y.default.createElement(K.AssetPreviewField,{assetDetails:z({},a,{assetUrl:a.assetUrl,miniAssetUrl:"".concat(a.assetUrl,"?format=100w")}),focalPointProps:q,onEdit:!A&&M,onPurchase:A&&C,onReplace:s,onViewOptions:v,replaceMenuActions:i,moreMenuActions:N})),Y.default.createElement(W.default,{isOpen:g,imageSrc:h,imageFileName:b||"",onCancel:F,onSave:k}),A&&Y.default.createElement(H.default,{key:"licensed-image-purchase-modal",assetPreview:A,previewUrl:y&&h,isOpen:A&&y,onRequestClose:x,onPurchaseSuccess:function e(t){l(t);x()}}))};c.defaultProps={getMoreMenuActions:d};c.propTypes={assetDetails:o.default.shape({assetType:o.default.oneOf(Object.values(K.AssetType)),assetUrl:o.default.string.isRequired,filename:o.default.string,mediaFocalPoint:o.default.object}).isRequired,onAssetPurchaseSuccess:o.default.func.isRequired,onFocalPointChange:o.default.func.isRequired,onRemove:o.default.func.isRequired,onReplace:o.default.func,uploadFile:o.default.func.isRequired,replaceMenuActions:o.default.arrayOf(K.MenuActionPropType),getMoreMenuActions:o.default.func.isRequired};var p=c;t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/PreviewField/PreviewField.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var d=r(a("./common/temp/node_modules/react/index.js"));var n=r(a("./common/temp/node_modules/prop-types/index.js"));var c=r(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/PreviewField/ImagePreviewField.js"));var p=r(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/PreviewField/VideoPreviewField.js"));var m=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");var s=function e(t){var a=t.assetDetails,r=t.onAssetPurchaseSuccess,n=t.onFocalPointChange,s=t.onRemove,o=t.onReplace,i=t.uploadFile,l=t.replaceMenuActions,u=t.getMoreMenuActions;switch(a.assetType){case m.AssetType.IMAGE:return d.default.createElement(c.default,{assetDetails:a,onAssetPurchaseSuccess:r,onFocalPointChange:n,onRemove:s,onReplace:o,uploadFile:i,replaceMenuActions:l,getMoreMenuActions:u});case m.AssetType.VIDEO:return d.default.createElement(p.default,{assetDetails:a,onRemove:s,onReplace:o,replaceMenuActions:l});default:console.warn("Preview field is not defined for asset type ".concat(a.assetType));return d.default.createElement(d.default.Fragment,null)}};s.propTypes={assetDetails:n.default.shape({assetType:n.default.oneOf(Object.values(m.AssetType)),assetUrl:n.default.string.isRequired,filename:n.default.string,mediaFocalPoint:n.default.object}).isRequired,onAssetPurchaseSuccess:n.default.func.isRequired,onFocalPointChange:n.default.func.isRequired,onRemove:n.default.func.isRequired,onReplace:n.default.func,uploadFile:n.default.func.isRequired,replaceMenuActions:n.default.arrayOf(m.MenuActionPropType)};var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/PreviewField/VideoPreviewField.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var c=r(a("./common/temp/node_modules/react/index.js"));var n=r(a("./common/temp/node_modules/prop-types/index.js"));var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var p=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");var m=p.EventTracking.useEventTrackingContext,f=p.EventTracking.OVERFLOW_OPTION;var v=function e(t){return[{name:(0,s.t)("Remove"),icon:p.TrashIcon,handler:t,color:"red",key:p.MenuActionKey.REMOVE}]};var o=function e(t){var a=t.assetDetails,r=t.onRemove,n=t.onReplace,s=t.replaceMenuActions;var o=m(),i=o.trackUserSelectsOverflowOption,l=o.trackUserClicksFileOverflow;var u=function e(){r();i(f.REMOVE)};var d=v(u);return c.default.createElement(p.AssetPreviewField,{assetDetails:a,onReplace:n,onViewOptions:l,replaceMenuActions:s,moreMenuActions:d})};o.propTypes={assetDetails:n.default.shape({assetType:n.default.oneOf(Object.values(p.AssetType)),assetUrl:n.default.string.isRequired,filename:n.default.string}).isRequired,onRemove:n.default.func.isRequired,onReplace:n.default.func,replaceMenuActions:n.default.arrayOf(p.MenuActionPropType)};var i=o;t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/connectUploadStateToProps.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=r(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var u=r(a("./common/temp/node_modules/react/index.js"));var d=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");var c=r(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/isBackgroundUploadingEnabled.js"));var p=function e(t){return{uploadProgress:t.uploadProgress,uploadError:t.uploadError,uploadState:t.uploadState,assetDetails:t.assetDetails}};var m=function e(t){return{onUploadStart:t.onUploadStart,onUploadProgress:t.onUploadProgress,onUploadProcess:t.onUploadProcess,onUploadComplete:t.onUploadComplete,onUploadFail:t.onUploadFail,onUploadReset:t.onUploadReset}};var n=function e(i){return function(e){var t=e.assetDestination,a=e.fieldId;var r=(0,d.useAssetUploadContext)();var n=d.UploadManagerState.useUploadManager({assetDestination:t,fieldId:a});var s=c.default?n.uploadData:p(r);var o=m(c.default?n:r);return u.default.createElement(i,(0,l.default)({uploadData:s,uploadActions:o},e))}};var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/getReplaceMenuActions.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=r(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var c=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");var p=a("./src/main/webapp/universal/src/apps/App/shared/components/AssetPicker/constants/panelIdConstants.js");var m=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=a("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var n=function e(t){var a;var r=t.uploadFileHandler,n=t.setInitialPanelId,s=t.trackUpload,o=t.openImagePicker,i=t.videoExternalLinkHandler,l=t.uploadFileHelp;var u=c.EventTracking.UPLOAD_OPTION;return a={},(0,d.default)(a,c.AssetType.IMAGE,[{name:(0,m.t)("Upload File"),icon:f.Upload,handler:r},{name:(0,m.t)("Select from Library"),icon:f.Portfolio,handler:function e(){o();n(p.ASSET_PICKER_PANEL_ID.MY_LIBRARY);s(u.SELECT_FROM_LIBRARY)}},{name:(0,m.t)("Browse Stock Images"),icon:f.Search,handler:function e(){o();n(p.ASSET_PICKER_PANEL_ID.UNSPLASH_PANEL);s(u.BROWSE_STOCK_IMAGES)}}]),(0,d.default)(a,c.AssetType.VIDEO,[{name:(0,m.t)("Upload File"),icon:f.Upload,handler:r,uploadHelp:l},{name:(0,m.t)("Add From Link"),description:(0,m.t)("YouTube or Vimeo"),icon:f.Link,hasDivider:true,handler:i}]),a};var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/index.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"withAssetUploadProvider",{enumerable:true,get:function e(){return i.default}});Object.defineProperty(t,"connectUploadStateToProps",{enumerable:true,get:function e(){return l.default}});Object.defineProperty(t,"PreviewField",{enumerable:true,get:function e(){return Ge.default}});Object.defineProperty(t,"getReplaceMenuActions",{enumerable:true,get:function e(){return d.default}});t.uploadFileUrl=t.default=void 0;var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var Te=n(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var Ie=n(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var _e=n(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));a("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var Ue=r(a("./common/temp/node_modules/react/index.js"));var o=n(a("./common/temp/node_modules/prop-types/index.js"));var Se=a("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var De=a("./src/main/webapp/universal/src/apps/App/shared/utils/getAssetReferenceUrl.ts");var Re=n(a("./src/main/webapp/universal/src/shared/utils/uploadToken.js"));var Fe=a("./src/main/webapp/universal/src/shared/utils/EnvUtils.ts");var ke=n(a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js"));var Ce=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetPicker/index.js"));var Me=n(a("./src/main/webapp/universal/src/apps/App/shared/actions/ImagePickerViewActions.js"));var xe=a("./src/main/webapp/universal/src/apps/App/shared/components/AssetPicker/constants/panelIdConstants.js");var Le=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetPicker/utils/useAssetPickerOpenState.js"));var Ve=n(a("./src/main/webapp/universal/src/apps/App/shared/utils/createContentItemFromAsset.js"));var Ne=n(a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js"));var qe=n(a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js"));var Be=r(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/uploadFileFromUrl.js"));var i=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/withAssetUploadProvider.js"));var l=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/connectUploadStateToProps.js"));var Ge=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/PreviewField/PreviewField.js"));var Ye=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/onAssetCreated.js"));var We=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/mapContentItemToAssetDetails.js"));var u=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/withStore.js"));var d=n(a("./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/getReplaceMenuActions.js"));var He=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");var Je=r(a("./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/index.js"));function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,r)}return a}function Ke(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var ze=He.HiddenInputField.useHiddenInputField;var Ze=He.EventTracking.FILE_SOURCE,Qe=He.EventTracking.UPLOAD_OPTION,Xe=He.EventTracking.useEventTrackingContext,p=He.EventTracking.withEventTrackingContext;var m=function e(d){var t,a,r,n;var s=null===(t=Static)||void 0===t?void 0:null===(a=t.SQUARESPACE_CONTEXT)||void 0===a?void 0:a.env;var c=d.assetType,o=d.assetDestination;var i=null!==(r=d.variant)&&void 0!==r?r:He.SIZE_VARIANT.MINI;var l=c===He.AssetType.VIDEO?He.SIZE_VARIANT.LARGE:i;var p=(0,He.getCurrentConstraints)(c,d.constraints);var u=(0,He.useAssetUploadContext)(),m=u.uploadProgress,f=u.uploadError,v=u.uploadState,b=u.assetDetails,A=u.onUploadStart,h=u.onUploadProgress,E=u.onUploadProcess,P=u.onUploadComplete,g=u.onUploadFail,j=u.onUploadReset;var O=Xe(),w=O.cleanupTracker,y=O.initializeTracker,T=O.trackClickToSelectFile,I=O.trackDragAndDropFile,_=O.trackUserSelectsFileUploadOption,U=O.trackUserSelectsReplaceFile,S=O.trackViewOSFileMenu,D=O.trackViewSelectFileOptions,R=O.tracksUserAddsFile,F=O.tracksUserFileLoads,k=O.trackUserViewsErrorModal,C=O.tracksUserLinksExternalVideo;var M=(0,He.useOpenState)(),x=M.isOpen,L=M.onClose,V=M.onOpen;var N=(0,Le.default)(),q=N.onOpenPicker,B=N.onClosePicker,G=N.isPickerOpen;var Y=(0,He.useOpenState)(),W=Y.isOpen,H=Y.onClose,J=Y.onOpen;var K=(0,Ue.useState)(xe.ASSET_PICKER_PANEL_ID.MY_LIBRARY),z=(0,_e.default)(K,2),Z=z[0],Q=z[1];var X=(0,Ue.useState)((0,He.UploadCancellation)()),$=(0,_e.default)(X,2),ee=$[0],te=$[1];var ae=(0,Ue.useState)(null),re=(0,_e.default)(ae,2),ne=re[0],se=re[1];var oe=(0,Ue.useState)(0),ie=(0,_e.default)(oe,2),le=ie[0],ue=ie[1];var de=Ne.default.getState().id;var ce=qe.default.getState().toJS().id;var pe=function e(a){a&&setTimeout((0,Ie.default)(Te.default.mark(function e(){return Te.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return ke.default.read(a);case 2:d.onChange({id:a});case 3:case"end":return t.stop()}},e)})),0)};var me=function(){var r=(0,Ie.default)(Te.default.mark(function e(a,r){var n,s,o,i,l,u;return Te.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:d.onChange({id:d.value.id});A({assetType:c,id:d.value.id},a);t.next=4;return(0,He.validateFile)(c,a,p);case 4:n=t.sent;s=n.isValidFile;o=n.title;i=n.message;if(s){t.next=11;break}g({title:o,message:i});return t.abrupt("return");case 11:if(!r){se(Ze.OPERATING_SYSTEM);ue(Date.now());R({filename:a.name,fileSize:a.size,fileType:a.type,fileSource:Ze.OPERATING_SYSTEM})}l={isQA:(0,Fe.isQA)(),isStage:(0,Fe.isStage)(),isDev:(0,Fe.isDev)()};u=Re.default.getUploadToken();(0,He.requestMediaUpload)(c,a,Ke({onProgress:h,cancelToken:ee.cancelToken,websiteId:Ne.default.getState().id,retainMetadata:Ne.default.getState().imageMetadataProcessingEnabled,assetTags:d.assetTags},l)).then(function(e){E();return(0,He.requestJobProcess)(c,e.data.jobId,l)}).then(function(e){if(e.isSuccess)return Ye.default[c](e,u,d.onChange);var t=He.customError.fromFailedJob(e,p);g(t);k({errorCode:null===e||void 0===e?void 0:e.failureReasonCode,errorMessage:t.message,fileSource:ne})}).catch(function(e){if((0,He.isUploadCancelError)(e)){d.onChange({id:void 0});j();te((0,He.UploadCancellation)())}else{var t;var a=(null===e||void 0===e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)||(null===e||void 0===e?void 0:e.status);var r={assetType:c,statusCode:a};r=He.customError.fromUploadError(r,p);g(r);k({errorCode:a.toString(),errorMessage:r.message,fileSource:ne})}});case 15:case"end":return t.stop()}},e)}));return function e(t,a){return r.apply(this,arguments)}}();var fe=ze(me),ve=fe.onOpenFileBrowser,be=fe.inputRef;(0,Ue.useEffect)(function(){y({contentType:d.assetType,environment:s,indirectObjectIdentifier:d.indirectObjectIdentifier,indirectObjectValue:o,productPage:d.productPage,productSection:d.productSection,uploaderVersion:l,userMemberAccountId:ce,websiteId:de});return w},[w,s,o,y,d.assetType,d.indirectObjectIdentifier,d.productPage,d.productSection,ce,l,de]);(0,Ue.useEffect)(function(){if(v===He.UPLOAD_UI_STATE.COMPLETE&&!d.contentItem.id&&b.id)j();else if(v===He.UPLOAD_UI_STATE.COMPLETE&&d.contentItem.id&&We.default[d.assetType](d.contentItem).assetUrl!==b.assetUrl){var e=We.default[d.assetType](d.contentItem);P(e)}else if(v!==He.UPLOAD_UI_STATE.COMPLETE&&v!==He.UPLOAD_UI_STATE.UPLOADING&&d.contentItem.id&&d.contentItem.id!==b.id){var t=We.default[d.assetType](d.contentItem);P(t);if(ne&&0!==le){F({id:d.contentItem.id,filename:d.contentItem.filename,fileType:d.contentItem.contentType,fileSize:b.fileSize,fileSource:ne,fileDuration:d.contentItem.durationSeconds,timing:Date.now()-le});se(null);ue(0)}}},[d.assetType,d.contentItem,b,v,P,j,F,le,ne]);(0,Ue.useEffect)(function(){var e;var t=null===(e=d.value.embed)||void 0===e?void 0:e.url;var a=v===He.UPLOAD_UI_STATE.COMPLETE&&!t&&b.isExternalUrl;var r=v===He.UPLOAD_UI_STATE.COMPLETE&&t&&t!==b.assetUrl&&b.isExternalUrl;var n=v!==He.UPLOAD_UI_STATE.COMPLETE&&t;a?j():(r||n)&&(0,Je.getEmbed)(t).then(function(e){var t;var a=e.embed;P({id:void 0,assetType:He.AssetType.VIDEO,assetUrl:null===(t=d.value.embed)||void 0===t?void 0:t.url,filename:null===a||void 0===a?void 0:a.title,fileDuration:null===a||void 0===a?void 0:a.duration,isExternalUrl:true})})},[b,d.value.embed,v,P,j]);(0,Ue.useEffect)(function(){return function(){null!==ee&&void 0!==ee&&ee.onCancel&&ee.onCancel()}},[ee]);var Ae=function e(t){var a=t.assetIds;E({id:d.value.id});B();(0,Ve.default)(De.AssetReferenceType.TRANSIENT_IMAGE,a[0],void 0).then(function(e){ke.default.insert(Ke({},e,{licensedAssetPreview:void 0}));d.onChange({id:e.id})})};var he=function(){var a=(0,Ie.default)(Te.default.mark(function e(a){var n,s;return Te.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=a.data;s=d.value.id;A();Me.default.finishLoadingImage();B();(0,Be.default)(n).then(function(e){var t=e.job,a=e.media;var r={id:s,assetUrl:n.url,assetType:c,filename:a.filename};E(r);return t}).then(function(e){return(0,Be.handleJobs)(e)}).then(function(e){var t;var a=null===e||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.contentItemId;pe(a)});case 6:case"end":return t.stop()}},e)}));return function e(t){return a.apply(this,arguments)}}();var Ee=function e(t){ke.default.updateField.defer(b.id,"mediaFocalPoint",t);d.onChange({id:b.id,mediaFocalPoint:t})};var Pe=function e(){ve();_(Qe.UPLOAD_FILE);S()};var ge=function e(t){return _(t)};var je=function e(){J();_(Qe.ADD_FROM_LINK)};var Oe=d.getReplaceMenuActions({uploadFileHandler:Pe,setInitialPanelId:Q,trackUpload:ge,openImagePicker:q,videoExternalLinkHandler:je,uploadFileHelp:(0,He.getUploadHelp)()[c](p)})[c];var we=function e(){switch(v){case He.UPLOAD_UI_STATE.EMPTY:return Ue.default.createElement(Ue.default.Fragment,null,Ue.default.createElement(He.HiddenInputField,{ref:be,acceptedTypes:p.acceptedTypes}),Ue.default.createElement(He.AssetPreviewField.ReplaceFileMenu,{renderTrigger:function e(t){var a=t.onClick;return Ue.default.createElement(He.AssetUploaderField,{onAddFileClick:function e(){a();T({objectDisplayName:d.objectDisplayName});D()},onDropFile:function e(t){I(t,{objectDisplayName:d.objectDisplayName});me(t)},isOpen:x,assetType:c,uploadLabel:d.uploadLabel,uploadDescriptionLabel:d.uploadDescriptionLabel,constraints:p})},isOpen:x,onRequestClose:L,onRequestOpen:V,position:"bottom",menuActions:Oe,isFullWidth:d.isFullWidth}));case He.UPLOAD_UI_STATE.UPLOADING:return Ue.default.createElement(He.AssetPreviewField,{assetDetails:Ke({},b,{assetType:c}),uploadState:v,uploadProgress:m,onCancel:function e(){null!==ee&&void 0!==ee&&ee.onCancel&&ee.onCancel()}});case He.UPLOAD_UI_STATE.PROCESSING:return Ue.default.createElement(He.AssetPreviewField,{assetDetails:Ke({},b,{assetType:c}),uploadState:v,onCancel:d.showCancellation&&function(){d.onChange({id:void 0});j()}});case He.UPLOAD_UI_STATE.COMPLETE:return Ue.default.createElement(Ue.default.Fragment,null,Ue.default.createElement(He.HiddenInputField,{ref:be,acceptedTypes:p.acceptedTypes}),b&&Ue.default.createElement(Ge.default,{assetDetails:b,uploadFile:me,onAssetPurchaseSuccess:function e(t){return he({data:t})},onReplace:function e(){U(b);D()},onRemove:function e(){d.onChange({id:void 0});j()},onFocalPointChange:Ee,replaceMenuActions:Oe,getMoreMenuActions:d.getMoreMenuActions}));case He.UPLOAD_UI_STATE.ERROR:return Ue.default.createElement(He.AssetPreviewField,{assetDetails:b,uploadState:He.UPLOAD_UI_STATE.PROCESSING})}};var ye=Ue.default.useRef(null);return Ue.default.createElement(Ue.default.Fragment,null,Ue.default.createElement(He.UploadErrorModal,{isOpen:v===He.UPLOAD_UI_STATE.ERROR,error:f,onRequestClose:function e(){b.id?P():j()}}),Ue.default.createElement(He.AssetPreviewContainer,{sx:d.sx,variant:l},Ue.default.createElement(Se.Box,{ref:ye}),we()),c===He.AssetType.VIDEO&&ye.current&&Ue.default.createElement(Je.default,{position:ye.current,positionOffset:v===He.UPLOAD_UI_STATE.EMPTY?"65px":"185px",link:null===(n=d.value.embed)||void 0===n?void 0:n.url,isOpen:W,onCancel:H,onSave:function e(t){var a;if(t.url!==(null===(a=d.value.embed)||void 0===a?void 0:a.url)){E();d.onChange({embed:t});C({url:t.url,fileDuration:t.duration})}H()}}),c===He.AssetType.IMAGE&&Ue.default.createElement(Ce.default,{isOpen:G,onRequestClose:B,baseZIndex:300001,onChooseAssetIds:Ae,onChooseImageUrl:he,imageDestination:o,initialPanelId:Z,productPage:d.productPage,onLibraryAssetSelected:function e(){se(Ze.LIBRARY);ue(Date.now());R({fileSource:Ze.LIBRARY})},onUnsplashAssetSelected:function e(){se(Ze.FREE);ue(Date.now());R({fileSource:Ze.FREE})},onGettyAssetSelected:function e(){se(Ze.PAID);ue(Date.now());R({fileSource:Ze.PAID})}},d.assetPickerPanels))};m.defaultProps={getReplaceMenuActions:d.default,isFullWidth:true};m.propTypes={assetPickerPanels:o.default.arrayOf(o.default.element),assetTags:o.default.oneOfType([o.default.arrayOf(o.default.string),o.default.string]),assetType:o.default.oneOf(Object.values(He.AssetType)).isRequired,getMoreMenuActions:o.default.func,getReplaceMenuActions:o.default.func.isRequired,assetDestination:o.default.string,onChange:o.default.func.isRequired,productPage:o.default.string,sx:o.default.object,uploadLabel:o.default.string,uploadDescriptionLabel:o.default.string,value:o.default.shape({id:o.default.string,embed:Je.EmbedPropType}).isRequired,isFullWidth:o.default.bool,variant:o.default.oneOf(Object.values(He.SIZE_VARIANT)),constraints:He.AssetConstraintsPropType};var f=(0,i.default)(p((0,u.default)(m)));t.default=f;var v={upload:Be.default,handleJobs:Be.handleJobs};t.uploadFileUrl=v},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/isBackgroundUploadingEnabled.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var s=r(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var o=n.legacyV6Flags.isFeatureEnabled(s.default.ASSET_BACKGROUND_UPLOADING);t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/mapContentItemToAssetDetails.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var c=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");var s;var o=function e(t){return{assetType:c.AssetType.IMAGE,assetUrl:t.assetUrl,fileType:t.contentType,filename:t.filename,id:t.id,licensedAssetPreview:t.licensedAssetPreview,mediaFocalPoint:t.mediaFocalPoint}};var i=function e(t){var a=t.systemDataSourceType,r=t.videoCodec,n=t.audioCodec,s=t.durationSeconds;var o=t.systemDataVariants.split(",");var i=function e(t){return n?"".concat(a,"-").concat(r,"-").concat(n,"-").concat(t):"".concat(a,"-").concat(r,"-").concat(t)};var l=o.map(function(e){return i(e)});var u=l[0];var d=t.alexandriaUrl.replace("{variant}",u);return{id:t.id,assetType:c.AssetType.VIDEO,assetUrl:d,filename:t.filename,fileDuration:s,licensedAssetPreview:t.licensedAssetPreview,mediaFocalPoint:t.mediaFocalPoint}};var l=(s={},(0,n.default)(s,c.AssetType.IMAGE,o),(0,n.default)(s,c.AssetType.VIDEO,i),s);var u=l;t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/onAssetCreated.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=r(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=r(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var i=r(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var l=r(a("./src/main/webapp/frontend/packages/enums/RecordType.js"));var u=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");var d=n(a("./src/main/webapp/universal/src/apps/App/shared/utils/getAssetReferenceUrl.ts"));var c=r(a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js"));var p=r(a("./src/main/webapp/universal/src/apps/App/shared/utils/VideoContentServiceAPI.js"));var m;function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,r)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var b=function(){var n=(0,i.default)(o.default.mark(function e(a,r,n){var s;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s=(0,d.default)(d.AssetReferenceType.TRANSIENT_IMAGE);return t.abrupt("return",c.default.createAssetReference(s,{libraryId:a.libraryId,assetId:a.assetId,recordType:l.default.IMAGE},r).then(function(e){if(e){c.default.insert(v({},e,{licensedAssetPreview:void 0}));n({id:e.id})}else n({id:void 0})}));case 2:case"end":return t.stop()}},e)}));return function e(t,a,r){return n.apply(this,arguments)}}();var A=function(){var n=(0,i.default)(o.default.mark(function e(a,t,r){return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",p.default.createVideoReference(a.libraryId,a.assetId).then(function(e){return c.default.read(e.id)}).then(function(e){return r({id:e.id})}));case 1:case"end":return t.stop()}},e)}));return function e(t,a,r){return n.apply(this,arguments)}}();var h=(m={},(0,s.default)(m,u.AssetType.IMAGE,b),(0,s.default)(m,u.AssetType.VIDEO,A),m);var E=h;t.default=E;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/uploadFileFromUrl.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.handleJobs=void 0;var o=r(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var i=r(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var s=r(a("./src/main/webapp/frontend/packages/enums/RecordType.js"));var l=r(a("./src/main/webapp/universal/src/shared/utils/UploadAPI.js"));var u=r(a("./src/main/webapp/universal/src/shared/utils/buildUploadPostData.js"));var d=r(a("./src/main/webapp/universal/src/shared/constants/UploadModes.js"));var c=r(a("./src/main/webapp/universal/src/shared/utils/JobAPI.js"));var p=r(a("./src/main/webapp/frontend/packages/enums/JobStatuses.js"));var n=function(){var a=(0,i.default)(o.default.mark(function e(a){var n,s;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=function e(r){return new Promise(function(t,a){setTimeout(function(){c.default.load(r.id).then(function(e){t(e.data[0])}).catch(function(e){a(e)})},2e3)})};s=function(){var a=(0,i.default)(o.default.mark(function e(a){var r;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(!a||!a.status||a.status===p.default.FAILURE)){t.next=2;break}throw new Error("job failed");case 2:if(!(a.status===p.default.WAITING||a.status===p.default.PROCESSING)){t.next=7;break}t.next=5;return n(a);case 5:r=t.sent;return t.abrupt("return",s(r));case 7:return t.abrupt("return",a);case 8:case"end":return t.stop()}},e)}));return function e(t){return a.apply(this,arguments)}}();return t.abrupt("return",s(a));case 3:case"end":return t.stop()}},e)}));return function e(t){return a.apply(this,arguments)}}();var m=function(){var r=(0,i.default)(o.default.mark(function e(a,r){var n;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=(0,u.default)(a,s.default.IMAGE,d.default.TRANSIENT,r);return t.abrupt("return",l.default.uploadFromFileUrl(void 0,l.default.URLS.IMAGE,n).then(function(e){if(null!==e&&void 0!==e&&e.data)return{job:e.data.job,media:e.data.media[0]};throw new Error("No response data")}).catch(function(e){console.error(e)}));case 2:case"end":return t.stop()}},e)}));return function e(t,a){return r.apply(this,arguments)}}();var f=function(){var a=(0,i.default)(o.default.mark(function e(a){var r;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return n(a);case 2:r=t.sent;return t.abrupt("return",r);case 4:case"end":return t.stop()}},e)}));return function e(t){return a.apply(this,arguments)}}();t.handleJobs=f;var v=m;t.default=v},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/withAssetUploadProvider.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;a("./src/main/webapp/universal/src/shared/i18n/configurations/asset-uploader.js");var n=r(a("./common/temp/node_modules/react/index.js"));var s=a("./src/main/webapp/frontend/packages/asset-management/asset-uploader/asset-uploader/lib/index.js");var o=function e(r){var t=function e(t){var a;return n.default.createElement(s.AssetUploadProvider,{initialUploadState:t.value.id||null!==(a=t.value.embed)&&void 0!==a&&a.url?s.UPLOAD_UI_STATE.PROCESSING:s.UPLOAD_UI_STATE.EMPTY},n.default.createElement(r,t))};return t};var i=o;t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/AssetUploaderField/withStore.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(a("./common/temp/node_modules/alt-utils/lib/connectToStores.js"));var s=r(a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentItemStore.js"));var o=r(a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js"));var i=function e(t){return(0,n.default)({getStores:function e(){return[s.default]},getPropsFromStores:function e(t){var a={contentItem:{}};if(t.value.id){var r;var n=null===(r=s.default.getState().get(t.value.id))||void 0===r?void 0:r.toJS();n?a.contentItem=n:a.showCancellation=true}return a},componentDidConnect:function e(t){t.value.id&&!s.default.getState().get(t.value.id)&&o.default.read.defer(t.value.id)}},t)};var l=i;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/EmbedPropType.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(a("./common/temp/node_modules/prop-types/index.js"));var s=n.default.shape({url:n.default.string,thumbnailUrl:n.default.string,providerName:n.default.string,description:n.default.string,title:n.default.string,height:n.default.number,width:n.default.number,html:n.default.string,version:n.default.string,type:n.default.string,thumbnailHeight:n.default.number,authorName:n.default.string,authorUrl:n.default.string,providerUrl:n.default.string,resolveObject:n.default.string,resolvedBy:n.default.string,resolved:n.default.bool});t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/VideoExternalLink.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var I=r(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var _=r(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var U=r(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=r(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));a("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var S=n(a("./common/temp/node_modules/react/index.js"));var D=r(a("./common/temp/node_modules/lodash/debounce.js"));var o=r(a("./common/temp/node_modules/prop-types/index.js"));var R=a("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var F=a("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var k=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var C=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var M=n(a("./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/getEmbed.js"));var i;var x=(i={},(0,s.default)(i,M.EMBED_STATUS.VALID,(0,C.t)("Video found")),(0,s.default)(i,M.EMBED_STATUS.INVALID,(0,C.t)("Video not found, update the link")),(0,s.default)(i,M.EMBED_STATUS.VIMEO_BASIC_ACCOUNT,(0,C.t)("Vimeo Basic accounts are unsupported, update the link")),i);var L={EMPTY:"EMPTY",PROCESSING:"PROCESSING",VALID:"VALID",INVALID:"INVALID"};var V={ui:L.EMPTY,embed:{},message:""};var N=function e(t){return void 0===t||""===t.trim()};var l=function e(t){var a;var r=t.position,n=t.positionOffset,s=t.link,o=t.isOpen,i=t.onSave,l=t.onCancel;var u=(0,S.useState)(V),d=(0,U.default)(u,2),c=d[0],p=d[1];var m=function e(t){p({ui:L.PROCESSING,embed:{url:t}})};var f=function e(t,a){p({ui:L.VALID,embed:t,message:a})};var v=function e(t,a){p({ui:L.INVALID,embed:{url:t},message:a})};var b=function e(){p(V)};var A=S.default.useCallback((0,D.default)(function(){var t=(0,_.default)(I.default.mark(function e(a){var r,n,s,o;return I.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!N(a)){t.next=3;break}b();return t.abrupt("return");case 3:m(a);t.next=6;return(0,M.default)(a);case 6:r=t.sent;n=r.status;s=r.embed;o=x[n];n===M.EMBED_STATUS.VALID?f(s,o):v(a,o);case 11:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),500),[]);var h=S.default.useCallback(function(){N(s)?b():A(s)},[s,A]);var E=function e(){i(c.embed)};var P=function e(){l();h()};var g=c.ui===L.EMPTY;var j=c.ui===L.PROCESSING;var O=c.ui===L.VALID;var w=c.ui===L.INVALID;var y=null===r||void 0===r?void 0:r.offsetWidth;var T=k.space[1];(0,S.useEffect)(function(){h()},[h]);return S.default.createElement(S.default.Fragment,null,S.default.createElement(F.Modal.Transition,null,o&&S.default.createElement(F.Modal,null,S.default.createElement(F.Modal.Overlay,{background:"transparent"}),S.default.createElement(F.Modal.Position,{position:r},S.default.createElement(F.Modal.Dialog,{mt:n,mx:T,width:y?"calc(".concat(y,"px - 2 * ").concat(T,")"):"277px"},S.default.createElement(F.Stack,{space:1,divider:S.default.createElement(F.Divider,null),px:2,pt:2,m:0},S.default.createElement(F.Stack,{space:0,direction:"row",pb:1},j?S.default.createElement(R.Box,{width:"sizes.150",ml:1,pt:2},S.default.createElement(F.ActivityIndicator,{size:0})):"",S.default.createElement(R.Text.Body,{pt:1,pb:0,m:0,color:w?"red.300":"gray.100"},g?(0,C.t)("YouTube or Vimeo links only"):"",j?(0,C.t)("Searching..."):"",O||w?c.message:"")),S.default.createElement(F.TextInput,{py:1,autoFocus:true,width:"100%",defaultValue:null===(a=c.embed)||void 0===a?void 0:a.url,placeholder:(0,C.t)("Add link URL"),onChange:A}),S.default.createElement(R.Flex,{flexWrap:"wrap",justifyContent:"flex-end",m:0,pb:1},S.default.createElement(R.Button.Tertiary,{onClick:P,size:1,p:0,mr:4},(0,C.t)("Cancel")),S.default.createElement(R.Button.Tertiary,{onClick:E,size:1,p:0,m:0,disabled:!O},(0,C.t)("Save")))))))))};l.propTypes={position:o.default.oneOfType([o.default.element,o.default.object]).isRequired,positionOffset:o.default.string,link:o.default.string,isOpen:o.default.bool,onSave:o.default.func,onCancel:o.default.func};var u=l;t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/getEmbed.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.EMBED_STATUS=void 0;var n=r(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=r(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=r(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));a("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var i=r(a("./common/temp/node_modules/@sqs/core-components/build/lib/fields/EmbedField/EmbedResolver/index.js"));var l=a("./common/temp/node_modules/@sqs/core-components/fields/EmbedField.js");var u;function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,r)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),true).forEach(function(e){(0,o.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var p={VALID:"VALID",INVALID:"INVALID",VIMEO_BASIC_ACCOUNT:"VIMEO_BASIC_ACCOUNT"};t.EMBED_STATUS=p;var m={YOUTUBE:"youtube",VIMEO:"vimeo"};var f=(u={},(0,o.default)(u,m.YOUTUBE,l.EmbedResolvers[m.YOUTUBE]),(0,o.default)(u,m.VIMEO,c({},l.EmbedResolvers[m.VIMEO],{checkErr:null,sanitizeData:function e(t){t.accountType=t.account_type;delete t.account_type;return t}})),u);var v=Object.keys(f);var b=new i.default;var A=function(){var a=(0,s.default)(n.default.mark(function e(a){var r;return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return b.process(a,v,f);case 3:r=t.sent;if(r.resolved){t.next=6;break}return t.abrupt("return",{status:p.INVALID});case 6:if(!(r.resolvedBy===m.YOUTUBE&&void 0===r.authorName)){t.next=8;break}return t.abrupt("return",{status:p.INVALID});case 8:if(!(r.resolvedBy===m.VIMEO&&"basic"===r.accountType)){t.next=10;break}return t.abrupt("return",{status:p.VIMEO_BASIC_ACCOUNT});case 10:return t.abrupt("return",{status:p.VALID,embed:r});case 13:t.prev=13;t.t0=t["catch"](0);return t.abrupt("return",{status:p.INVALID});case 16:case"end":return t.stop()}},e,null,[[0,13]])}));return function e(t){return a.apply(this,arguments)}}();var h=A;t.default=h},"./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/index.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"default",{enumerable:true,get:function e(){return n.default}});Object.defineProperty(t,"EmbedPropType",{enumerable:true,get:function e(){return s.default}});Object.defineProperty(t,"getEmbed",{enumerable:true,get:function e(){return o.default}});var n=r(a("./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/VideoExternalLink.js"));var s=r(a("./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/EmbedPropType.js"));var o=r(a("./src/main/webapp/universal/src/apps/App/shared/components/VideoExternalLink/getEmbed.js"))},"./src/main/webapp/universal/src/apps/App/shared/utils/VideoContentServiceAPI.js":function(e,t,a){"use strict";var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=r(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=r(a("./common/temp/node_modules/@sqs/network/lib/index.js"));var i=r(a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js"));var l=function(){function e(){(0,n.default)(this,e)}(0,s.default)(e,[{key:"getEndpointUrl",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"/api/content-service/asset/1.0/websites/".concat(t,"/video-asset/").concat(a)}},{key:"createVideoReference",value:function e(t,a){var r=this.getEndpointUrl(t,"video-reference");var n=i.default.getState().toObject();var s={authorId:n.id,systemDataId:a};return o.default.post(r,s).then(function(e){var t=e.data;return t}).catch(function(e){var t=e.response;return Promise.reject((null===t||void 0===t?void 0:t.data)||{})})}}]);return e}();var u=new l;t.default=u;e.exports=t.default}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/19-c4cc9da41e83f48ef5c52-min.en-US.js.map