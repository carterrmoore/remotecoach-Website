(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[45],{"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/Dashboard/utils/useOnboardingPreferences.tsx":function(e,t,r){"use strict";var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.setOnboardingPreferences=t.withEnsureOnboardingPreferences=t.AlreadySellingSales=t.Namespace=void 0;var a=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var o=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/shared/utils/commercePreferences/index.tsx");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),true).forEach(function(e){(0,a.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var i="onboarding";t.Namespace=i;var l;t.AlreadySellingSales=l;(function(e){e["SALES_0"]="SALES_0";e["SALES_1_TO_20"]="SALES_1_TO_20";e["SALES_21_TO_50"]="SALES_21_TO_50";e["SALES_51_TO_100"]="SALES_51_TO_100";e["SALES_100_PLUS"]="SALES_100_PLUS"})(l||(t.AlreadySellingSales=l={}));var p={etsyImportInitiated:false,alreadySelling:false,alreadySellingSales:null,alreadySellingBigCartel:false,alreadySellingWooCommerce:false,alreadySellingEtsy:false,alreadySellingSocialMedia:false,alreadySellingShopify:false,alreadySellingInPerson:false,alreadySellingWeebly:false,alreadySellingWix:false,onboardingSetupCardDismissedUntil:null,multiStepSetupCardDismissedUntil:null};var d=(0,o.withEnsurePreferences)(i);t.withEnsureOnboardingPreferences=d;var f=function e(t){return(0,o.setPreferences)(i,t)};t.setOnboardingPreferences=f;var m=function e(){var t=(0,o.useCommercePreferences)(i,p),r=t.preferences,n=(0,s.default)(t,["preferences"]);return u({preferences:r},n)};(0,o.addNamespaceHelper)(i);var v=m;t.default=v},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/EtsyProductImport/api/ImportJobsApi.ts":function(e,t,r){"use strict";var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getLastJob=h;t.getLastJobDetails=S;t.getUserConnection=g;t.disconnectUser=O;t.startJob=P;t.pollJobProgress=I;t.getJobStatusState=k;t.shouldShowSuccessState=A;t.getCurrencySettings=N;var u=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var a=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var i=n(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var c=n(r("./common/temp/node_modules/lodash/get.js"));var s=n(r("./common/temp/node_modules/@sqs/cookie-cutter/index.js"));var o=r("./src/main/webapp/universal/src/shared/utils/SessionStorage.ts");var l;(function(e){e["Etsy"]="ETSY"})(l=l||{});var p;(function(e){e["Product"]="PRODUCT_IMPORT";e["Review"]="REVIEW_IMPORT"})(p=p||{});var d="/commerce-channels/api";var f="".concat(d,"/jobs");var m="".concat(d,"/connections");var v="".concat(d,"/etsy/connections");var b=12e5;function h(){return y.apply(this,arguments)}function y(){y=(0,a.default)(u.default.mark(function e(){var r,n,a,s,o,c=arguments;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=c.length>0&&void 0!==c[0]?c[0]:l.Etsy;n=c.length>1&&void 0!==c[1]?c[1]:p.Product;a=c.length>2&&void 0!==c[2]?c[2]:1;t.next=5;return i.default.get("".concat(f,"?channel=").concat(r,"&jobType=").concat(n,"&pageSize=").concat(a));case 5:s=t.sent;o=s.data;return t.abrupt("return",o);case 8:case"end":return t.stop()}},e)}));return y.apply(this,arguments)}function S(){return w.apply(this,arguments)}function w(){w=(0,a.default)(u.default.mark(function e(){var r;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return h();case 3:r=t.sent;return t.abrupt("return",JSON.parse(r[0].details)||{});case 7:t.prev=7;t.t0=t["catch"](0);return t.abrupt("return",{});case 10:case"end":return t.stop()}},e,null,[[0,7]])}));return w.apply(this,arguments)}var _=function e(){var t=s.default.get("crumb");return{headers:{"X-CSRF-Token":t}}};function g(){return E.apply(this,arguments)}function E(){E=(0,a.default)(u.default.mark(function e(){var r,n,a,s,o=arguments;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=o.length>0&&void 0!==o[0]?o[0]:l.Etsy;n=o.length>1&&void 0!==o[1]?o[1]:"shopName";t.next=4;return i.default.get("".concat(m,"?channel=").concat(r));case 4:a=t.sent;s=a.data;return t.abrupt("return",s.length>0?s[0].settings[r.toLowerCase()][n]:null);case 7:case"end":return t.stop()}},e)}));return E.apply(this,arguments)}function O(){return j.apply(this,arguments)}function j(){j=(0,a.default)(u.default.mark(function e(){var r,n,a=arguments;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=a.length>0&&void 0!==a[0]?a[0]:l.Etsy;n=_();t.next=4;return i.default.delete("".concat(m,"?channel=").concat(r),n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},e)}));return j.apply(this,arguments)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Etsy;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.Product;var n=(0,c.default)(window,"Static.SQUARESPACE_CONTEXT.authenticatedAccount.id",null);var a=JSON.stringify({collectionId:e,authorId:n});var s={channelJobType:r,channel:t,details:a};var o=_();return i.default.post(f,s,o)}var D=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;return new Promise(function(e){setTimeout(e,t)})};var C=function e(t){var r=Date.now();return r-t>b};var x=function e(t){var r=t[0];if(null!==r.details)return false;var n=new Date(r.createdOn).getTime();return C(n)};function I(){return T.apply(this,arguments)}function T(){T=(0,a.default)(u.default.mark(function e(){var r,n,a;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=true;n=false;case 2:if(!r){t.next=19;break}t.next=5;return D();case 5:t.next=7;return h();case 7:a=t.sent;r=null===a[0].details;n=x(a);if(r){t.next=15;break}a[0].details=JSON.parse(a[0].details);return t.abrupt("return",a[0]);case 15:if(!n){t.next=17;break}return t.abrupt("return",null);case 17:t.next=2;break;case 19:case"end":return t.stop()}},e)}));return T.apply(this,arguments)}function k(){return L.apply(this,arguments)}function L(){L=(0,a.default)(u.default.mark(function e(){var r;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return h();case 2:r=t.sent;if(!(!r.length||x(r))){t.next=5;break}return t.abrupt("return",null);case 5:r[0].details=JSON.parse(r[0].details);return t.abrupt("return",r[0]);case 7:case"end":return t.stop()}},e)}));return L.apply(this,arguments)}function A(e){var t=e.id;var r=new Date(e.updatedOn).getTime();var n=(0,o.getSessionData)("lastEtsyImportJobSeenId");var a=t===n;var s=C(r);if("FAILED"!==e.details.status&&!a&&!s){(0,o.saveSessionData)("lastEtsyImportJobSeenId",t);return true}return false}function N(){return R.apply(this,arguments)}function R(){R=(0,a.default)(u.default.mark(function e(){var r,n;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return i.default.get("".concat(v,"/currency_settings"));case 2:r=t.sent;n=r.data;return t.abrupt("return",n.currencyCode);case 5:case"end":return t.stop()}},e)}));return R.apply(this,arguments)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/EtsyProductImport/utils/isEtsyImportDeepLink.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=t.ETSY_IMPORT_DEEPLINK_PARAM=void 0;var n="etsy-import";t.ETSY_IMPORT_DEEPLINK_PARAM=n;var a=function e(){var t=new URLSearchParams(window.location.search);return t.get("open")===n};var s=a;t.default=s},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/shared/utils/commercePreferences/index.tsx":function(e,t,r){"use strict";var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.withEnsurePreferences=t.useCommercePreferences=t.addNamespaceHelper=t.fetchPreferences=t.setPreferences=void 0;var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var i=a(r("./common/temp/node_modules/lodash/pickBy.js"));var l=a(r("./common/temp/node_modules/lodash/isUndefined.js"));var p=n(r("./common/temp/node_modules/react/index.js"));var d=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var f=a(r("./src/main/webapp/universal/src/apps/Commerce/shared/utils/useFetch.ts"));function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),true).forEach(function(e){(0,o.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var b=function e(t){return"COMMERCE_PREFERENCES_REFETCH_".concat(t)};var h={};var y=function e(t,r){h[t]=v({},h[t],{},r)};var S=function(){var n=(0,s.default)(u.default.mark(function e(r,n){return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:y(r,n);document.dispatchEvent(new CustomEvent(b(r)));t.next=4;return d.default.put("/api/v1/commerce-preferences/".concat(r),n);case 4:case"end":return t.stop()}},e)}));return function e(t,r){return n.apply(this,arguments)}}();t.setPreferences=S;var w={};var _=function(){var r=(0,s.default)(u.default.mark(function e(o){return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!h[o]){t.next=2;break}return t.abrupt("return",h[o]);case 2:w[o]||(w[o]=(0,s.default)(u.default.mark(function e(){var r,n,a,s;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return d.default.get("/api/v1/commerce-preferences/".concat(o));case 2:r=t.sent;n=r.data;a=n.websiteId;s=(0,c.default)(n,["websiteId"]);y(o,s);return t.abrupt("return",s);case 8:case"end":return t.stop()}},e)}))());return t.abrupt("return",w[o]);case 4:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();t.fetchPreferences=_;var g=function e(t){var r="__setCommercePreferences_".concat(t);window[r]=function(e){return S(t,e)}};t.addNamespaceHelper=g;var E=function e(t,r){var n=(0,f.default)(function(){return _(t)}),a=n.data,s=void 0===a?h[t]:a,o=n.isError,c=n.isLoading,u=n.refetch;(0,p.useEffect)(function(){document.addEventListener(b(t),u);return function(){document.addEventListener(b(t),u)}},[u,t]);return{preferences:v({},r,{},(0,i.default)(s,function(e){return!(0,l.default)(e)})),isError:o,isLoading:c,hasLoaded:!!s||o}};t.useCommercePreferences=E;var O=function e(a){return function(n){return function(e){var t=E(a),r=t.hasLoaded;if(!r)return null;return p.default.createElement(n,e)}}};t.withEnsurePreferences=O},"./src/main/webapp/universal/src/apps/Commerce/shared/utils/useFetch.ts":function(e,t,r){"use strict";var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var f=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var m=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var a=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var v=r("./common/temp/node_modules/react/index.js");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,a.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var h;(function(e){e["FETCH_PENDING"]="FETCH_PENDING";e["FETCH_SUCCESS"]="FETCH_SUCCESS";e["FETCH_FAILED"]="FETCH_FAILED"})(h=h||{});var y=function e(t,r){switch(r.type){case h.FETCH_PENDING:return b({},t,{isLoading:true});case h.FETCH_SUCCESS:return b({},t,{data:r.payload,isLoading:false});case h.FETCH_FAILED:return b({},t,{error:r.error,isError:true,isLoading:false});default:throw new Error("Invalid action type")}};var o=function e(n){var t={isError:false,isLoading:false};var r=(0,v.useState)(Date.now()),a=(0,m.default)(r,2),s=a[0],o=a[1];var c=(0,v.useReducer)(y,t),u=(0,m.default)(c,2),i=u[0],l=u[1];var p=(0,v.useCallback)(function(){o(Date.now())},[o]);(0,v.useEffect)(function(){i.error&&console.error(i.error)},[i.error]);(0,v.useEffect)(function(){var e=function(){var t=(0,f.default)(d.default.mark(function e(){var r;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:l({type:h.FETCH_PENDING});t.prev=1;t.next=4;return n();case 4:r=t.sent;l({type:h.FETCH_SUCCESS,payload:r});t.next=11;break;case 8:t.prev=8;t.t0=t["catch"](1);l({type:h.FETCH_FAILED,error:t.t0});case 11:case"end":return t.stop()}},e,null,[[1,8]])}));return function e(){return t.apply(this,arguments)}}();e()},[s]);return b({},i,{refetch:p})};var c=o;t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/shared/types/Visibility.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isVisibility=a;t.VisibilityState=void 0;var n;t.VisibilityState=n;(function(e){e["HIDDEN"]="HIDDEN";e["SCHEDULED"]="SCHEDULED";e["VISIBLE"]="VISIBLE"})(n||(t.VisibilityState=n={}));function a(e){return Object.values(n).includes(e)}},"./src/main/webapp/universal/src/shared/utils/SessionStorage.ts":function(e,t,r){"use strict";var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.removeSessionData=t.getSessionData=t.saveSessionData=void 0;var a=n(r("./common/temp/node_modules/lodash/isNumber.js"));var o=n(r("./common/temp/node_modules/@sqs/cookie-cutter/index.js"));var c=function e(){return!!window.localStorage};var s=function e(t,r,n){try{var a={value:r,expires:n?n.getTime():void 0};var s=JSON.stringify(a);c()?localStorage.setItem(t,s):n?o.default.set(t,s,{path:"/",expires:n.toISOString()}):o.default.set(t,s,{path:"/"})}catch(e){console.warn(e)}};t.saveSessionData=s;var u=function e(t){try{var r=c()?localStorage.getItem(t):o.default.get(t);if(r){var n=JSON.parse(r);if(c()&&(0,a.default)(n.expires)&&n.expires<(new Date).getTime()){localStorage.removeItem(t);return null}return n.value}}catch(e){console.warn(e)}return null};t.getSessionData=u;var i=function e(t){try{c()?localStorage.removeItem(t):o.default.set(t,"",{expires:new Date(0).toISOString()})}catch(e){console.warn(e)}};t.removeSessionData=i},"./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackEtsyImportActivation.ts":function(e,t,r){"use strict";var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.trackViewEtsyImportPrompt=p;t.trackClickEtsyImportPrompt=d;var a=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=n(r("./common/temp/node_modules/@sqs/track-events/v1.js"));var o=n(r("./common/temp/node_modules/lodash/get.js"));var c=n(r("./src/main/webapp/universal/src/shared/i18n/eventsData.ts"));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),true).forEach(function(e){(0,a.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var l=new s.default({customSchemaName:"commerce_setup"},i({event_owner_team:"commerce",event_source:"web",product_area:"commerce_onboarding",user_website_id:(0,o.default)(window,"Static.SQUARESPACE_CONTEXT.website.id",null)},(0,c.default)()));function p(e){l.track({actor:"user",action:"view",object_type:"modal",object_identifier:"etsy-import-prompt",product_page:e})}function d(e,t){l.track({actor:"user",action:"click",object_type:"card",object_identifier:"etsy-import-prompt",product_page:e,object_value:t})}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/45-4a75ce3316c5b233e2548-min.en-US.js.map