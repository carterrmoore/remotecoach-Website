(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[46],{"./src/main/webapp/frontend/packages/enums/MeasurementStandard.js":function(e,t){var r={IMPERIAL:1,METRIC:2};e.exports=r},"./src/main/webapp/frontend/packages/enums/MediaProcessingState.js":function(e,t){var r={QUEUED:1,PROCESSING:2,READY:3,ERROR:4,DOWNLOAD_ERROR:5,ERROR_TOO_LARGE:6,ERROR_FILE_NOT_FOUND:7,ERROR_UNSUPPORTED_IMAGE_TYPE:8,ERROR_UNSUPPORTED_AUDIO_TYPE:9};e.exports=r},"./src/main/webapp/frontend/packages/enums/ProductApiErrorType.js":function(e,t){var r={SKU_NOT_FOUND:"SKU_NOT_FOUND",PRODUCT_NOT_FOUND:"PRODUCT_NOT_FOUND",MISSING_PRODUCT_TYPE:"MISSING_PRODUCT_TYPE",ILLEGAL_DATA_FOR_PRODUCT_CREATION:"ILLEGAL_DATA_FOR_PRODUCT_CREATION",INVALID_DATA_FOR_PRODUCT_TYPE:"INVALID_DATA_FOR_PRODUCT_TYPE",NEGATIVE_STOCK_LEVEL:"NEGATIVE_STOCK_LEVEL",PAGE_SIZE_TOO_BIG:"PAGE_SIZE_TOO_BIG",INVALID_SKU_FOR_PRODUCT_TYPE:"INVALID_SKU_FOR_PRODUCT_TYPE",SUBSCRIPTION_PLAN_NOT_FOUND:"SUBSCRIPTION_PLAN_NOT_FOUND",VARIANT_NOT_FOUND:"VARIANT_NOT_FOUND",INVALID_URL_ID:"INVALID_URL_ID",IMAGE_UPLOAD_SIZE_TOO_LARGE:"IMAGE_UPLOAD_SIZE_TOO_LARGE",UNKNOWN_ERROR:"UNKNOWN_ERROR",TAX_CATEGORY_ERROR:"TAX_CATEGORY_ERROR"};e.exports=r},"./src/main/webapp/frontend/packages/enums/ProductTypes.js":function(e,t){var r={PHYSICAL:1,DIGITAL:2,SERVICE:3,GIFT_CARD:4,PAYWALL:5};e.exports=r},"./src/main/webapp/frontend/packages/enums/RelatedProductsConfigurationStrategy.js":function(e,t){var r={FIRST_CATEGORY:"FIRST_CATEGORY",CATEGORIES:"CATEGORIES",TAGS:"TAGS",OFF:"OFF"};e.exports=r},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/EtsyProductImport/components/ProductImportSurvey.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.passesSurveyRequirements=void 0;var h=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var c=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var y=a(r("./common/temp/node_modules/react/index.js"));var i=n(r("./common/temp/node_modules/lodash/get.js"));var o=n(r("./common/temp/node_modules/lodash/shuffle.js"));var u=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var l=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var P=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var d=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var x=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var _=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var p=r("./src/main/webapp/frontend/packages/universal-router/lib/index.js");var w=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackEtsyImport.ts");var E=r("./src/main/webapp/universal/src/shared/utils/SessionStorage.ts");var m=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/EtsyProductImport/api/ImportJobsApi.ts");var j=n(r("./src/main/webapp/frontend/packages/enums/AchievementType.js"));var A=n(r("./src/main/webapp/universal/src/shared/actions/WebsiteAchievementActions.js"));var f=n(r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteAchievementStore.js"));var S=(0,o.default)([{displayName:(0,d.t)("I don't want to sell the same products on Squarespace"),responseValue:"don't_want_to_sell_same_products"},{displayName:(0,d.t)("I don't currently sell on Etsy"),responseValue:"don't_currently_sell_on_platform"},{displayName:(0,d.t)("It's faster to add products myself"),responseValue:"faster_add_myself"},{displayName:(0,d.t)("I didn't know I could import my products from Etsy"),responseValue:"didn't_know_I_could_import_from_platform"}]);var O="mobile"===(0,l.getBreakpoint)(u.breakpoints).platform?"100%":"60%";var v=function(){var t=(0,s.default)(c.default.mark(function e(){var r,a,n,s,o;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=true!==(0,E.getSessionData)("seenProductImportSurvey");a=16321572e5;n=(0,i.default)(window,"Static.SQUARESPACE_CONTEXT.website.createdOn",null)>a;s=f.default.hasAchievement(j.default.ETSY_INTENT_EXPRESSED);if(!(r&&n&&s)){t.next=15;break}t.prev=5;t.next=8;return(0,m.getLastJob)();case 8:o=t.sent;return t.abrupt("return",0===o.length);case 12:t.prev=12;t.t0=t["catch"](5);return t.abrupt("return",false);case 15:return t.abrupt("return",false);case 16:case"end":return t.stop()}},e,null,[[5,12]])}));return function e(){return t.apply(this,arguments)}}();t.passesSurveyRequirements=v;var b=function e(t){var a=t.onClose,n=t.router;var r=(0,y.useState)(""),s=(0,h.default)(r,2),o=s[0],c=s[1];var i=(0,y.useState)(""),u=(0,h.default)(i,2),l=u[0],d=u[1];var p=window.location.pathname;var m=p.includes("pages");var f=p.includes("inventory");var v=m?"pages":f?"inventory-panel":"";var b=function e(){(0,w.trackCloseImportSurvey)(v);a()};var g=function e(){(0,w.trackRespondImportSurvey)(v,o,l);a()};(0,y.useEffect)(function(){(0,w.trackShowImportSurvey)(v);A.default.grantAchievement(j.default.PRODUCT_CREATED_PRODUCT_COMPOSER);(0,E.saveSessionData)("seenProductImportSurvey",true)},[]);var C=S.map(function(e){var t=e.displayName,r=e.responseValue;return y.default.createElement(_.Box,{key:r},y.default.createElement(_.Text.Body,{as:"label",display:"flex",position:"relative",lineHeight:"18px",sx:{cursor:"pointer"},mb:t.startsWith("I did")&&r===o?0:3},y.default.createElement(_.Radio,{checked:o===r,value:r,onChange:c,mr:3}),t),t.startsWith("I did")&&r===o&&y.default.createElement(_.Flex,{mb:3,ml:6,mt:1,flexWrap:"wrap"},y.default.createElement(_.Text.Body,{color:"gray.300",mr:1,my:0},y.default.createElement(P.T,{project:"commerce-etsy-import"},"Would you like to import your products from Etsy?")),y.default.createElement(_.Text.Body,{color:"gray.300",borderBottom:1,borderColor:"gray.300",my:0,onClick:function e(){(0,w.trackImportSurveyCTA)(v);(0,w.trackRespondImportSurvey)(v,o,l);a();n.push("/config/inventory?open=etsy-import")},sx:{transition:"border-color .1s ease-in-out",cursor:"pointer","&:hover":{borderColor:"gray.200"}}},y.default.createElement(P.T,{project:"commerce-etsy-import"},"Try it now"))))});return y.default.createElement(x.Modal.Transition,null,y.default.createElement(x.Modal,{onRequestClose:b},y.default.createElement(x.Modal.Overlay,null),y.default.createElement(x.Modal.Position,{position:"center"},y.default.createElement(x.Modal.Dialog.ResponsiveProvider,null,y.default.createElement(x.Modal.Dialog,null,y.default.createElement(_.Flex,{justifyContent:"space-between",px:6},y.default.createElement(_.Button.Tertiary,{onClick:b,my:4},y.default.createElement(P.T,{project:"commerce-etsy-import"},"Close")),y.default.createElement(_.Button.Tertiary,{onClick:g,my:4,disabled:""===o},y.default.createElement(P.T,{project:"commerce-etsy-import"},"Submit"))),y.default.createElement(_.Box,{px:6,pt:5,pb:3,width:O,mx:"auto"},y.default.createElement(_.Text.Title,null,y.default.createElement(P.T,{project:"commerce-etsy-import"},"Help us improve your experience")),y.default.createElement(_.Text.Subtitle,{mb:2,color:"gray.300"},y.default.createElement(P.T,{project:"commerce-etsy-import"},"We're making it easier to sell on Squarespace and Etsy and would appreciate your feedback.")),y.default.createElement(_.Text.Subtitle,null,y.default.createElement(P.T,{project:"commerce-etsy-import"},"Why did you choose not to import your products from Etsy?")),C,y.default.createElement(_.Text.Body,{as:"label",display:"flex",position:"relative",lineHeight:"18px",sx:{cursor:"pointer"}},y.default.createElement(_.Radio,{checked:"other"===o,value:"other",onChange:c,mr:3}),y.default.createElement(P.T,{project:"commerce-etsy-import"},"Other")),"other"===o&&y.default.createElement(x.Textarea,{mt:2,ml:6,backgroundColor:"gray.900",height:130,p:2,width:"85%",value:l,onChange:d,placeholder:"Tell us more (optional)"})))))))};var g=(0,p.withRouter)(b);t.default=g},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/EtsyProductImport/utils/shouldShowEtsyImportFork.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteAchievementStore.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/AchievementType.js"));var o=function e(t){return n.default.hasAchievement(s.default.ETSY_INTENT_EXPRESSED)&&!n.default.hasAchievement(s.default.PRODUCT_SAVED)&&!t.etsyImportInitiated};var c=o;t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductComposer.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var N=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var V=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var q=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var B=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var L=n(r("./common/temp/node_modules/@sqs/core-components/modals/ToastManager.js"));var U=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var G=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-context.tsx");var W=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx");var Y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx");var z=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var H=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/index.tsx"));var K=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductForm/index.tsx"));var Z=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/index.tsx"));var X=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantForm/index.tsx"));var J=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/GlobalLoadingOverlay/index.tsx"));var Q=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.tsx"));var $=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var ee=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var te=n(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var re=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmExitProduct.ts"));var ae=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/WelcomeModal/WelcomeModal.tsx"));var ne=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));var se=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useDeleteProduct.tsx"));var c=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/anchorLinks.ts"));function oe(e){var t=e.isMobile,r=e.children;return B.default.createElement(s.Box,{width:t?"100vw":"calc(100vw - ".concat(o.space[8],")"),height:t?"100vh":"calc(100vh - ".concat(o.space[8],")"),overflow:"scroll","data-anchor":c.default.SCROLL_REF},r)}function i(e){var t=e.isOpen,n=e.productId,r=e.lifeCycleHooks,a=e.externalYUIModules,s=e.isNew;var o=(0,U.useProductContext)(),c=o.product,i=o.setProduct,u=o.composerOpenedAt,l=o.setComposerOpenedAt;var d=(0,G.useRouterContext)(),p=(0,q.default)(d,1),m=p[0].currentLocation;var f=(0,B.useState)(null),v=(0,q.default)(f,2),b=v[0],g=v[1];var C=(0,W.useViewStateContext)(),h=C.isLoading,y=C.setToastManager;var P=(0,Y.useLifeCycleHooksContext)(),x=P.lifeCycleHooks,_=P.setLifeCycleHooks;var w=(0,re.default)(),E=w.confirmExit;var j=(0,B.useState)((0,ae.shouldShowWelcomeModal)()),A=(0,q.default)(j,2),S=A[0],O=A[1];var I=(0,ne.default)(),T=I.isMobile;var k=(0,se.default)(),F=k.deleteProduct;(0,B.useEffect)(function(){function e(){return t.apply(this,arguments)}function t(){t=(0,V.default)(N.default.mark(function e(){var r,a;return N.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return(0,z.getProduct)(n);case 3:r=t.sent;i(r);if(r){a=(0,te.default)(r.productType);a&&(0,$.trackOpenProductEditor)({productId:r.id,productType:a,productName:r.name,productEditor:ee.ProductEditor.PRODUCT_COMPOSER_V1})}t.next=11;break;case 8:t.prev=8;t.t0=t["catch"](0);g(t.t0);case 11:case"end":return t.stop()}},e,null,[[0,8]])}));return t.apply(this,arguments)}e()},[n,r]);(0,B.useEffect)(function(){r&&_(r)},[r]);(0,B.useEffect)(function(){l(Date.now())},[]);if(b)return B.default.createElement("div",null,"Un-Designed and Temporary Error State: ".concat(b));if(!c)return B.default.createElement(Q.default,{isOpen:true,onRequestClose:function e(){return null}},B.default.createElement(oe,{isMobile:T},B.default.createElement(J.default,null)));var D,R;switch(m.route){case G.Route.HOME:case G.Route.PRODUCT_FORM:D=B.default.createElement(K.default,{product:c,isNewProduct:!!s,externalYUIModules:a});break;case G.Route.VARIANT_FORM:var M=m.variantId;D=B.default.createElement(X.default,{product:c,variantId:M});R=c.variants.find(function(e){return e.id===M});break;case G.Route.VARIANT_TABLE:D=B.default.createElement(Z.default,{productType:c.productType,variants:c.variants});break;default:throw new Error("Product Composer can not render this route yet!")}if(S)return B.default.createElement(ae.default,{onConfirm:function e(){O(false)}});return B.default.createElement(Q.default,{isOpen:t,onRequestClose:(0,V.default)(N.default.mark(function e(){var r,a;return N.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return E();case 2:r=t.sent;if(r){t.next=5;break}return t.abrupt("return");case 5:s?F(true):x.onCancelButtonClick();a=(0,te.default)(c.productType);a&&(0,$.trackCloseWithoutSavingProductEditor)({productId:c.id,productType:a,productName:c.name,productEditor:ee.ProductEditor.PRODUCT_COMPOSER_V1,timeElapsed:Date.now()-u});case 8:case"end":return t.stop()}},e)}))},B.default.createElement(oe,{isMobile:T},B.default.createElement(H.default,{product:c,isNewProduct:!!s,isMobile:T,variant:R}),D,h&&B.default.createElement(J.default,null),B.default.createElement(L.default,{ref:function e(t){t&&y(t)}})))}var u=i;t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductComposerOrchestrator.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var l=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var d=n(r("./common/temp/node_modules/react/index.js"));var p=n(r("./common/temp/node_modules/react-dom/index.js"));var c=n(r("./src/main/webapp/frontend/packages/enums/WorkflowStates.js"));var m=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductComposerWithProviders.tsx"));var f=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductCreationWizard.tsx"));var v=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/Inventory/screens/components/EditProductModal/ProductDialogActions.ts"));var b=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesAPI.ts"));var g=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/index.tsx");var C=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/buildShellContentItem.ts"));var h=n(r("./src/main/webapp/universal/src/apps/App/shared/actions/ToastManagerActions.ts"));var y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/getToastText.ts");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),true).forEach(function(e){(0,o.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var x=function e(){var i=this;(0,s.default)(this,e);(0,o.default)(this,"container",void 0);(0,o.default)(this,"originalZIndex",void 0);(0,o.default)(this,"showToast",function(e){var t=e.text,r=e.accessories;h.default.present({text:t,accessories:r})});(0,o.default)(this,"close",function(){p.default.unmountComponentAtNode(i.container);null!==i.originalZIndex&&(window.Y.Squarespace.DIALOG_ZINDEX_BASE=i.originalZIndex)});(0,o.default)(this,"openProductComposer",function(e){var t=e.productId,r=e.isNew,s=e.onSavingClose,n=e.onNonSavingClose;i.close();i.originalZIndex=window.Y.Squarespace.DIALOG_ZINDEX_BASE;window.Y.Squarespace.DIALOG_ZINDEX_BASE+=5e4;var a=d.default.createElement(m.default,{externalYUIModules:{additionalInfoConstructor:window.Y.Squarespace.DialogFields.Layout,customFormsConstructor:window.Y.Squarespace.DialogFields.FormSelector,socialAccountsConstructor:window.Y.Squarespace.DialogFields.ItemPush,dialog:new window.Y.Squarespace.EditingDialog},lifeCycleHooks:{onCancelButtonClick:function e(){i.close();null===n||void 0===n?void 0:n()},onSaveButtonClick:function(){var t=(0,l.default)(u.default.mark(function e(r){var a,n;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=(0,C.default)(r);i.close();null===s||void 0===s?void 0:s({product:r,contentItem:a});t.next=5;return(0,y.getWaitlistToastText)(r);case 5:n=t.sent;n&&i.showToast(n);case 7:case"end":return t.stop()}},e)}));function e(e){return t.apply(this,arguments)}return e}(),onDeleteButtonClick:function e(t){var r=P({},(0,C.default)(t),{workflowState:c.default.DELETED});i.close();null===s||void 0===s?void 0:s({product:t,contentItem:r})},onDuplicateButtonClick:function e(t,r){var a=(0,C.default)(r);i.close();i.openProductComposer({productId:t.id,onSavingClose:s,onNonSavingClose:n});null===s||void 0===s?void 0:s({product:r,contentItem:a});i.showToast((0,y.getDuplicateToastText)())},onBetaOptOutButtonClick:function e(){(0,g.optOutProductComposer)();i.close();v.default.commerceOpenCreateProductDialog({productId:t})}},isNew:r,isOpen:true,productId:t});p.default.render(a,i.container)});(0,o.default)(this,"openProductCreationWizard",function(e){var t=e.collection,a=e.categoryId,n=e.onProductCreated,s=e.onSavingClose,o=e.onNonSavingClose,r=e.shouldSkipEtsyFork;i.close();var c=d.default.createElement(f.default,{isOpen:true,onRequestClose:i.close,onProductCreated:function(){var t=(0,l.default)(u.default.mark(function e(r){return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:null===n||void 0===n?void 0:n(r);if(!a){t.next=4;break}t.next=4;return b.assignCategory([a],r.id);case 4:i.openProductComposer({productId:r.id,isNew:true,onSavingClose:s,onNonSavingClose:o});case 5:case"end":return t.stop()}},e)}));function e(e){return t.apply(this,arguments)}return e}(),collectionId:null===t||void 0===t?void 0:t.id,collectionItemCount:null===t||void 0===t?void 0:t.itemCount,shouldSkipEtsyFork:r});p.default.render(c,i.container)});this.container=document.createElement("div");this.originalZIndex=null};var _=new x;var w=_;t.default=w;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductComposerWithProviders.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var o=a(r("./common/temp/node_modules/react/index.js"));var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductComposer.tsx"));var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProvidersWrapper.tsx"));function n(e){var t=e.isOpen,r=e.isNew,a=e.productId,n=e.lifeCycleHooks,s=e.externalYUIModules;return o.default.createElement(i.default,null,o.default.createElement(c.default,{isOpen:t,isNew:r,productId:a,lifeCycleHooks:n,externalYUIModules:s}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductCreationWizard.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/index.tsx"));var f=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.tsx"));var v=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var b=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));var g="900px";var C="675px";function n(e){var t=e.isOpen,r=e.onRequestClose,a=e.collectionId,n=e.collectionItemCount,s=e.onProductCreated,o=e.shouldSkipEtsyFork;var c=(0,b.default)(),i=c.isMobile;var u=i?"100vw":g;var l=i?"100vh":C;return d.default.createElement(f.default,{isOpen:t,onRequestClose:r},d.default.createElement(p.Box,{width:u,height:l,sx:{maxWidth:"100vw",maxHeight:"100vh"}},d.default.createElement(v.ConfirmModalProvider,null,d.default.createElement(m.default,{collectionId:a,collectionItemCount:n,onProductCreated:s,isMobile:i,onClose:r,shouldSkipEtsyFork:o}))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProvidersWrapper.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=v;var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var o=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var c=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-context.tsx");var i=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx");var u=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/taxCategoryContext.tsx");var l=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx");var d=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var p=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FeedbackForm/useFeedbackForm.tsx");var m=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/ErrorHandling.tsx");var f=r("./src/main/webapp/universal/src/shared/i18n/index.ts");function v(e){var t=e.children;return n.default.createElement(m.ErrorBoundary,{title:(0,f.t)("Something went wrong"),message:(0,f.t)("There was a problem with the Product Editor."),confirmLabel:(0,f.t)("Okay")},n.default.createElement(l.LifeCycleProvider,null,n.default.createElement(s.Breakpoint.Provider,null,n.default.createElement(i.ViewStateProvider,null,n.default.createElement(o.ProductProvider,null,n.default.createElement(u.TaxCategoryProvider,null,n.default.createElement(d.ConfirmModalProvider,null,n.default.createElement(p.FeedbackFormProvider,null,n.default.createElement(c.RouterProvider,null,t)))))))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/CategoriesApi.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getAllProductsCategories=u;t.createCategory=d;t.mergeCategories=m;var s=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var c=a(r("./common/temp/node_modules/qs/lib/index.js"));var i={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};function u(){return l.apply(this,arguments)}function l(){l=(0,n.default)(s.default.mark(function e(){var r,a;return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.get("/api/commerce/products/categories");case 2:r=t.sent;a=r.data.categories;return t.abrupt("return",a);case 5:case"end":return t.stop()}},e)}));return l.apply(this,arguments)}function d(e,t){return p.apply(this,arguments)}function p(){p=(0,n.default)(s.default.mark(function e(r,a){return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.post("/api/commondata/AddCategory",c.default.stringify({collectionId:r,category:a},{arrayFormat:"repeat"}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e)}));return p.apply(this,arguments)}function m(e,t,r){return f.apply(this,arguments)}function f(){f=(0,n.default)(s.default.mark(function e(r,a,n){return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.post("/api/commondata/MergeCategories",c.default.stringify({collectionId:r,oldcategory:a,newcategory:n},{arrayFormat:"repeat"}),i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e)}));return f.apply(this,arguments)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ContentItemsApi.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getProductItemImage=s;t.getFocalPointImage=u;var c=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var i=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));function s(e){return o.apply(this,arguments)}function o(){o=(0,n.default)(c.default.mark(function e(r){var a,n;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return i.default.get("/api/content-items/".concat(r));case 2:a=t.sent;n=a.data;return t.abrupt("return",n);case 5:case"end":return t.stop()}},e)}));return o.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){l=(0,n.default)(c.default.mark(function e(r){var a,n;var s,o;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return i.default.get("/api/content-items/".concat(r));case 2:s=t.sent;o=s.data;return t.abrupt("return",{id:o.id,urls:{https:o.assetUrl},focalPoint:{x:(null===(a=o.mediaFocalPoint)||void 0===a?void 0:a.x)||.5,y:(null===(n=o.mediaFocalPoint)||void 0===n?void 0:n.y)||.5}});case 5:case"end":return t.stop()}},e)}));return l.apply(this,arguments)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ImageApi.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.uploadPreviewImage=v;t.getProcessedImage=y;t.uploadPreviewThumbnailImage=x;t.deleteThumbnailImage=w;t.ACCEPTED_IMAGE_TYPES_STRING=t.ACCEPTED_IMAGE_TYPES=void 0;var l=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var d=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var p=a(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var s=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/JobApi.ts");var o=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/poll.ts"));var c=a(r("./src/main/webapp/frontend/packages/enums/RecordType.js"));var i=["image/gif","image/jpeg","image/png"];t.ACCEPTED_IMAGE_TYPES=i;var u=i.join(",");t.ACCEPTED_IMAGE_TYPES_STRING=u;function m(e){var t=new FormData;t.append("process","true");t.append("contentType",e.type);t.append("fileName",e.name);t.append("fileSize",e.size.toString());t.append("Filedata",e);return t}function f(e,t,r){var a=new FormData;var n=c.default.STORE_ITEM.toString();a.append("process","true");a.append("contentType","image");a.append("isWordpressXmlFile","false");a.append("collectionId",t);a.append("recordType",n);a.append("replaceItemId",r);a.append("fileName",e.name);a.append("fileSize",e.size.toString());a.append("Filedata",e);return a}function v(e){return b.apply(this,arguments)}function b(){b=(0,n.default)(l.default.mark(function e(r){var a,n,s,o,c,i,u;return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a={headers:{"Content-Type":"multipart/form-data"}};t.next=3;return d.default.post("/api/uploads/images",m(r),a);case 3:n=t.sent;s=n.data;o=s.media;c=s.job;i=o[0];u={id:i.id,urls:{https:URL.createObjectURL(r)},focalPoint:{x:i.mediaFocalPoint.x,y:i.mediaFocalPoint.y},mediaProcessingState:p.default.QUEUED};return t.abrupt("return",{previewImage:u,job:c});case 10:case"end":return t.stop()}},e)}));return b.apply(this,arguments)}function g(e){return C.apply(this,arguments)}function C(){C=(0,n.default)(l.default.mark(function e(r){var a;return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,s.pollForJobs)([r]);case 2:a=t.sent;return t.abrupt("return",a[0]);case 4:case"end":return t.stop()}},e)}));return C.apply(this,arguments)}function h(e){var t=e.status;if(t===p.default.READY)return true;if(t===p.default.PROCESSING||t===p.default.QUEUED)return false;throw new Error("Error uploading image")}function y(e){return P.apply(this,arguments)}function P(){P=(0,n.default)(l.default.mark(function e(r){var a,n;return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,o.default)({fn:function e(){return g(r.id)},validate:h});case 2:a=t.sent;n=a.data;return t.abrupt("return",n.contentItemId);case 5:case"end":return t.stop()}},e)}));return P.apply(this,arguments)}function x(e,t,r,a){return _.apply(this,arguments)}function _(){_=(0,n.default)(l.default.mark(function e(r,a,n,s){var o,c;return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return d.default.post("/api/commerce/products/".concat(r,"/thumbnail-image"),f(n,a,r),{onUploadProgress:s});case 2:o=t.sent;c=o.data.job;return t.abrupt("return",{job:c});case 5:case"end":return t.stop()}},e)}));return _.apply(this,arguments)}function w(e){return E.apply(this,arguments)}function E(){E=(0,n.default)(l.default.mark(function e(r){return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return d.default.delete("/api/commerce/products/".concat(r,"/thumbnail-image"),{params:{itemId:r}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e)}));return E.apply(this,arguments)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/JobApi.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.pollForJobs=c;var s=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));function c(e){return i.apply(this,arguments)}function i(){i=(0,n.default)(s.default.mark(function e(r){var a,n;return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.get("/api/rest/jobs/?id=".concat(r.join(",")));case 2:a=t.sent;n=a.data;return t.abrupt("return",n);case 5:case"end":return t.stop()}},e)}));return i.apply(this,arguments)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getProduct=A;t.getProductTaxCategoryData=O;t.searchProductTaxCategories=T;t.persistProductTaxCategory=N;t.createProduct=q;t.updateSeoImageId=z;t.createSubscriptionPlan=K;t.saveProduct=X;t.getProductCollections=Q;t.uploadProductImage=re;t.replaceProductImage=ne;t.getDigitalGoods=oe;t.uploadDigitalGood=ie;t.deleteProductImage=le;t.duplicateProduct=pe;t.deleteProduct=fe;t.deleteSubscriptionPlan=be;t.deleteDigitalGoods=Ce;t.getProductImage=ye;t.putProductItemImage=xe;t.updateFocalPoint=we;var f=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var v=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/qs/lib/index.js"));var b=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var c=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var u=a(r("./src/main/webapp/frontend/packages/enums/RecordType.js"));var p=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var m=r("./src/main/webapp/universal/src/shared/types/NormalizedProduct.ts");var g=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var i=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformPhysicalProduct.ts");var l=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformServiceProduct.ts");var d=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformGiftCardProduct.ts");var C=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformDigitalProduct.ts"));var h=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformUtils.ts");var y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesAPI.ts");var P=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ContentItemsApi.ts");var x=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesTree.ts");function _(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=w(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var a=0;var n=function e(){};return{s:n,n:function e(){if(a>=t.length)return{done:true};return{done:false,value:t[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,c;return{s:function e(){r=t[Symbol.iterator]()},n:function e(){var t=r.next();s=t.done;return t},e:function e(t){o=true;c=t},f:function e(){try{s||null==r.return||r.return()}finally{if(o)throw c}}}}function w(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function j(e){switch(e.productType){case c.default.PHYSICAL:return(0,i.transformPhysicalProduct)(e);case c.default.SERVICE:return(0,l.transformServiceProduct)(e);case c.default.GIFT_CARD:return(0,d.transformGiftCardProduct)(e);case c.default.DIGITAL:return(0,C.default)(e);default:throw new Error("Invalid product type: ".concat(e))}}function A(e){return S.apply(this,arguments)}function S(){S=(0,n.default)(v.default.mark(function e(r){var a,n;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.get("/api/commerce/products/".concat(r));case 2:a=t.sent;n=a.data;return t.abrupt("return",j(n));case 5:case"end":return t.stop()}},e)}));return S.apply(this,arguments)}function O(e){return I.apply(this,arguments)}function I(){I=(0,n.default)(v.default.mark(function e(r){var a,n;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.get("/api/1/commerce/products/".concat(r,"/tax-category"));case 2:a=t.sent;n=a.data;return t.abrupt("return",n);case 5:case"end":return t.stop()}},e)}));return I.apply(this,arguments)}function T(e){return k.apply(this,arguments)}function k(){k=(0,n.default)(v.default.mark(function e(r){var a,n,s;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=encodeURI("/api/1/commerce/products/tax-categories?keyword=".concat(r));t.next=3;return b.default.get(a);case 3:n=t.sent;s=n.data;return t.abrupt("return",s);case 6:case"end":return t.stop()}},e)}));return k.apply(this,arguments)}function F(e,t){return D.apply(this,arguments)}function D(){D=(0,n.default)(v.default.mark(function e(r,a){return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.put("/api/1/commerce/products/".concat(r,"/tax-category"),{productTaxCategory:a});case 2:case"end":return t.stop()}},e)}));return D.apply(this,arguments)}function R(e){return M.apply(this,arguments)}function M(){M=(0,n.default)(v.default.mark(function e(r){return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.delete("/api/1/commerce/products/".concat(r,"/tax-category"));case 2:case"end":return t.stop()}},e)}));return M.apply(this,arguments)}function N(e,t,r){return V.apply(this,arguments)}function V(){V=(0,n.default)(v.default.mark(function e(r,a,n){return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(a===n)){t.next=2;break}return t.abrupt("return");case 2:if(!a){t.next=7;break}t.next=5;return F(r,a);case 5:t.next=9;break;case 7:t.next=9;return R(r);case 9:case"end":return t.stop()}},e)}));return V.apply(this,arguments)}function q(e,t,r){return B.apply(this,arguments)}function B(){B=(0,n.default)(v.default.mark(function e(r,a,n){var s,o;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.post("/api/commerce/products/".concat(r),(0,h.buildCreateProductRequest)(a,n),{headers:{}});case 2:s=t.sent;o=s.data;return t.abrupt("return",o);case 5:case"end":return t.stop()}},e)}));return B.apply(this,arguments)}function L(e,a){var n=[];e.variants.forEach(function(t){var e=a.variants.find(function(e){return e.sku===t.sku});if(!e&&t.mainImage||e&&t.mainImage!==e.mainImage){var r;n.push({sku:t.sku,mainImageId:(null===(r=t.mainImage)||void 0===r?void 0:r.id)||null})}});return n}function U(e,t){return G.apply(this,arguments)}function G(){G=(0,n.default)(v.default.mark(function e(o,r){var a,c,n;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=_(r);t.prev=1;n=v.default.mark(function e(){var r,a,n,s;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=c.value;a=r.sku,n=r.mainImageId;s=o.variants.find(function(e){return e.sku===a});if(!s){t.next=6;break}t.next=6;return b.default.put("/api/commerce/products/".concat(o.id,"/variants/").concat(s.id,"/images"),{mainImageId:n});case 6:case"end":return t.stop()}},e)});a.s();case 4:if((c=a.n()).done){t.next=8;break}return t.delegateYield(n(),"t0",6);case 6:t.next=4;break;case 8:t.next=13;break;case 10:t.prev=10;t.t1=t["catch"](1);a.e(t.t1);case 13:t.prev=13;a.f();return t.finish(13);case 16:case"end":return t.stop()}},e,null,[[1,10,13,16]])}));return G.apply(this,arguments)}function W(e,t){return Y.apply(this,arguments)}function Y(){Y=(0,n.default)(v.default.mark(function e(r,a){var n,s,o,c,i,u,l,d,p,m;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,y.getCategories)(r.collectionId);case 2:n=t.sent;s=n.categoryTree;o=s[0];c=x.CategoriesTree.constructCategoriesTree(s,a.categoryIds,o,true);i=x.CategoriesTree.constructCategoriesTree(s,r.categoryIds,o,true);u=function e(t){return new Set(t.getAllCategories().filter(function(e){return e.selected}).map(function(e){return e.id}))};l=u(i);d=u(c);p=(0,f.default)(l).filter(function(e){return!d.has(e)});m=(0,f.default)(d).filter(function(e){return!l.has(e)});if(!(m.length>0)){t.next=15;break}t.next=15;return(0,y.removeProductFromCategories)(m,r.id);case 15:if(!(p.length>0)){t.next=18;break}t.next=18;return(0,y.assignCategory)(p,r.id);case 18:case"end":return t.stop()}},e)}));return Y.apply(this,arguments)}function z(e,t){return H.apply(this,arguments)}function H(){H=(0,n.default)(v.default.mark(function e(r,a){return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",b.default.put("/api/commerce/products/".concat(r,"/update-seo-image-id"),{seoImageId:a}));case 1:case"end":return t.stop()}},e)}));return H.apply(this,arguments)}function K(e,t){return Z.apply(this,arguments)}function Z(){Z=(0,n.default)(v.default.mark(function e(r,a){var n,s;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.post("/api/commerce/products/".concat(r,"/subscription-plan"),(0,h.buildCreateProductSubscriptionPlanRequest)(a));case 2:n=t.sent;s=n.data;return t.abrupt("return",s);case 5:case"end":return t.stop()}},e)}));return Z.apply(this,arguments)}function X(e,t,r,a){return J.apply(this,arguments)}function J(){J=(0,n.default)(v.default.mark(function e(r,a,n,s){var o,c;var i,u,l,d;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.put("/api/commerce/products/".concat(r.id),(0,h.buildEditProductRequest)(r,a,n));case 2:i=t.sent;u=i.data;if(!(400===i.status)){t.next=6;break}throw new Error("Cannot save product");case 6:if(!((null===(o=r.seoData)||void 0===o?void 0:o.seoImageId)!==(null===(c=a.seoData)||void 0===c?void 0:c.seoImageId))){t.next=9;break}t.next=9;return z(r.id,(null===(l=r.seoData)||void 0===l?void 0:l.seoImageId)||null);case 9:if(!g.legacyV6Flags.isFeatureEnabled(p.default.NESTED_CATEGORIES)){t.next=12;break}t.next=12;return W(r,a);case 12:if(!((0,m.isSubscribable)(r)&&r.subscriptionPlan&&r.name!==a.name)){t.next=15;break}t.next=15;return K(r.id,r.subscriptionPlan);case 15:t.next=17;return N(r.id,s.currentTaxCategory,s.originalTaxCategory);case 17:d=j(u);t.next=20;return U(d,L(r,a));case 20:return t.abrupt("return",d);case 21:case"end":return t.stop()}},e)}));return J.apply(this,arguments)}function Q(){return $.apply(this,arguments)}function $(){$=(0,n.default)(v.default.mark(function e(){var r,a;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.get("/api/commerce/inventory/content-collections");case 2:r=t.sent;a=r.data.results;return t.abrupt("return",a);case 5:case"end":return t.stop()}},e)}));return $.apply(this,arguments)}function ee(e,t,r){var a=new FormData;t&&a.append("index",t.toString());r&&a.append("replaceItemId",r);a.append("process","true");a.append("contentType",e.type);a.append("fileName",e.name);a.append("fileSize",e.size.toString());a.append("Filedata",e);return a}function te(e,t){var r={id:e.id,urls:{https:URL.createObjectURL(t)},focalPoint:{x:e.mediaFocalPoint.x,y:e.mediaFocalPoint.y},mediaProcessingState:s.default.QUEUED};return r}function re(e,t,r,a){return ae.apply(this,arguments)}function ae(){ae=(0,n.default)(v.default.mark(function e(r,a,n,s){var o,c,i,u,l,d,p,m,f;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:o={onUploadProgress:s,headers:{"Content-Type":"multipart/form-data"}};t.prev=1;t.next=4;return b.default.post("/api/commerce/products/".concat(r,"/images"),ee(a,n),o);case 4:u=t.sent;l=u.data;c=l.contentItem;i=l.processingJob;t.next=14;break;case 10:t.prev=10;t.t0=t["catch"](1);m=(null===(d=t.t0.response)||void 0===d?void 0:null===(p=d.data)||void 0===p?void 0:p.errorType)||"ERROR";return t.abrupt("return",{error:{errorType:m}});case 14:f=te(c,a);return t.abrupt("return",{previewImage:f,processingJob:i});case 16:case"end":return t.stop()}},e,null,[[1,10]])}));return ae.apply(this,arguments)}function ne(e,t,r){return se.apply(this,arguments)}function se(){se=(0,n.default)(v.default.mark(function e(r,a,n){var s,o,c,i,u,l;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s={onUploadProgress:n,headers:{"Content-Type":"multipart/form-data"}};t.next=3;return b.default.post("/api/commondata/SaveMedia",ee(a,void 0,r),s);case 3:o=t.sent;c=o.data;i=c.media;u=c.job;l=te(i[0],a);return t.abrupt("return",{previewImage:l,processingJob:u});case 9:case"end":return t.stop()}},e)}));return se.apply(this,arguments)}function oe(e,t){return ce.apply(this,arguments)}function ce(){ce=(0,n.default)(v.default.mark(function e(r,a){var n,s;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.get("/api/content/product-pages/".concat(a,"/products/").concat(r));case 2:n=t.sent;s=n.data.digitalGoods;return t.abrupt("return",s);case 5:case"end":return t.stop()}},e)}));return ce.apply(this,arguments)}function ie(e,t,r){return ue.apply(this,arguments)}function ue(){ue=(0,n.default)(v.default.mark(function e(r,a,n){var s,o,c,i;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s={onUploadProgress:n,headers:{"Content-Type":"multipart/form-data"}};o=new FormData;o.append("recordType",u.default.DIGITALGOOD.toString());o.append("contentType",a.type);o.append("fileName",a.name);o.append("fileSize",a.size.toString());o.append("Filedata",a);t.next=9;return b.default.post("/api/commerce/products/".concat(r,"/digital-good"),o,s);case 9:c=t.sent;i=c.data.media;return t.abrupt("return",{media:i});case 12:case"end":return t.stop()}},e)}));return ue.apply(this,arguments)}function le(e,t){return de.apply(this,arguments)}function de(){de=(0,n.default)(v.default.mark(function e(r,a){var n,s;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.delete("/api/commerce/products/".concat(r,"/images/").concat(a));case 2:n=t.sent;s=n.data;return t.abrupt("return",s);case 5:case"end":return t.stop()}},e)}));return de.apply(this,arguments)}function pe(e){return me.apply(this,arguments)}function me(){me=(0,n.default)(v.default.mark(function e(r){var a,n;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.post("/api/content/copy/item?sourceId=".concat(r,"&copyWorkflowState=4"));case 2:a=t.sent;n=a.data;return t.abrupt("return",n);case 5:case"end":return t.stop()}},e)}));return me.apply(this,arguments)}function fe(e){return ve.apply(this,arguments)}function ve(){ve=(0,n.default)(v.default.mark(function e(r){var a,n;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.delete("/api/commerce/products/".concat(r));case 2:a=t.sent;n=a.data;return t.abrupt("return",n);case 5:case"end":return t.stop()}},e)}));return ve.apply(this,arguments)}function be(e){return ge.apply(this,arguments)}function ge(){ge=(0,n.default)(v.default.mark(function e(r){var a,n;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.delete("/api/commerce/products/".concat(r,"/subscription-plan"));case 2:a=t.sent;n=a.data;return t.abrupt("return",n);case 5:case"end":return t.stop()}},e)}));return ge.apply(this,arguments)}function Ce(e){return he.apply(this,arguments)}function he(){he=(0,n.default)(v.default.mark(function e(r){var a,n,s;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a={headers:{"Content-Type":"application/x-www-form-urlencoded"}};t.next=3;return b.default.post("/api/commondata/ClearChildGroup",o.default.stringify({childType:"digitalGoods",itemId:r}),a);case 3:n=t.sent;s=n.data.success;return t.abrupt("return",s);case 6:case"end":return t.stop()}},e)}));return he.apply(this,arguments)}function ye(e){return Pe.apply(this,arguments)}function Pe(){Pe=(0,n.default)(v.default.mark(function e(r){var a,n;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,P.getProductItemImage)(r);case 2:a=t.sent;n=a.assetUrl;return t.abrupt("return",{assetUrl:n});case 5:case"end":return t.stop()}},e)}));return Pe.apply(this,arguments)}function xe(e,t,r){return _e.apply(this,arguments)}function _e(){_e=(0,n.default)(v.default.mark(function e(r,a,n){var s,o;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return b.default.put("/api/2/commerce/products/".concat(r,"/images/").concat(a),n);case 2:s=t.sent;o=s.data;return t.abrupt("return",o);case 5:case"end":return t.stop()}},e)}));return _e.apply(this,arguments)}function we(e,t,r,a){return Ee.apply(this,arguments)}function Ee(){Ee=(0,n.default)(v.default.mark(function e(r,a,n,s){return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",b.default.put("/api/commerce/products/".concat(r,"/images/").concat(a),{focalPoint:{x:n,y:s}}));case 1:case"end":return t.stop()}},e)}));return Ee.apply(this,arguments)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/SettingsApi.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getMerchandisingSettings=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var c=function(){var t=(0,s.default)(n.default.mark(function e(){var r,a;return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.get("/api/commerce/settings/merchandising");case 2:r=t.sent;a=r.data;return t.abrupt("return",a);case 5:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();t.getMerchandisingSettings=c},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/TagsApi.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getAutoCompleteTags=c;var n=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));function c(){return i.apply(this,arguments)}function i(){i=(0,s.default)(n.default.mark(function e(){var r,a;return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.get("/api/commondata/GetAutoCompleteTags");case 2:r=t.sent;a=r.data;return t.abrupt("return",a.map(function(e){return{text:e}}));case 5:case"end":return t.stop()}},e)}));return i.apply(this,arguments)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/productValidation.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.handleBackendErrors=t.getProductValidationErrors=void 0;var s=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/lodash/uniq.js"));var c=a(r("./common/temp/node_modules/lodash/get.js"));var i=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var u=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var l=r("./src/main/webapp/universal/src/shared/types/NormalizedProduct.ts");var d=a(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var p=a(r("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/CustomerAccounts/shared/api/CustomerAccountsSettingsApi.js"));var m=function e(t){if(t.productType!==u.default.GIFT_CARD)return false;var r=t.variants.map(function(e){return e.price.toFloat()});return new Set(r).size!==r.length};var f=function e(t){return t.productType!==u.default.DIGITAL&&t.variants.some(function(e){return!e.sku})};var v=function e(t){if(t.productType===u.default.DIGITAL)return false;var r=t.variants.map(function(e){return e.sku}).filter(function(e){return!!e});return r.length!==(0,o.default)(r).length};var b=function e(t){return t.productType===u.default.DIGITAL&&!t.hasDigitalGoods};var g=function e(t){if(!t.thumbnailImage)return false;return t.thumbnailImage.mediaProcessingState===d.default.QUEUED||t.thumbnailImage.mediaProcessingState===d.default.PROCESSING};var C=function(){var r=(0,n.default)(s.default.mark(function e(r){var a,n;return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(!(0,l.isSubscribable)(r)||!r.subscribable)){t.next=2;break}return t.abrupt("return",false);case 2:if(r.subscriptionPlan){t.next=4;break}return t.abrupt("return",true);case 4:t.next=6;return p.default.get();case 6:a=t.sent;n=a.data;return t.abrupt("return",!n.userAccountsEnabled);case 9:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();var h=function(){var r=(0,n.default)(s.default.mark(function e(r){return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!m(r)){t.next=2;break}return t.abrupt("return",(0,i.t)("Gift card amounts must be unique."));case 2:if(!f(r)){t.next=4;break}return t.abrupt("return",(0,i.t)("You may not have an empty SKU."));case 4:if(!v(r)){t.next=6;break}return t.abrupt("return",(0,i.t)("You may not have duplicate SKUs."));case 6:if(!b(r)){t.next=8;break}return t.abrupt("return",(0,i.t)("You must upload a file for this digital product."));case 8:if(!g(r)){t.next=10;break}return t.abrupt("return",(0,i.t)("You must wait for the thumbnail image to finish processing."));case 10:t.next=12;return C(r);case 12:if(!t.sent){t.next=14;break}return t.abrupt("return",(0,i.t)("Enable customer accounts and a subscription plan to save subscription products."));case 14:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();t.getProductValidationErrors=h;var y=function e(t){return!!(0,c.default)(t,"response.data.errors.urlId")};var P=function e(t){var r=(0,c.default)(t,"response.data.errorType");return"INVALID_URL_ID"===r};var x=function e(t){if(y(t))return(0,i.t)("This product URL is already in use, please choose another.");if(P(t))return(0,i.t)("Product must contain a URL path containing only alphanumerics and non-contiguous hyphens or slashes.")};t.handleBackendErrors=x},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformDigitalProduct.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var n=a(r("./common/temp/node_modules/uuid/v1.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var o=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var c=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformUtils.ts");function i(e){return{id:e.id,websiteId:e.websiteId,collectionId:e.collectionId,name:e.name,description:e.description,productType:s.default.DIGITAL,images:e.images,visibility:(0,c.transformVisibility)(e.visibility.state,e.visibility.visibleOn),variants:[{id:(0,n.default)(),sku:"",originalSku:"",price:o.default.fromJson(e.price),salePrice:o.default.fromJson(e.salePrice),onSale:e.onSale,attributes:{},stock:{unlimited:true,quantity:0}}],variantAttributeNames:[],tags:e.tags,categories:e.categories,categoryIds:e.categoryIds||[],url:e.url,digitalGood:e.digitalGood,hasDigitalGoods:e.hasDigitalGoods,thumbnailImage:e.thumbnailImage,seoData:e.seoData,additionalInfo:e.additionalInfo,useCustomAddButtonText:e.useCustomAddButtonText,customAddButtonText:e.customAddButtonText,featuredProduct:e.featuredProduct,socialPushFields:e.socialPushFields,addedOn:new Date(e.addedOn).getTime(),updatedOn:new Date(e.updatedOn).getTime(),relatedProductsConfiguration:e.relatedProductsConfiguration,urlId:e.urlId,productFormId:e.productFormId}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformGiftCardProduct.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.transformGiftCardProduct=p;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var o=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var c=a(r("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js"));var i=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformUtils.ts");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function d(e){return{id:e.id,sku:e.sku,originalSku:e.sku,mainImage:e.mainImage,price:o.default.fromJson(e.price),onSale:false,salePrice:o.default.fromJson({decimalValue:"0",currencyCode:c.default.getStoreCurrency()}),attributes:{},stock:{unlimited:true,quantity:0}}}function p(e){var t={id:e.id,websiteId:e.websiteId,collectionId:e.collectionId,name:e.name,description:e.description,images:e.images,visibility:(0,i.transformVisibility)(e.visibility.state,e.visibility.visibleOn),variants:e.variants.map(d),variantAttributeNames:e.variantAttributeNames,tags:e.tags,categories:e.categories,categoryIds:e.categoryIds||[],url:e.url,thumbnailImage:e.thumbnailImage,seoData:e.seoData,additionalInfo:e.additionalInfo,useCustomAddButtonText:e.useCustomAddButtonText,customAddButtonText:e.customAddButtonText,featuredProduct:e.featuredProduct,socialPushFields:e.socialPushFields,addedOn:new Date(e.addedOn).getTime(),updatedOn:new Date(e.updatedOn).getTime(),relatedProductsConfiguration:e.relatedProductsConfiguration,urlId:e.urlId,productFormId:e.productFormId};return l({},t,{productType:s.default.GIFT_CARD})}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformPhysicalProduct.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.transformPhysicalProduct=d;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var o=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var c=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformUtils.ts");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function l(e){return{id:e.id,sku:e.sku,originalSku:e.sku,mainImage:e.mainImage,price:o.default.fromJson(e.price),salePrice:o.default.fromJson(e.salePrice),onSale:e.onSale,stock:e.stock,attributes:e.attributes,shippingWeight:e.shippingWeight,shippingSize:{unit:e.shippingSize.unit,length:e.shippingSize.len,width:e.shippingSize.width,height:e.shippingSize.height}}}function d(e){var t={id:e.id,websiteId:e.websiteId,collectionId:e.collectionId,name:e.name,description:e.description,images:e.images,visibility:(0,c.transformVisibility)(e.visibility.state,e.visibility.visibleOn),variants:e.variants.map(l),variantAttributeNames:e.variantAttributeNames,tags:e.tags,categories:e.categories,categoryIds:e.categoryIds||[],url:e.url,thumbnailImage:e.thumbnailImage,seoData:e.seoData,additionalInfo:e.additionalInfo,useCustomAddButtonText:e.useCustomAddButtonText,customAddButtonText:e.customAddButtonText,featuredProduct:e.featuredProduct,socialPushFields:e.socialPushFields,addedOn:new Date(e.addedOn).getTime(),updatedOn:new Date(e.updatedOn).getTime(),relatedProductsConfiguration:e.relatedProductsConfiguration,urlId:e.urlId,productFormId:e.productFormId};if(e.subscribable)return u({},t,{productType:s.default.PHYSICAL,subscribable:true,subscriptionPlan:e.subscriptionPlan});return u({},t,{productType:s.default.PHYSICAL,subscribable:false,subscriptionPlan:null})}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformServiceProduct.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.transformServiceProduct=d;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var o=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var c=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformUtils.ts");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function l(e){return{id:e.id,sku:e.sku,originalSku:e.sku,mainImage:e.mainImage,price:o.default.fromJson(e.price),salePrice:o.default.fromJson(e.salePrice),onSale:e.onSale,stock:e.stock,attributes:e.attributes}}function d(e){var t={id:e.id,websiteId:e.websiteId,collectionId:e.collectionId,name:e.name,description:e.description,images:e.images,visibility:(0,c.transformVisibility)(e.visibility.state,e.visibility.visibleOn),variants:e.variants.map(l),variantAttributeNames:e.variantAttributeNames,tags:e.tags,categories:e.categories,categoryIds:e.categoryIds||[],url:e.url,thumbnailImage:e.thumbnailImage,seoData:e.seoData,additionalInfo:e.additionalInfo,useCustomAddButtonText:e.useCustomAddButtonText,customAddButtonText:e.customAddButtonText,featuredProduct:e.featuredProduct,socialPushFields:e.socialPushFields,addedOn:new Date(e.addedOn).getTime(),updatedOn:new Date(e.updatedOn).getTime(),relatedProductsConfiguration:e.relatedProductsConfiguration,urlId:e.urlId,productFormId:e.productFormId};if(e.subscribable)return u({},t,{productType:s.default.SERVICE,subscribable:true,subscriptionPlan:e.subscriptionPlan});return u({},t,{productType:s.default.SERVICE,subscribable:false,subscriptionPlan:null})}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/transformUtils.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.transformVisibility=h;t.buildCreateProductRequest=y;t.buildCreateProductSubscriptionPlanRequest=P;t.calculateVariantDifferences=j;t.buildEditProductRequest=A;var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var c=r("./src/main/webapp/universal/src/shared/types/Visibility.ts");var i=r("./src/main/webapp/universal/src/shared/types/NormalizedVariant.ts");var l=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var d=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/generateSku.ts"));var p=a(r("./common/temp/node_modules/uuid/v1.js"));var m=a(r("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js"));function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),true).forEach(function(e){(0,o.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var b=function e(){return l.default.fromJson({currencyCode:m.default.getStoreCurrency(),decimalValue:"0"})};var g=function e(){return[l.default.fromJson({currencyCode:m.default.getStoreCurrency(),decimalValue:"25.00"}),l.default.fromJson({currencyCode:m.default.getStoreCurrency(),decimalValue:"50.00"}),l.default.fromJson({currencyCode:m.default.getStoreCurrency(),decimalValue:"75.00"}),l.default.fromJson({currencyCode:m.default.getStoreCurrency(),decimalValue:"100.00"})]};function C(e){return e.map(function(e){return{id:(0,p.default)(),sku:(0,d.default)(),price:e,salePrice:l.default.fromJson({currencyCode:m.default.getStoreCurrency(),decimalValue:"0.00"}),onSale:false,quantityInStock:1,unlimited:false,optionValues:[]}})}function h(e,t){if(!(0,c.isVisibility)(e))throw new Error("Unrecognized visibility state: ".concat(e));return{state:e,visibleOn:t?new Date(t):void 0}}function y(e,t){var r={productType:e,name:"",description:"",displayIndex:t,visibility:{state:c.VisibilityState.HIDDEN,visibleOn:new Date},variantOptionOrdering:[],variantOrderBySkus:[],additionalInfo:{layout:{columns:12,rows:[]},raw:false,updatedOn:0},useCustomAddButtonText:false,featuredProduct:false,shareStates:[]};switch(e){case u.default.PHYSICAL:return v({},r,{createdVariants:[{sku:(0,d.default)(),price:b(),salePrice:b(),onSale:false,quantityInStock:1,unlimited:false,optionValues:[]}]});case u.default.SERVICE:return v({},r,{createdVariants:[{sku:(0,d.default)(),price:b(),salePrice:b(),onSale:false,quantityInStock:1,unlimited:false,optionValues:[]}]});case u.default.GIFT_CARD:return v({},r,{createdVariants:C(g())});case u.default.DIGITAL:return v({},r,{price:b(),salePrice:b(),onSale:false});default:throw new Error("Cannot create products of type: ".concat(e))}}function P(e){var t=e.numBillingCycles,r=e.billingPeriod;return{billingPeriod:r,numBillingCycles:t}}function x(e){return Object.entries(e).map(function(e){var t=(0,n.default)(e,2),r=t[0],a=t[1];return{optionName:r,value:a}})}function _(e){return(0,s.default)(e).map(function(e){return v({},e,{unlimited:e.stock.unlimited,quantityInStock:e.stock.quantity,optionValues:x(e.attributes)})})}function w(e,n){return(0,s.default)(e).map(function(r){var e=n.find(function(e){var t=e.id;return t===r.id});if(!e)throw new Error("Existing variant not found for variant with id: ".concat(r.id));var t={sku:r.sku.trim(),originalSku:e.sku.trim(),price:r.price,salePrice:r.salePrice,unlimited:r.stock.unlimited,onSale:r.onSale,optionValues:x(r.attributes)};if(r.stock.quantity<0)throw new Error("Variant quantity can not be less than zero");var a=r.stock.quantity-(e.stock.quantity||0);r.stock.unlimited||(t=v({quantityChange:a},t));if((0,i.isPhysicalVariant)(r)){t.width=r.shippingSize.width;t.height=r.shippingSize.height;t.length=r.shippingSize.length;t.weight=r.shippingWeight.value}return t})}function E(e){return(0,s.default)(e).map(function(e){var t=e.sku;return{sku:t}})}function j(e,t){var r=new Set(e.map(function(e){var t=e.id;return t}));var a=new Set(t.map(function(e){var t=e.id;return t}));var n=new Set(e.filter(function(e){return!a.has(e.id)}));var s=new Set(e.filter(function(e){return a.has(e.id)}));var o=new Set(t.filter(function(e){return!r.has(e.id)}));return{createdVariants:_(n),deletedVariants:E(o),updatedVariants:w(s,t)}}function A(e,t,r){var a=j(e.variants,t.variants),n=a.createdVariants,s=a.updatedVariants,o=a.deletedVariants;var c=r&&e.url.productPath===t.url.productPath;var i=c?"":e.url.productPath;switch(e.productType){case u.default.PHYSICAL:case u.default.SERVICE:case u.default.GIFT_CARD:return{createdVariants:n,updatedVariants:s,deletedVariants:o,name:e.name,description:e.description,visibility:e.visibility,tags:e.tags,categories:e.categories,newImageOrder:e.images.map(function(e){return e.id}),variantOptionOrdering:e.variantAttributeNames,variantOrderBySkus:e.variants.map(function(e){var t=e.sku;return t}),seoData:e.seoData,additionalInfo:e.additionalInfo,useCustomAddButtonText:e.useCustomAddButtonText,customAddButtonText:e.customAddButtonText,featuredProduct:e.featuredProduct,shareStates:e.socialPushFields.shareStates,relatedProductsConfiguration:e.relatedProductsConfiguration,urlId:i,productFormId:e.productFormId,regenerateUrlId:c};case u.default.DIGITAL:return{name:e.name,description:e.description,visibility:e.visibility,tags:e.tags,categories:e.categories,newImageOrder:e.images.map(function(e){return e.id}),variantOptionOrdering:[],variantOrderBySkus:[],price:e.variants[0].price,salePrice:e.variants[0].salePrice,onSale:e.variants[0].onSale,seoData:e.seoData,additionalInfo:e.additionalInfo,useCustomAddButtonText:e.useCustomAddButtonText,customAddButtonText:e.customAddButtonText,featuredProduct:e.featuredProduct,shareStates:e.socialPushFields.shareStates,relatedProductsConfiguration:e.relatedProductsConfiguration,urlId:i,productFormId:e.productFormId,regenerateUrlId:c}}}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/AnchorLinks/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var b=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var g=a(r("./common/temp/node_modules/react/index.js"));var C=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var n=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var i=a(r("./common/temp/node_modules/@sqs/utils/scroll/scrollTo.js"));var h=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/anchorLinks.ts"));var y=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/useElementScroll.ts"));function u(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var a=0;var n=function e(){};return{s:n,n:function e(){if(a>=t.length)return{done:true};return{done:false,value:t[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,c;return{s:function e(){r=t[Symbol.iterator]()},n:function e(){var t=r.next();s=t.done;return t},e:function e(t){o=true;c=t},f:function e(){try{s||null==r.return||r.return()}finally{if(o)throw c}}}}function l(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function P(e){return document.querySelector('[data-anchor="'.concat(e,'"]'))}function x(){return P(h.default.SCROLL_REF)}function _(e){var t=e.text,r=e.link,a=e.isActive,n=e.offset,s=e.onScrollStart,o=e.onScrollEnd;return g.default.createElement(C.Touchable,{as:"span",interaction:function e(t){return g.default.createElement(C.Touchable.Underline,(0,c.default)({},t,{isActive:a}))},onClick:function e(){s();var t=P(r);if(!t)return;(0,i.default)(x(),t.offsetTop-n,{easing:"easeInOutSine",minDuration:500});setTimeout(o,500)}},g.default.createElement(C.Text.Subtitle,{m:0,mb:2,sx:{"&:hover":{color:"gray.100"}},color:a?"gray.100":"gray.300"},t))}var w=[{anchor:h.default.DETAILS,text:(0,n.t)("Details",null,{project:"commerce-product-composer"})},{anchor:h.default.INVENTORY,text:(0,n.t)("Inventory")},{anchor:h.default.ORGANIZATION,text:(0,n.t)("Organization")},{anchor:h.default.MARKETING,text:(0,n.t)("Marketing",null,{project:"commerce-product-composer"})},{anchor:h.default.CUSTOMIZE,text:(0,n.t)("Customize")}];function E(e,t,r){if(!e.length)throw new Error("no anchor links found");var a=e[0];var n=u(e),s;try{for(n.s();!(s=n.n()).done;){var o=s.value;if(!(o.offsetTop-r<=t))break;a=o}}catch(e){n.e(e)}finally{n.f()}return a}function o(){var e=g.default.useState(h.default.DETAILS),t=(0,b.default)(e,2),a=t[0],n=t[1];var r=g.default.useState(0),s=(0,b.default)(r,2),o=s[0],c=s[1];var i=g.default.useState(false),u=(0,b.default)(i,2),l=u[0],d=u[1];var p=(0,y.default)(),m=p.node,f=p.setNode,v=p.scrollY;g.default.useEffect(function(){c(P(h.default.DETAILS).offsetTop);f(x())},[f]);g.default.useEffect(function(){if(m&&!l){var e=Array.from((null===m||void 0===m?void 0:m.querySelectorAll("[data-anchor]"))||[]);var t=E(e,v,o);var r=t.getAttribute("data-anchor");null!==r&&n(r)}},[m,v]);return g.default.createElement(C.Flex,{flexDirection:"column",width:"100%"},w.map(function(e){var t=e.anchor,r=e.text;return g.default.createElement(_,{key:t,link:t,text:r,offset:o,isActive:a===t,onScrollStart:function e(){d(true);n(t)},onScrollEnd:function e(){return d(false)}})}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FeedbackForm/FeedbackForm.less":function(e,t,r){e.exports={toolbar:"_1D4F7mPU5",customFeedback:"_3wdQJwBID",emojiButton:"_1JmG2S468",active:"_17uYfBMeS",emoji:"_1qxufs5a4"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FeedbackForm/FeedbackForm.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var N=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var V=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var q=a(r("./common/temp/node_modules/react/index.js"));var B=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var L=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var U=a(r("./common/temp/node_modules/@sqs/core-components/fields/DropdownSelectField.js"));var G=a(r("./common/temp/node_modules/@sqs/core-components/fields/TextareaField.js"));var W=a(r("./common/temp/node_modules/@sqs/core-components/primitives/ErrorText.js"));var Y=a(r("./common/temp/node_modules/classnames/index.js"));var z=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var H=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var K=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.tsx"));var Z=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var X=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx");var J=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx");var Q=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var $=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var ee=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var te=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FeedbackForm/FeedbackForm.less"));var re=[{symbol:"",label:(0,z.t)("Very unsatisfactory"),value:1},{symbol:"",label:(0,z.t)("Unsatisfactory"),value:2},{symbol:"",label:(0,z.t)("Neutral"),value:3},{symbol:"",label:(0,z.t)("Satisfactory"),value:4},{symbol:"",label:(0,z.t)("Very satisfactory"),value:5}];function n(e){var r=e.onRequestClose,a=e.shouldToggleBeta,n=e.productSection,t=e.hideReasonDropdown;var s=q.default.useState(""),o=(0,V.default)(s,2),c=o[0],i=o[1];var u=q.default.useState(""),l=(0,V.default)(u,2),d=l[0],p=l[1];var m=q.default.useState(NaN),f=(0,V.default)(m,2),v=f[0],b=f[1];var g=q.default.useState([]),C=(0,V.default)(g,2),h=C[0],y=C[1];var P=q.default.useState([]),x=(0,V.default)(P,2),_=x[0],w=x[1];var E=q.default.useState([]),j=(0,V.default)(E,2),A=j[0],S=j[1];var O=(0,J.useViewStateContext)(),I=O.showLoadingMessage;var T=(0,X.useLifeCycleHooksContext)(),k=T.lifeCycleHooks;var F=(0,Z.useProductContext)(),D=F.product;if(!D)return null;var R=function e(){if(isNaN(v)){S([{message:(0,z.t)("Please select a rating.")}]);return true}S([]);if(""===c&&!t){y([{message:(0,z.t)("Please select a reason.")}]);return true}y([]);if("other"===c&&""===d.trim()){w([{message:(0,z.t)("Please specify the reason.")}]);return true}w([]);return false};var M=function e(){I(null);var t=(0,ee.default)(D.productType);t&&(0,Q.trackTogglePCBeta)(D.name,t,$.ProductEditor.YUI_EDITOR,D.id);k.onBetaOptOutButtonClick()};return q.default.createElement(B.Box,{pt:3,px:2,pb:10,width:"400px"},q.default.createElement(K.default,{className:te.default.toolbar},q.default.createElement(K.default.Left,null,q.default.createElement(B.Button.Tertiary,{onClick:function e(){r();a&&M()},animationDirection:"none","data-testid":"pc-feedback-cancel-button"},a?q.default.createElement(H.T,{project:"commerce-product-composer"},"Skip"):q.default.createElement(H.T,{project:"commerce-product-composer"},"Cancel"))),q.default.createElement(K.default.Center,null),q.default.createElement(K.default.Right,null,q.default.createElement(B.Button.Tertiary,{onClick:function e(){if(R())return;var t=(0,ee.default)(D.productType);t&&(0,Q.trackSendPCFeedback)({productName:D.name,productType:t,productEditor:$.ProductEditor.PRODUCT_COMPOSER_V1,productId:D.id,dropdownValue:c||"none",customResponse:d,numericValue:v,productSection:n});r();a&&M()},animationDirection:"none"},q.default.createElement(H.T,{project:"commerce-product-composer"},"Submit")))),q.default.createElement(B.Text.Title,{mt:6,px:4},q.default.createElement(H.T,{project:"commerce-product-composer"},"Give Feedback")),q.default.createElement(B.Text.Body,{px:4},q.default.createElement(H.T,{project:"commerce-product-composer"},"Tell us about your experience with the new editor and how we can make it better. Provide as much feedback as you like.")),q.default.createElement(B.Flex,{display:"flex",flexDirection:"column",pl:L.space[4],pr:L.space[4],mb:L.space[3]},q.default.createElement(B.Box,{display:"flex",width:"100%",sx:{justifyContent:"space-between"}},re.map(function(e,t){var r=e.label,a=e.symbol,n=e.value;return q.default.createElement("button",{title:r,key:t,onClick:function e(){return b(n)},className:(0,Y.default)(te.default.emojiButton,(0,N.default)({},te.default.active,n===v))},q.default.createElement("span",{className:te.default.emoji,"aria-label":r},a))})),q.default.createElement(W.default,{errors:A[0]})),!t&&q.default.createElement(U.default,{placeholder:(0,z.t)("Select a reason"),options:[{label:(0,z.t)("Missing Feature"),value:"missing-feature"},{label:(0,z.t)("Other"),value:"other"}],value:c,onChange:i,errors:h}),q.default.createElement(G.default,{label:(0,z.t)("Feedback"),placeholder:(0,z.t)("Add feedback..."),value:d,onChange:p,errors:_}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FeedbackForm/useFeedbackForm.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.FeedbackFormProvider=o;t.useFeedbackForm=m;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var i=a(r("./common/temp/node_modules/react/index.js"));var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.tsx"));var l=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FeedbackForm/FeedbackForm.tsx"));function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var p=i.default.createContext({showFeedbackForm:function e(){return Promise.resolve(true)},closeFeedbackForm:function e(){}});function o(e){var t=e.children;var r=i.default.useState(null),a=(0,c.default)(r,2),n=a[0],s=a[1];var o=n&&i.default.createElement(u.default,{isOpen:true,onRequestClose:n.onRequestClose},i.default.createElement(l.default,n));return i.default.createElement(i.default.Fragment,null,o,i.default.createElement(p.Provider,{value:{closeFeedbackForm:function e(){s(null)},showFeedbackForm:function e(r){return new Promise(function(t){s(d({},r,{onRequestClose:function e(){t(true);r.onRequestClose()}}))})}}},t))}function m(){return i.default.useContext(p)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/Categories.less":function(e,t,r){e.exports={categoryCell:"_3ixMG-OKC"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/Categories.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var ue=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var le=n(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var de=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var pe=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var me=a(r("./common/temp/node_modules/react/index.js"));var fe=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var ve=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var be=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var ge=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx");var Ce=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/CategoriesApi.ts");var he=n(r("./src/main/webapp/universal/src/apps/Commerce/shared/utils/useFetch.ts"));var ye=n(r("./common/temp/node_modules/@sqs/core-components/components/SearchableList.js"));var Pe=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var xe=n(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var _e=n(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var we=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var Ee=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/CategoryRow.tsx"));var je=n(r("./common/temp/node_modules/@sqs/core-components/fields/StringField.js"));var Ae=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var Se=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var Oe=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var Ie=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/Categories.less"));var Te=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/NestedCategoriesWrapper.tsx"));var ke=n(r("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js"));function s(e){var t=e.categories;var r=(0,be.useProductContext)(),n=r.product,a=r.patchProduct;var s=(0,me.useState)(false),o=(0,pe.default)(s,2),c=o[0],i=o[1];var u=(0,me.useState)(""),l=(0,pe.default)(u,2),d=l[0],p=l[1];var m=(0,me.useState)([]),f=(0,pe.default)(m,2),v=f[0],b=f[1];var g=(0,me.useState)(t),C=(0,pe.default)(g,2),h=C[0],y=C[1];var P=(0,me.useState)(null===n||void 0===n?void 0:n.categoryIds),x=(0,pe.default)(P,2),_=x[0],w=x[1];var E=(0,he.default)(Ce.getAllProductsCategories),j=E.data;var A=(0,me.useState)([]),S=(0,pe.default)(A,2),O=S[0],I=S[1];var T=(0,me.useState)(""),k=(0,pe.default)(T,2),F=k[0],D=k[1];var R=(0,me.useState)(false),M=(0,pe.default)(R,2),N=M[0],V=M[1];var q=(0,me.useState)(false),B=(0,pe.default)(q,2),L=B[0],U=B[1];var G=(0,ge.useViewStateContext)(),W=G.showToastMessage;function Y(e){return e.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})}(0,me.useEffect)(function(){if(n&&j){var e=Y(j);I(e);b(e)}},[j]);function z(){p("");i(false)}function H(){return we.legacyV6Flags.isFeatureEnabled(_e.default.NESTED_CATEGORIES)}function K(e){return e.trim()}function Z(e,t){return e.includes(t)}(0,me.useEffect)(function(){if(d&&O){i(true);var e=O.filter(function(e){return e.toLowerCase().includes(d.toLowerCase())});b(Y(e))}else z()},[d,O]);(0,me.useEffect)(function(){a({categories:h})},[h]);(0,me.useEffect)(function(){a({categoryIds:_})},[_]);function X(e){p(e)}function J(e){return Q.apply(this,arguments)}function Q(){Q=(0,de.default)(ue.default.mark(function e(r){var a;return ue.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.target.value;if(!(!K(a)||Z(h,a))){t.next=4;break}z();return t.abrupt("return");case 4:y([].concat((0,le.default)(h),[a]));z();case 6:case"end":return t.stop()}},e)}));return Q.apply(this,arguments)}function $(){if(0===d.length&&O){b(O);i(true)}}function ee(e,t){return te.apply(this,arguments)}function te(){te=(0,de.default)(ue.default.mark(function e(r,a){return ue.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(n&&r!==a)){t.next=10;break}t.next=3;return(0,Ce.createCategory)(n.collectionId,a);case 3:(0,Ae.trackCreateNewCategory)(a,Se.ProductEditor.PRODUCT_COMPOSER_V1);t.next=6;return(0,Ce.mergeCategories)(n.collectionId,[r,a],a);case 6:O&&!O.includes(a)&&I(Y([].concat((0,le.default)(O),[a])));t.next=9;return(0,Ce.createCategory)(n.collectionId,a);case 9:y(h.map(function(e){return e===r?a:e}));case 10:case"end":return t.stop()}},e)}));return te.apply(this,arguments)}function re(t){y(h.filter(function(e){return e!==t}));O&&!O.includes(t)&&I([].concat((0,le.default)(O),[t]))}function ae(e){return me.default.createElement(xe.default,{innerContainerClassName:Ie.default.categoryCell,label:e,size:"large",underlined:false})}function ne(e){return e.map(function(e){return me.default.createElement(Ee.default,{allCategories:O,category:e,onRename:ee,onRemove:re})})}function se(e){"Enter"===e.key&&J(e)}function oe(e){return ce.apply(this,arguments)}function ce(){ce=(0,de.default)(ue.default.mark(function e(r){var a;return ue.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=K(r);if(!(O&&a)){t.next=16;break}if(Z(O,a)){t.next=14;break}y([].concat((0,le.default)(h),[a]));D("");V(false);if(!n){t.next=10;break}t.next=9;return(0,Ce.createCategory)(n.collectionId,a);case 9:(0,Ae.trackCreateNewCategory)(a,Se.ProductEditor.PRODUCT_COMPOSER_V1);case 10:W((0,fe.t)("Category {newCategoryToAdd} created",{newCategoryToAdd:a}));I(Y([].concat((0,le.default)(O),[a])));t.next=16;break;case 14:V(false);U(true);case 16:case"end":return t.stop()}},e)}));return ce.apply(this,arguments)}var ie=H();return me.default.createElement("div",{className:Oe.default.container},me.default.createElement(Pe.Text.Label,null,me.default.createElement(ve.T,{project:"commerce-product-composer"},"Categories")),ie?me.default.createElement("div",{className:Oe.default.fields},me.default.createElement(Te.default,{onTreeRefresh:function e(t){ke.default.updateNestedCategories(n.collectionId,t)},productId:n.id,collectionId:n.collectionId,categoryIds:n.categoryIds,toggleCategory:function e(t){w(t)}})):me.default.createElement("div",{className:Oe.default.fields},me.default.createElement(ye.default,{className:Ie.default,hideClearIcon:true,isOpen:c,items:v,onChange:X,onKeyDown:se,onSelect:J,onFocus:$,onBlur:function e(){return i(false)},placeholder:(0,fe.t)("Search existing categories"),searchString:d},function(e){return ae(e)}),ne(h),me.default.createElement(je.default,{placeholder:(0,fe.t)("Create new..."),onChange:function e(t){V(!!t);D(t);U(false)},value:F,maxLength:50,onKeyDown:function e(t){"Enter"===t.key&&oe(F)},secondaryAction:{component:N&&me.default.createElement(Pe.Button.Secondary,{onClick:function e(){return oe(F)}},me.default.createElement(ve.T,{project:"commerce-product-composer"},"Add"))},errors:L&&Z(h,F)?{message:(0,fe.t)("This category already exists.")}:L?{message:(0,fe.t)("This category already exists. You can add it using the dropdown above.")}:null})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/CategoryRow.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var f=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var v=a(r("./common/temp/node_modules/react/index.js"));var b=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var g=n(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var C=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/RenameCategoryModal.tsx"));var h=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionListWrapper.tsx"));function s(e){var t=e.category,r=e.onRename,a=e.onRemove,n=e.allCategories;var s=(0,v.useState)(false),o=(0,f.default)(s,2),c=o[0],i=o[1];var u=(0,v.useState)(t),l=(0,f.default)(u,2),d=l[0],p=l[1];function m(e){p(e);i(false)}(0,v.useEffect)(function(){r(t,d)},[d]);return v.default.createElement(v.default.Fragment,null,v.default.createElement(g.default,{label:t,accessory:function e(){return v.default.createElement(h.default,null,v.default.createElement(h.default.Button,{onClick:function e(){i(true)}},v.default.createElement(b.T,{project:"commerce-product-composer"},"Rename")),v.default.createElement(h.default.ButtonDanger,{onClick:function e(){a(t)}},v.default.createElement(b.T,{project:"commerce-product-composer"},"Remove")))}}),c&&v.default.createElement(C.default,{allCategories:n,category:t,onSave:m,onCancel:function e(){return i(false)}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/NestedCategoriesWrapper.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var A=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var S=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var O=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var I=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var T=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var k=n(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var F=n(r("./common/temp/node_modules/@sqs/core-components/modals/Modal.js"));var D=a(r("./common/temp/node_modules/react/index.js"));var R=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/styles.less"));var M=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesAPI.ts");var N=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesTree.ts");var V=n(r("./common/temp/node_modules/@sqs/core-components/components/TagManager.js"));var q=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var B=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx");var L=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var U=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var G=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var W=n(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var Y=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/index.tsx"));var z=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmExitProduct.ts"));function s(c){var e=(0,D.useState)(false),t=(0,O.default)(e,2),r=t[0],a=t[1];var n=(0,D.useState)(""),s=(0,O.default)(n,2),o=s[0],i=s[1];var u=(0,D.useState)([]),l=(0,O.default)(u,2),d=l[0],p=l[1];var m=(0,q.useProductContext)(),f=m.product,v=m.composerOpenedAt;var b=(0,B.useLifeCycleHooksContext)(),g=b.lifeCycleHooks;var C=(0,z.default)(),h=C.confirmExit;var y=function(){var t=(0,S.default)(A.default.mark(function e(){var r,a,n,s,o;return A.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=c.collectionId;t.next=3;return(0,M.getCategories)(r);case 3:a=t.sent;n=a.categoryTree;s=N.CategoriesTree.constructCategoriesTree(n,d.length>0?d.map(function(e){return e.id}):c.categoryIds,a.categoryTree[0],true);o=s.getAllCategories().filter(function(e){return e.selected}).map(function(e){return{id:e.id,name:e.displayName}});i(a.categoryTree[0].id);p(o);case 9:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();(0,D.useEffect)(function(){y()},[]);var P=function e(){a(!r)};var x=function e(t){p(t)};var _=function(){var r=(0,S.default)(A.default.mark(function e(r){return A.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:null===r||void 0===r?void 0:r.preventDefault();null===r||void 0===r?void 0:r.stopPropagation();a(false);case 3:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();function w(){var e=d.filter(function(e){return e.id!==o});var r=e.length;var a=10;if(r<=a)return e.map(function(e){return{text:e.name}});return e.slice(0,a+1).map(function(e,t){if(t===a)return{text:(0,I.t)("+ {count} more",{count:r-a})};return{text:e.name}})}function E(){return!c.productId}var j=w();return D.default.createElement("div",{onClick:function e(t){t.preventDefault();t.stopPropagation();P()},className:R.default.pointer,"data-test":"categories-add-btn"},j.length>0?D.default.createElement(V.default,{value:j,onChange:function e(){},showFilter:false,enableEdit:false,enableDelete:false,enableCreate:true,renderTagInput:function e(){return D.default.createElement(T.Text.Action,{sx:{pl:2}},D.default.createElement(L.T,{project:"commerce-product-composer"},"Add"))}}):D.default.createElement(k.default,null,D.default.createElement(T.Button.Tertiary,{animationDirection:"none",onClick:function e(){}},D.default.createElement(L.T,{project:"commerce-product-composer"},"Add"))),r&&D.default.createElement(F.default,{isOpen:true,customClassNames:R.default.popOverZIndex,onRequestClose:_},D.default.createElement(Y.default,{model:{collectionId:c.collectionId,websiteId:window.Static.SQUARESPACE_CONTEXT.website.id,productId:c.productId,categoryIds:c.categoryIds,productTitle:f.name,productType:(0,W.default)(f.productType)},closeModal:_,callerName:"product-composer",isEmptyState:false,toggleCategory:c.toggleCategory,stylesOverride:R.default,isLoading:!!E(),setCategories:x,onTreeRefresh:c.onTreeRefresh,requestCloseOriginatingModal:function(){var t=(0,S.default)(A.default.mark(function e(r){var a,n;return A.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(f){t.next=2;break}return t.abrupt("return");case 2:t.next=4;return h();case 4:a=t.sent;if(a){t.next=7;break}return t.abrupt("return");case 7:g.onCancelButtonClick();n=(0,W.default)(f.productType);n&&(0,U.trackCloseWithoutSavingProductEditor)({productId:f.id,productType:n,productName:f.name,productEditor:G.ProductEditor.PRODUCT_COMPOSER_V1,timeElapsed:Date.now()-v});r();case 11:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/RenameCategoryModal.less":function(e,t,r){e.exports={editModal:"_3ulF3YdzG",header:"_1KJlGglXR",headerTitle:"_3Hop6AYyW"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/RenameCategoryModal.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var f=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var v=a(r("./common/temp/node_modules/react/index.js"));var b=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var g=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var C=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var h=n(r("./common/temp/node_modules/@sqs/core-components/fields/StringField.js"));var y=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var P=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.tsx"));var x=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/RenameCategoryModal.less"));var _="400px";var w="232px";function s(e){var t=e.category,r=e.onSave,a=e.onCancel,n=e.allCategories;var s=(0,v.useState)(t),o=(0,f.default)(s,2),c=o[0],i=o[1];var u=(0,v.useState)(""),l=(0,f.default)(u,2),d=l[0],p=l[1];var m=function e(t){t?n.includes(t.trim())?p("A category with this name already exists."):r(t):p("You must enter a valid category name.")};return v.default.createElement(C.Modal.Transition,null,v.default.createElement(C.Modal,{lockFocus:false},v.default.createElement(C.Modal.Overlay,null),v.default.createElement(C.Modal.Position,{position:"center"},v.default.createElement(C.Modal.Dialog,null,v.default.createElement(y.Box,{width:_,height:w},v.default.createElement("div",{className:x.default.editModal},v.default.createElement(P.default,{className:x.default.header},v.default.createElement(P.default.Left,null,v.default.createElement(y.Button.Tertiary,{animationDirection:"none",onClick:a},(0,g.t)("Cancel"))),v.default.createElement(P.default.Center,null,v.default.createElement("div",{className:x.default.headerTitle},(0,g.t)("Rename Category"))),v.default.createElement(P.default.Right,null,v.default.createElement(y.Button.Tertiary,{animationDirection:"none",onClick:function e(){return m(c.trim())}},(0,g.t)("Save")))),v.default.createElement(y.Text.Label,{sx:{marginLeft:4}},v.default.createElement(b.T,{project:"commerce-product-composer"},"Name")),v.default.createElement(h.default,{value:c,onChange:function e(t){i(t);p("")},errors:d?{message:(0,g.t)("{errorMessage}",{errorMessage:d})}:null}),v.default.createElement(y.Text.Caption,{sx:{marginLeft:4}},v.default.createElement(b.T,{project:"commerce-product-composer"},"Changes apply to all products in this category."))))))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdditionalInfo/AdditionalInfo.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.useIsEnabled=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var l=a(r("./common/temp/node_modules/react/index.js"));var d=a(r("./common/temp/node_modules/lodash/cloneDeep.js"));var p=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var m=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var n=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/ErrorHandling.tsx");var v=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var b=310;var c="<p></p>";var i=function e(t){try{var r,a;return!t.layout||0===t.layout.rows.length||1===t.layout.rows.length&&1===t.layout.rows[0].columns.length&&t.layout.rows[0].columns[0].blocks&&1===t.layout.rows[0].columns[0].blocks.length&&(""===(null===(r=t.layout.rows[0].columns[0].blocks[0].value)||void 0===r?void 0:r.html)||(null===(a=t.layout.rows[0].columns[0].blocks[0].value)||void 0===a?void 0:a.html)===c)}catch(e){(0,n.captureException)("Failed to find additional info field: ".concat(e.message));return true}};var g=function e(t){var r,a,n,s,o;if(i(t)&&"wysiwyg"===(null===t||void 0===t?void 0:null===(r=t.layout)||void 0===r?void 0:null===(a=r.rows[0])||void 0===a?void 0:null===(n=a.columns[0])||void 0===n?void 0:null===(s=n.blocks[0])||void 0===s?void 0:null===(o=s.value)||void 0===o?void 0:o.engine)){t.layout.rows[0].columns[0].blocks[0].value.html=c;t.layout.rows[0].columns[0].blocks[0].value.source=c}};var s=function e(){var t=(0,f.useProductContext)(),r=t.product;if(!r)return false;return!i(r.additionalInfo)};t.useIsEnabled=s;function o(e){var n=e.onClose,o=e.additionalInfoConstructor,c=e.dialog;var t=(0,f.useProductContext)(),s=t.patchProduct,i=t.product;var u=l.default.useRef(null);var r=l.default.useCallback(function(e){if(e){if(!i)return;var t=i.id,r=i.productType,a=i.collectionId,n=i.name;var s=new Y.Squarespace.Models.ContentItem({id:t,productType:r,collectionId:a,title:n});u.current=new o({dialog:c,contentItem:s,data:i.additionalInfo,hideNodeExpander:true,contentBox:Y.one('[data-yui-mount="additional-info"]'),supportsRedirectsInBlockEditor:false});u.current.render();u.current.show()}},[]);l.default.useEffect(function(){return function(){var e;null===(e=u.current)||void 0===e?void 0:e.destroy()}},[]);return l.default.createElement(v.default,{maxHeight:600,width:800,title:(0,m.t)("Additional Info"),subtitle:(0,m.t)("Put additional info on your product page: a longer description, videos, or other content."),isDirty:function e(){var t;return null===(t=u.current)||void 0===t?void 0:t._didDataChange},onClose:n,onSave:function e(){var t;if(!i)return;var r=null===(t=u.current)||void 0===t?void 0:t.get("data");var a=(0,d.default)(i.additionalInfo);if(a.layout){a.layout.columns=r.layout.columns;a.layout.rows=r.layout.rows}else a.layout=r.layout;g(a);s({additionalInfo:a});n()},renderRightButtons:function e(){return l.default.createElement(p.Button.Tertiary,{onClick:function e(){if(!i||!u.current)return;var t=(0,d.default)(i.additionalInfo);t.layout.columns=12;t.layout.rows=[];g(t);u.current.set("data",t)},sx:{alignSelf:"start"}},(0,m.t)("Reset"))}},l.default.createElement(v.default.Section,null,l.default.createElement(p.Box,{ref:r,"data-yui-mount":"additional-info",height:b},l.default.createElement("div",{className:"sqs-layout-wrapper"},l.default.createElement("div",{className:"sqs-layout-scroll"},l.default.createElement("div",{className:"sqs-layout"})),l.default.createElement("button",{className:"add-block",tabIndex:-1})))))}var u=o;t.default=u},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdditionalInfo/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var u=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var l=n(r("./common/temp/node_modules/react/index.js"));var d=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var p=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdditionalInfo/AdditionalInfo.tsx"));var f=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx"));var v=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx"));var b=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useUnavailableOnMobile.ts"));function s(e){var t=l.default.useState(false),r=(0,u.default)(t,2),a=r[0],n=r[1];var s=(0,m.useIsEnabled)();var o=(0,b.default)(),c=o.alertIfUnavailable;return l.default.createElement(l.default.Fragment,null,l.default.createElement(f.default,{label:(0,p.t)("Additional Info"),subtitle:s?l.default.createElement(v.default,null):(0,p.t)("Add custom blocks and content to your Product Pages"),onClick:function e(){c()||n(true)},icon:l.default.createElement(d.Layout,{width:22,height:22,sx:{padding:1,border:1,borderColor:"gray.800"}})}),a&&l.default.createElement(m.default,(0,i.default)({onClose:function e(){n(false)}},e)))}var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/AdvancedShipping.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var p=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var i=n(r("./common/temp/node_modules/lodash/isEqual.js"));var m=a(r("./common/temp/node_modules/react/index.js"));var u=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var l=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var d=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx"));var f=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var v=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/ModalVariantsSingle.tsx"));var b=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/ModalVariantsMultiple.tsx"));var g=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx"));var C=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/generateVariants.ts");var h=function e(t){var r=t.onClose,a=t.variants;var n=(0,f.useProductContext)(),s=n.patchProduct;var o=(0,m.useState)(a),c=(0,p.default)(o,2),i=c[0],u=c[1];var l=function e(){s({variants:i});r()};var d=function e(t){u(i.map(function(e){return t.id===e.id?t:e}))};if(1===i.length)return m.default.createElement(v.default,{onSave:l,onClose:r,variant:i[0],onUpdateVariant:d});return m.default.createElement(b.default,{onSave:l,onClose:r,variants:i,onUpdateVariant:d})};var s=function e(t){var r=t.variants;var a=m.default.useState(false),n=(0,p.default)(a,2),s=n[0],o=n[1];var c=function e(){return r.some(function(e){return!(0,i.default)(e.shippingSize,(0,C.DEFAULT_SHIPPING_SIZE)())||!(0,i.default)(e.shippingWeight,(0,C.DEFAULT_SHIPPING_WEIGHT)())})};return m.default.createElement(m.default.Fragment,null,m.default.createElement(d.default,{label:(0,l.t)("Advanced Shipping"),icon:m.default.createElement(u.Shipping,{width:22,height:22,sx:{padding:1,border:1,borderColor:"gray.800"}}),subtitle:c()?m.default.createElement(g.default,null):(0,l.t)("Supports automated or weight-based shipping rates."),onClick:function e(){return o(true)}}),s&&m.default.createElement(h,{variants:r,onClose:function e(){return o(false)}}))};t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/ModalVariantsMultiple.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var m=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var f=a(r("./common/temp/node_modules/react/index.js"));var v=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var b=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var g=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var C=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/ShippingFieldsBody.tsx"));var h=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ShippingFields.tsx");var y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/VariantList.tsx");var s=function e(t){var r=t.onClose,a=t.onSave,n=t.onUpdateVariant,s=t.variants;var o=(0,f.useState)(null),c=(0,m.default)(o,2),i=c[0],u=c[1];var l=s.find(function(e){return e.id===i});var d=(0,v.t)("Advanced Shipping");var p=(0,v.t)("Specify the weight and dimensions of your package to estimate the cost of shipping using real-time carrier calculated rates.");l&&(d=(0,y.getVariantTitle)(l));return f.default.createElement(g.default,{onBack:l?function(){u(null)}:void 0,onClose:r,onSave:a,title:d,subtitle:p},l?f.default.createElement(C.default,{variant:l,onUpdateVariant:n}):f.default.createElement(b.Box,{mx:-2,mt:4,mb:2},s.map(function(t){return f.default.createElement(y.VariantListItem,{key:t.id,variant:t,subtitle:(0,h.getShippingSubtitle)({variant:t,emptyState:(0,v.t)("Missing Size and Weight")}),onClick:function e(){return u(t.id)}})})))};t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/ModalVariantsSingle.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=a(r("./common/temp/node_modules/react/index.js"));var c=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/ShippingFieldsBody.tsx"));var n=function e(t){var r=t.onClose,a=t.onSave,n=t.onUpdateVariant,s=t.variant;return o.default.createElement(i.default,{onClose:r,onSave:a,title:(0,c.t)("Advanced Shipping"),subtitle:(0,c.t)("Specify the weight and dimensions of your package to estimate the cost of shipping using real-time carrier calculated rates.")},o.default.createElement(u.default,{variant:s,onUpdateVariant:n}))};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/ShippingFieldsBody.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=n(r("./common/temp/node_modules/react/index.js"));var o=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var c=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var i=a(r("./src/main/webapp/frontend/packages/knowledge-base-links/lib/index.js"));var u=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ShippingFields.tsx"));var l=function e(t){var r=t.variant,a=t.onUpdateVariant;return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.Box,{mx:-2,mt:4,mb:2},s.default.createElement(u.default,{variant:r,onUpdateVariant:a})),s.default.createElement(o.Text.Caption,null,s.default.createElement(c.T,{project:"commerce-product-composer",learnMoreLink:s.default.createElement("a",{href:i.SETTING_UP_SHIPPING_RATES,target:"_blank"},s.default.createElement(c.T,{project:"commerce-product-composer"},"setting up shipping rates"))},"Set weight and dimensions for a package to ship using carrier calculated shipping or Weight-based shipping option. To learn more, visit {learnMoreLink}.")))};t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"default",{enumerable:true,get:function e(){return n.default}});var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/AdvancedShipping.tsx"));e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.less":function(e,t,r){e.exports={modal:"_1SWrIErR0",toolbar:"_2PBFT5lzZ"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var P=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var x=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var _=a(r("./common/temp/node_modules/react/index.js"));var w=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var E=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var j=a(r("./common/temp/node_modules/@sqs/core-components/components/FeatureGateBadge.js"));var A=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.tsx"));var S=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.tsx"));var O=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var I=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var T=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.less"));var k=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var F=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));var n=function e(t){var n=t.onClose,r=t.onSave,a=t.onBack,s=t.children,o=t.title,c=t.subtitle,i=t.showFeatureGateBadge,u=t.maxHeight,l=t.width,d=t.isDirty,p=t.savesIndependently,m=t.isGray,f=t.renderRightButtons;var v=(0,k.useConfirmModal)(),b=v.showConfirmModal;var g=(0,F.default)(),C=g.isMobile;var h=i?_.default.createElement(I.T,{project:"commerce-product-composer"},"Upgrade"):p?_.default.createElement(I.T,{project:"commerce-product-composer"},"Save"):_.default.createElement(I.T,{project:"commerce-product-composer"},"Apply");var y=function(){var t=(0,x.default)(P.default.mark(function e(){var r,a;return P.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=function e(){if("boolean"===typeof d)return d;if("function"===typeof d)return d()};t.t0=!r();if(t.t0){t.next=6;break}t.next=5;return b({title:(0,O.t)("Are You Sure?"),message:(0,O.t)("You have unsaved changes."),confirmLabel:(0,O.t)("Discard")});case 5:t.t0=t.sent;case 6:a=t.t0;a&&n();case 8:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();return _.default.createElement(A.default,{isOpen:true,isFullScreen:C,onRequestClose:y},_.default.createElement(w.Flex,{bg:m?"gray.900":void 0,sx:{paddingTop:4,paddingBottom:6,paddingLeft:6,paddingRight:6},maxHeight:C?void 0:null!==u&&void 0!==u?u:600,width:C?"100vw":null!==l&&void 0!==l?l:400,flexDirection:"column"},_.default.createElement(S.default,{className:T.default.toolbar},a?_.default.createElement(S.default.Left,null,_.default.createElement(w.Box,{my:-1},_.default.createElement(E.BackButton,{onClick:a}))):_.default.createElement(_.default.Fragment,null,_.default.createElement(S.default.Left,null,_.default.createElement(w.Button.Tertiary,{animationDirection:"none",onClick:y},_.default.createElement(I.T,{project:"commerce-product-composer"},"Cancel"))),_.default.createElement(S.default.Center,null),_.default.createElement(S.default.Right,null,null===f||void 0===f?void 0:f(),r&&_.default.createElement(w.Button.Tertiary,{animationDirection:"none",onClick:r},h)))),_.default.createElement(w.Flex,{sx:{alignItems:"center",marginTop:5}},_.default.createElement(w.Text.Title,null,o),i&&_.default.createElement(j.default,null)),c&&_.default.createElement(e.Subtitle,null,c),s))};n.Subtitle=function(e){var t=e.children;return _.default.createElement(w.Text.Subtitle,{sx:{marginBottom:0,color:"gray.400"}},t)};n.Section=function(e){var t=e.children;return _.default.createElement(w.Flex,{flexDirection:"column",mt:4},t)};var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/CustomButton.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var h=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var y=a(r("./common/temp/node_modules/react/index.js"));var i=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var P=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var x=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var u=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var _=n(r("./common/temp/node_modules/@sqs/core-components/fields/TextareaField.js"));var w=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var E=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var c=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/NeedsProduct.tsx"));var j=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var l=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx"));var d=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx"));var p=(0,o.withFocusManagedDivider)(P.Cell,P.Divider);var A=function e(t){return y.default.createElement(p,(0,s.default)({as:"label"},t))};var m=(0,c.default)(function(e){var t=e.onClose;var r=(0,E.useProductContext)(),a=r.product,n=r.patchProduct;var s=(0,y.useState)(null===a||void 0===a?void 0:a.useCustomAddButtonText),o=(0,h.default)(s,2),c=o[0],i=o[1];var u=(0,y.useState)(null===a||void 0===a?void 0:a.customAddButtonText),l=(0,h.default)(u,2),d=l[0],p=l[1];var m=(0,y.useState)(false),f=(0,h.default)(m,2),v=f[0],b=f[1];var g=c!==(null===a||void 0===a?void 0:a.useCustomAddButtonText)||d!==(null===a||void 0===a?void 0:a.customAddButtonText);var C=function e(){if(c&&!d)return{message:(0,w.t)("Your custom text can't be blank.")}};return y.default.createElement(j.default,{isDirty:g,onClose:t,onSave:function e(){b(true);if(C())return;n({useCustomAddButtonText:c,customAddButtonText:d});t()},title:(0,w.t)("Customize Button Label"),subtitle:(0,w.t)("Change your purchase button label. If you have express checkout enabled, buyers will be directed straight to checkout.")},y.default.createElement(j.default.Section,null,y.default.createElement(A,{label:(0,w.t)("Enable Custom Label"),interiorAccessory:y.default.createElement(P.Toggle,{checked:c,onChange:function e(t){i(t)}})}),c&&y.default.createElement(x.Flex,{sx:{marginLeft:-4,marginRight:-4}},y.default.createElement(x.Box,{width:"100%"},y.default.createElement(_.default,{label:(0,w.t)("Label"),placeholder:(0,w.t)("Add custom text..."),value:d,onChange:function e(t){p(t)},errors:v?C():null})))))});var f=function e(){var t=y.default.useState(false),r=(0,h.default)(t,2),a=r[0],n=r[1];var s=(0,E.useProductContext)(),o=s.product;if(!o)return null;var c=!!o.useCustomAddButtonText;return y.default.createElement(y.default.Fragment,null,y.default.createElement(l.default,{label:(0,w.t)("Custom Button"),subtitle:c?y.default.createElement(d.default,null):(0,w.t)("Customize the Add to Cart button text."),onClick:function e(){return n(true)},icon:y.default.createElement(i.Edit,{width:u.space[4],height:u.space[4],sx:{padding:1,border:1,borderColor:"gray.800"}})}),a&&y.default.createElement(m,{onClose:function e(){return n(false)}}))};t.default=f;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/CustomForms/CustomForms.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.useIsEnabled=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var u=a(r("./common/temp/node_modules/react/index.js"));var l=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var d=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var p=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var n=function e(){var t=(0,p.useProductContext)(),r=t.product;if(!r)return false;return!!r.productFormId};t.useIsEnabled=n;function s(e){var r=e.onClose,a=e.customFormsConstructor,n=e.dialog;var t=(0,p.useProductContext)(),s=t.patchProduct,o=t.product;var c=u.default.useRef(null);var i=u.default.useCallback(function(e){if(e&&o){var t,r;c.current=new a({dialog:n,data:o.productFormId,formType:Y.Squarespace.FormType.PRODUCT,contentBox:Y.one('[data-yui-mount="custom-forms"]')});null===(t=c.current)||void 0===t?void 0:t.render();null===(r=c.current)||void 0===r?void 0:r.show()}},[]);u.default.useEffect(function(){return function(){var e;null===(e=c.current)||void 0===e?void 0:e.destroy()}},[]);return u.default.createElement(m.default,{isGray:true,title:(0,d.t)("Custom Forms"),subtitle:(0,d.t)("Collect information when customers add this to their cart."),isDirty:function e(){var t;return(null===(t=c.current)||void 0===t?void 0:t.get("data"))!==((null===o||void 0===o?void 0:o.productFormId)||null)},onClose:r,onSave:function e(){var t;s({productFormId:(null===(t=c.current)||void 0===t?void 0:t.get("data"))||""});r()}},u.default.createElement(m.default.Section,null,u.default.createElement(l.Box,{ref:i,"data-yui-mount":"custom-forms"})))}var o=s;t.default=o},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/CustomForms/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var u=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var l=n(r("./common/temp/node_modules/react/index.js"));var d=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var p=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var m=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/CustomForms/CustomForms.tsx"));var v=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx"));var b=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx"));var g=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useUnavailableOnMobile.ts"));function s(e){var t=l.default.useState(false),r=(0,u.default)(t,2),a=r[0],n=r[1];var s=(0,f.useIsEnabled)();var o=(0,g.default)(),c=o.alertIfUnavailable;return l.default.createElement(l.default.Fragment,null,l.default.createElement(v.default,{label:(0,m.t)("Custom Forms"),subtitle:s?l.default.createElement(b.default,null):(0,m.t)("Collect information when customers add this to their cart."),onClick:function e(){c()||n(true)},icon:l.default.createElement(d.TextArea,{width:p.space[4],height:p.space[4],sx:{padding:1,border:1,borderColor:"gray.800"}})}),a&&l.default.createElement(f.default,(0,i.default)({onClose:function e(){n(false)}},e)))}var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var o=a(r("./common/temp/node_modules/react/index.js"));var c=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var n=function e(t){var r=t.label,a=t.subtitle,n=t.icon,s=t.onClick;return o.default.createElement(c.Flex,{width:"100%",alignItems:"center",onClick:s,sx:{paddingLeft:2,paddingTop:2,paddingBottom:2,borderBottom:1,borderColor:"gray.800","&:hover":{cursor:"pointer",backgroundColor:"gray.900"}}},o.default.createElement(c.Flex,{alignItems:"center",sx:{marginRight:2,backgroundColor:"white"}},n),o.default.createElement(c.Flex,{flexDirection:"column"},o.default.createElement(c.Text.Body,{as:"span"},r),o.default.createElement(c.Text.Caption,{as:"span"},a)))};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/RelatedProducts.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var O=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var I=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var T=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var y=n(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var k=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var P=n(r("./common/temp/node_modules/lodash/uniq.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var F=a(r("./common/temp/node_modules/react/index.js"));var x=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var D=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var R=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var M=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var _=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var s=n(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var o=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var N=n(r("./src/main/webapp/universal/src/apps/Commerce/shared/utils/useFetch.ts"));var w=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/index.tsx"));var E=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/getCategoriesAndTags.ts"));var V=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var q=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/SettingsApi.ts");var B=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx"));var j=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var L=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmExitProduct.ts"));var U=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx"));var G=n(r("./src/main/webapp/frontend/packages/enums/RelatedProductsConfigurationStrategy.js"));var A=o.legacyV6Flags.isFeatureEnabled(s.default.NESTED_CATEGORIES);var W=function e(t){var n=t.onClose,r=t.productId,a=t.collectionId,s=t.websiteId,o=t.relatedCategoryIds,c=t.relatedCategories,i=t.productTags,u=t.initialRelatedProductsValue,l=t.onSetInitialRelatedProductsValue;var d=(0,V.useProductContext)(),p=d.patchProduct;var m=(0,N.default)(function(){return(0,E.default)(a,true,true)}),f=m.data;var v=(0,F.useState)(null),b=(0,k.default)(v,2),g=b[0],C=b[1];var h=function e(){if(A){if(o.length>0)return o;return[null===f||void 0===f?void 0:f.storeWideCats[0].id]}return c};return F.default.createElement(j.default,{onClose:n,onSave:function e(){if(g){var t=g.relatedContent,r=g.strategy;var a={strategy:r};r===G.default.CATEGORIES?A?a.relatedCategoryIds=t:a.relatedCategories=t:r===G.default.TAGS&&(a.relatedTags=t);p({relatedProductsConfiguration:a})}n()},title:(0,R.t)("Related Products")},f?F.default.createElement(w.default,{isDropdownFlush:true,initialValue:u,model:{productId:r,collectionId:a,websiteId:s,categoryIds:o},storeWideCats:f.storeWideCats,selectableTags:(0,P.default)([].concat((0,y.default)(f.storeWideTags),(0,y.default)(i))),saveRelatedAttrs:function e(t,r,a){C({relatedContent:t,strategy:r});l(a)},existingProductCats:h()},function(e){var t=e.dropdown,r=e.description;return F.default.createElement(F.default.Fragment,null,F.default.createElement(j.default.Subtitle,null,r),F.default.createElement(x.Box,{my:4},t))}):F.default.createElement(x.Flex,{alignItems:"center",justifyContent:"center",py:8},F.default.createElement(_.ActivityIndicator,null)))};var c=function e(){var t=F.default.useState(false),r=(0,k.default)(t,2),a=r[0],n=r[1];var s=(0,V.useProductContext)(),o=s.product;var c=(0,L.default)(),i=c.confirmExit;var u=(0,N.default)(q.getMerchandisingSettings),l=u.data;var d=(0,F.useState)(""),p=(0,k.default)(d,2),m=p[0],f=p[1];if(!o||!l)return null;var v=l.relatedProductsEnabled;var b=o.id,g=o.collectionId,C=o.websiteId,h=o.relatedProductsConfiguration;var y=h||{},P=y.strategy,x=y.relatedCategories,_=void 0===x?[]:x,w=y.relatedCategoryIds,E=void 0===w?[]:w;var j="/config/commerce/related-products";var A=function(){var t=(0,T.default)(I.default.mark(function e(){var r;return I.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return i();case 2:r=t.sent;r&&window.location.assign(j);case 4:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();var S=v?{subtitle:P===G.default.OFF?(0,R.t)("Showcase similar items on your Product Pages."):F.default.createElement(U.default,null),onClick:function e(){return n(true)}}:{subtitle:F.default.createElement(M.T,{project:"commerce-product-composer",link:F.default.createElement("a",{href:j,onClick:function e(t){t.preventDefault();A()}},F.default.createElement(M.T,{project:"commerce-product-composer"},"Commerce"))},"To show related products on this product's page, turn on this feature in {link}."),onClick:function e(){A()}};return F.default.createElement(F.default.Fragment,null,F.default.createElement(B.default,(0,O.default)({label:(0,R.t)("Related Products"),icon:F.default.createElement(D.Product,{width:22,height:22,sx:{padding:1,border:1,borderColor:"gray.800"}})},S)),a&&F.default.createElement(W,{initialRelatedProductsValue:m,onSetInitialRelatedProductsValue:f,productId:b,collectionId:g,websiteId:C,relatedCategories:_,relatedCategoryIds:E,productTags:o.tags,onClose:function e(){return n(false)}}))};t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/Reviews.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var u=a(r("./common/temp/node_modules/react/index.js"));var l=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var d=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var p=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx"));var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmExitProduct.ts"));var f=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductReviews/shouldShowEtsyProductReviewImport.ts");var v=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackMerchSettings.ts");var b=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx"));var g=a(r("./src/main/webapp/universal/src/apps/Commerce/shared/utils/useFetch.ts"));var C=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/SettingsApi.ts");var n=function e(){var t=(0,m.default)(),a=t.confirmExit;var r=(0,g.default)(C.getMerchandisingSettings),n=r.data;var s=function(){var t=(0,i.default)(c.default.mark(function e(){var r;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return a();case 2:r=t.sent;if(r){(0,v.trackImportProductReviews)("etsy-reviews-import","first-import","product-editor");(0,f.showImportPanel)()}case 4:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();if(!n)return null;var o=n.productReviewsEnabled;return u.default.createElement(u.default.Fragment,null,u.default.createElement(p.default,{label:(0,d.t)("Product Reviews"),subtitle:o?u.default.createElement(b.default,null):(0,d.t)("Show customer reviews directly on your product pages."),onClick:s,icon:u.default.createElement(l.People,{sx:{padding:1,border:1,borderColor:"gray.800",size:"sizes.150"}})}))};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/SocialAccounts/SocialAccounts.less":function(e,t,r){e.exports={container:"_2zfQ8uAst"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/SocialAccounts/SocialAccounts.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.useIsEnabled=t.getIsEmpty=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var o=a(r("./common/temp/node_modules/lodash/isEqual.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var m=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var v=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var b=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/SocialAccounts/SocialAccounts.less"));var g=a(r("./src/main/webapp/frontend/packages/enums/RecordType.js"));function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var h=function e(){return Y.Squarespace.Models.ConnectedAccounts.loadFromStore()};var i=function e(){return!h().some(function(e){return Y.Squarespace.ConnectedAccountCapabilities.can(e,Y.Squarespace.ConnectedAccountCapabilities.PUSH)})};t.getIsEmpty=i;var y=function e(t,r){var a=[].concat((0,s.default)(t),(0,s.default)(r)).some(function(e){var t=e.pushEnabled;return t});if(!a)return false;return!(0,o.default)(t.map(function(e){return C({},e,{message:e.message||null})}),r.map(function(e){return C({},e,{message:e.message||null})}))};var u=function e(){var t=(0,f.useProductContext)(),r=t.product;if(!r)return false;var a=r.socialPushFields.shareStates.some(function(e){var t=e.pushEnabled;return t});var n=r.socialPushFields.pushedServices.length>0;return a||n};t.useIsEnabled=u;var P=function e(t){return t.reduce(function(e,t){return C({},e,(0,n.default)({},t,true))},{})};function l(e){var t=e.onClose,c=e.socialAccountsConstructor,i=e.dialog;var r=(0,f.useProductContext)(),a=r.patchProduct,u=r.product;var l=d.default.useRef(null);var n=d.default.useCallback(function(e){if(e&&u){var t,r;var a=u.socialPushFields,n=a.shareStates,s=a.pushedServices,o=a.pendingPushedServices;l.current=new c({dialog:i,recordType:g.default.STORE_ITEM,data:n,pushedServices:P(s),pendingPushedServices:P(o),models:h(),enforceMaxLength:true,contentBox:Y.one('[data-yui-mount="social-accounts"]')});null===(t=l.current)||void 0===t?void 0:t.render();null===(r=l.current)||void 0===r?void 0:r.show()}},[]);d.default.useEffect(function(){return function(){var e;null===(e=l.current)||void 0===e?void 0:e.destroy()}},[]);if(!u)return null;return d.default.createElement(v.default,{isGray:true,width:1e3,title:(0,m.t)("Social Accounts"),subtitle:(0,m.t)("Update social accounts when you publish a product."),isDirty:function e(){var t;return y(u.socialPushFields.shareStates,null===(t=l.current)||void 0===t?void 0:t.get("data"))},onClose:t,onSave:function e(){a({socialPushFields:C({},u.socialPushFields,{shareStates:l.current.get("data")})});t()}},d.default.createElement(v.default.Section,null,d.default.createElement(p.Box,{className:b.default.container,ref:n,"data-yui-mount":"social-accounts",minHeight:"sizes.750"})))}var x=l;t.default=x},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/SocialAccounts/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var f=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var v=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var b=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var g=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var C=n(r("./common/temp/node_modules/react/index.js"));var h=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var y=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var P=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var x=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var _=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/SocialAccounts/SocialAccounts.tsx"));var w=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx"));var E=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmExitProduct.ts"));var j=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx"));var A=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useUnavailableOnMobile.ts"));function s(e){var t=C.default.useState(false),r=(0,g.default)(t,2),a=r[0],n=r[1];var s=(0,_.getIsEmpty)();var o=(0,E.default)(),c=o.confirmExit;var i=(0,_.useIsEnabled)();var u=(0,A.default)(),l=u.alertIfUnavailable;var d="/config/settings/connected-accounts";var p=function(){var t=(0,b.default)(v.default.mark(function e(){var r;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return c();case 2:r=t.sent;r&&window.location.assign(d);case 4:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();var m=s?{subtitle:C.default.createElement(x.T,{project:"commerce-product-composer",link:C.default.createElement("a",{href:d,onClick:function e(t){t.preventDefault();p()}},C.default.createElement(x.T,{project:"commerce-product-composer"},"Connected Accounts"))},"To enable updating social accounts when you publish a product, turn on this feature in {link}."),onClick:function e(){p()}}:{subtitle:i?C.default.createElement(j.default,null):(0,P.t)("Update social accounts when you publish a product."),onClick:function e(){l()||n(true)}};return C.default.createElement(C.default.Fragment,null,C.default.createElement(w.default,(0,f.default)({},m,{label:(0,P.t)("Social Accounts"),icon:C.default.createElement(h.Person,{width:y.space[4],height:y.space[4],sx:{padding:1,border:1,borderColor:"gray.800"}})})),a&&C.default.createElement(_.default,(0,f.default)({onClose:function e(){n(false)}},e)))}var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/Subscription.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var A=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var S=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var O=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var I=a(r("./common/temp/node_modules/react/index.js"));var i=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var T=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var k=a(r("./common/temp/node_modules/@sqs/core-components/fields/DropdownSelectField.js"));var F=a(r("./common/temp/node_modules/@sqs/core-components/fields/NumberField.js"));var D=a(r("./common/temp/node_modules/@sqs/core-components/fields/StepperField.js"));var R=a(r("./src/main/webapp/frontend/packages/enums/Features.js"));var M=r("./src/main/webapp/frontend/packages/websites-constants/lib/index.js");var N=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var V=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var q=r("./src/main/webapp/universal/src/shared/types/SubscriptionPlan.ts");var B=r("./src/main/webapp/universal/src/shared/types/NormalizedProduct.ts");var L=a(r("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js"));var U=a(r("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js"));var G=a(r("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/CustomerAccounts/shared/api/CustomerAccountsSettingsApi.js"));var W=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var Y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var z=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/MenuItem.tsx"));var H=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/FeatureGatePanel.tsx"));var K=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var l=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx"));var Z=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmExitProduct.ts"));var X=r("./src/main/webapp/frontend/packages/knowledge-base-links/lib/index.js");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Q=2;var $={billingPeriod:{value:1,unit:q.BillingPeriodUnit.WEEK},numBillingCycles:0};var d=function e(t){var o=t.onClose,c=t.onSave,r=t.subscription;var a=I.default.useState(r||$),n=(0,O.default)(a,2),i=n[0],s=n[1];var u=I.default.useState(false),l=(0,O.default)(u,2),d=l[0],p=l[1];var m=U.default.isFeatureEnabled(R.default.COMMERCE_SUBSCRIPTIONS);var f=(0,K.useConfirmModal)(),v=f.showConfirmModal,b=f.closeConfirmModal;var g=(0,W.useProductContext)(),C=g.product,h=g.patchProduct;var y=(0,Z.default)(),P=y.confirmExit;var x=i.billingPeriod,_=i.numBillingCycles;if(!C||!(0,B.isSubscribable)(C))return null;var w=function e(t){s(J({billingPeriod:x,numBillingCycles:_},t));p(true)};var E=function e(){var t=L.default.isTrial()?M.UpsellUrls[M.UpsellDestination.TRIAL_UPGRADE_PLAN]:M.UpsellUrls[M.UpsellDestination.UPGRADE_PLAN];return"/config".concat(t)};var j=function(){var t=(0,S.default)(A.default.mark(function e(){var r,a,n,s;return A.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(m){t.next=6;break}t.next=3;return P();case 3:r=t.sent;r&&window.location.assign(E());return t.abrupt("return");case 6:t.prev=6;t.next=9;return G.default.get();case 9:a=t.sent;n=a.data;if(n.userAccountsEnabled){t.next=22;break}t.next=14;return v({title:(0,N.t)("Connect Customer Accounts"),message:I.default.createElement(V.T,{project:"commerce-product-composer",learnMoreLink:I.default.createElement("a",{href:X.CUSTOMER_ACCOUNTS,target:"_blank"},I.default.createElement(V.T,{project:"commerce-product-composer"},"Learn more"))},"Subscriptions require Customer Accounts to be on so that your customers may manage their subscriptions. {learnMoreLink}."),confirmLabel:(0,N.t)("Enable")});case 14:s=t.sent;if(!s){t.next=20;break}t.next=18;return G.default.save(J({},n,{userAccountsEnabled:true}));case 18:t.next=22;break;case 20:o();return t.abrupt("return");case 22:c(i);o();t.next=30;break;case 26:t.prev=26;t.t0=t["catch"](6);console.error(t.t0);o();case 30:case"end":return t.stop()}},e,null,[[6,26]])}));return function e(){return t.apply(this,arguments)}}();return I.default.createElement(z.default,{isDirty:d,onClose:o,onSave:j,title:(0,N.t)("Edit Subscription"),subtitle:(0,N.t)("Create a subscription to charge your customers on a recurring basis."),showFeatureGateBadge:!m},!m&&I.default.createElement(z.default.Section,null,I.default.createElement(H.default,{description:(0,N.t)("Available on Advanced Commerce Plans."),onLearnMoreClick:function e(){return window.open(E())}})),I.default.createElement(z.default.Section,null,I.default.createElement(T.Text.Label,null,(0,N.t)("Repeats Every")),I.default.createElement(T.Flex,{sx:{marginLeft:-4,marginRight:-4}},I.default.createElement(T.Box,{width:"50%"},I.default.createElement(F.default,{min:1,max:12,value:x.value,onChange:function e(t){return w({billingPeriod:J({},x,{value:t})})}})),I.default.createElement(T.Box,{width:"50%"},I.default.createElement(k.default,{value:x.unit,options:[{label:(0,N.pluralize)({one:"Week",other:"Weeks"},x.value),value:q.BillingPeriodUnit.WEEK},{label:(0,N.pluralize)({one:"Month",other:"Months"},x.value),value:q.BillingPeriodUnit.MONTH}],onChange:function e(t){return w({billingPeriod:J({},x,{unit:t})})}})))),I.default.createElement(z.default.Section,null,I.default.createElement(T.Text.Label,null,(0,N.t)("Billing Cycle")),I.default.createElement(T.Flex,{flexDirection:"column",sx:{marginLeft:-4,marginRight:-4}},I.default.createElement(k.default,{value:_>0?"expires":"never-expires",options:[{label:(0,N.t)("Never Expires"),value:"never-expires"},{label:(0,N.t)("Expires After..."),value:"expires"}],onChange:function e(t){return w({numBillingCycles:"expires"===t?Q:0})}}),_>0&&I.default.createElement(D.default,{value:_,max:52,min:Q,detail:(0,N.pluralize)({one:"Payment",other:"Payments"},_),onChange:function e(t){return w({numBillingCycles:t})}})),I.default.createElement(T.Text.Caption,{sx:{marginTop:1}},(0,N.t)("Any changes made to your subscription product will only affect new subscribers. Please ensure you comply with any laws applicable to your subscriptions."))),C.subscribable&&I.default.createElement(z.default.Section,null,I.default.createElement(T.Button.Danger,{onClick:(0,S.default)(A.default.mark(function e(){var r;return A.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return v({autoClose:false,title:(0,N.t)("Remove Subscription"),message:(0,N.t)("Removing this subscription will not affect any of its active subscriptions. Customers on this subscription will still be charged on a recurring basis. You will need to cancel each active subscription for this to take full effect."),confirmLabel:(0,N.t)("Remove")});case 2:r=t.sent;if(!r){t.next=8;break}t.next=6;return(0,Y.deleteSubscriptionPlan)(C.id);case 6:h({subscribable:false,subscriptionPlan:null});o();case 8:b();case 9:case"end":return t.stop()}},e)})),sx:{textAlign:"left"}},I.default.createElement(V.T,{project:"commerce-product-composer"},"Remove"))))};var o=function e(t){var r=t.subscription,a=t.onChange;var n=I.default.useState(false),s=(0,O.default)(n,2),o=s[0],c=s[1];return I.default.createElement(I.default.Fragment,null,I.default.createElement(u.default,{label:(0,N.t)("Subscription"),subtitle:r?I.default.createElement(l.default,null):(0,N.t)("Charge customers on a recurring basis."),onClick:function e(){return c(true)},icon:I.default.createElement(i.Refresh,{width:22,height:22,sx:{padding:1,border:1,borderColor:"gray.800"}})}),o&&I.default.createElement(d,{onClose:function e(){return c(false)},onSave:a,subscription:r}))};t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/anchorLinks.ts"));var i=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var u=function e(t){var r=t.children;return n.default.createElement(n.default.Fragment,null,n.default.createElement(s.Text.Subtitle,{"data-anchor":c.default.CUSTOMIZE,sx:{marginTop:6,marginBottom:1}},n.default.createElement(i.T,{project:"commerce-product-composer"},"Customize")),n.default.createElement(s.Text.Caption,{as:"p",sx:{marginTop:0,marginBottom:2},fontSize:o.fontSizes[3]},n.default.createElement(i.T,{project:"commerce-product-composer"},"Add custom content or extra functionality to this product.")),n.default.createElement(s.Flex,{flexDirection:"column"},r))};t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/DeleteProduct/DeleteProduct.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var i=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var l=a(r("./common/temp/node_modules/react/index.js"));var d=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var p=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var m=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var f=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var b=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var g=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useDeleteProduct.tsx"));function n(e){var a=e.isNewProduct;var t=(0,v.useProductContext)(),r=t.product;var n=(0,b.useConfirmModal)(),s=n.showConfirmModal;var o=(0,g.default)(),c=o.deleteProduct;if(!r)return null;return l.default.createElement(d.Box,{pb:"10"},l.default.createElement(p.default,{flush:true},l.default.createElement(d.Button.Danger,{animationDirection:"none",onClick:(0,u.default)(i.default.mark(function e(){var r;return i.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return s({title:(0,f.t)("Remove Product"),message:(0,f.t)("Are you sure you wish to remove this product?"),confirmLabel:(0,f.t)("Delete")});case 2:r=t.sent;r&&c(a);case 4:case"end":return t.stop()}},e)})),"data-testid":"pc-delete-button"},l.default.createElement(m.T,{project:"commerce-product-composer"},"Delete"))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/DeleteProduct/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/DeleteProduct/DeleteProduct.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Description.less":function(e,t,r){e.exports={container:"FVpQrvGD6",rteEditor:"_3TOgwJOJ3"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Description.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=h;var u=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var l=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=n(r("./common/temp/node_modules/classnames/index.js"));var m=a(r("./common/temp/node_modules/@sqs/core-components/components/Rte.js"));var f=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=r("./src/main/webapp/universal/src/shared/utils/RteToolbarUtils.js");var b=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Description.less"));function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),true).forEach(function(e){(0,s.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var i=["code","p2","h4","h3","h2","h1"];var g=c({},m.itemConfig.blockType,{commands:m.itemConfig.blockType.commands.filter(function(e){return i.includes(e.shorthandVariant)})});var C=(0,v.getToolbarItemsRosetta)({heading:true,bold:true,italic:true,underline:true,link:true,customBlockType:g,align:true,quote:true,lists:true,strikethrough:true,indent:true});function h(e){var t=e.description,r=e.onChange;var c=(0,d.useRef)(false);var a=(0,d.useState)(null),n=(0,l.default)(a,2),i=n[0],s=n[1];var o=(0,d.useCallback)(function(e){null!==e&&s(e)},[]);return d.default.createElement("div",{className:(0,p.default)(b.default.container,b.default.rteEditor),"data-testid":"product-description",onFocus:function e(){c.current=true},onBlur:function e(){c.current=false}},d.default.createElement(m.default,{editorRef:o,placeholder:(0,f.t)("Add description..."),initialContent:t,onChange:function e(t){return r(t())},renderMenu:function e(t){var r=(0,v.getRosettaMenuState)({toolbarOptions:C,editor:i,state:t.menuState});var a=(0,v.groupItems)({toolbarOptions:C});var n=r.viewFocused,s=r.selectionType;var o=n||c.current&&"range"===s;return o&&d.default.createElement(m.Tooltip,(0,u.default)({},t,{menuState:r,items:a}))}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/DuplicateProduct.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var v=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var b=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var g=a(r("./common/temp/node_modules/react/index.js"));var C=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var h=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var y=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var P=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var x=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var _=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var w=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx");var E=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx");var j=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useSaveProduct.tsx"));var A=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var S=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var O=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var I=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var T=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));function n(e){var t=e.isNewProduct;var r=(0,_.useProductContext)(),c=r.product,i=r.isDirty,u=r.composerOpenedAt;var a=(0,w.useViewStateContext)(),l=a.showLoadingMessage,d=a.clearLoadingMessage;var n=(0,E.useLifeCycleHooksContext)(),p=n.lifeCycleHooks;var s=(0,A.useConfirmModal)(),m=s.showConfirmModal;var o=(0,j.default)(t),f=o.saveProduct;if(!c)return null;return g.default.createElement("div",{className:T.default.container},g.default.createElement(C.default,{flush:true},g.default.createElement(h.Button.Tertiary,{onClick:(0,b.default)(v.default.mark(function e(){var r,a,n,s,o;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!i()){t.next=12;break}t.next=3;return m({title:(0,y.t)("Duplicate Product"),message:(0,y.t)("Would you like to save and duplicate this product?"),confirmLabel:(0,y.t)("Save and Duplicate")});case 3:r=t.sent;if(r){t.next=6;break}return t.abrupt("return");case 6:t.next=8;return f();case 8:a=t.sent;n=a.encounteredErrors;if(!n){t.next=12;break}return t.abrupt("return");case 12:l((0,y.t)("Duplicating Product"));t.next=15;return(0,x.duplicateProduct)(c.id);case 15:s=t.sent;o=(0,I.default)(c.productType);if(o){(0,S.trackDuplicateProduct)({oldProductId:c.id,newProductId:s.id,productType:o,productName:c.name,productEditor:O.ProductEditor.PRODUCT_COMPOSER_V1});(0,S.trackAddProduct)({productId:s.id,productType:o,productName:c.name,productEditor:O.ProductEditor.PRODUCT_COMPOSER_V1,timeElapsed:Date.now()-u})}d();p.onDuplicateButtonClick(s,c);case 20:case"end":return t.stop()}},e)})),animationDirection:"none","data-testid":"pc-duplicate-button"},g.default.createElement(P.T,{project:"commerce-product-composer"},"Duplicate"))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/FeaturedProduct.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=f;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=a(r("./common/temp/node_modules/react/index.js"));var o=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var c=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var i=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var u=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var l=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var d=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var p=(0,l.withFocusManagedDivider)(u.Cell,u.Divider);var m=function e(t){return s.default.createElement(p,(0,n.default)({as:"label"},t))};function f(){var e=(0,d.useProductContext)(),r=e.patchProduct,t=e.product;if(!t)return null;return s.default.createElement(i.Box,{mt:4},s.default.createElement(m,{label:(0,c.t)("Featured Product"),interiorAccessory:s.default.createElement(u.Toggle,{checked:t.featuredProduct,onChange:function e(t){return r({featuredProduct:t})}})}),s.default.createElement(i.Text.Caption,null,s.default.createElement(o.T,{project:"commerce-product-composer"},"Featured Products can be displayed in Summary Blocks on your page")))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/FileUploader/EmptyState.less":function(e,t,r){e.exports={fileInput:"_1_alwEeXx"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/FileUploader/EmptyState.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var i=a(r("./common/temp/node_modules/react/index.js"));var u=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var l=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var d=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var p=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/FileUploader/EmptyState.less"));function n(e){var r=e.handleFileUpload;var t=i.default.useState(false),a=(0,c.default)(t,2),n=a[0],s=a[1];var o=i.default.useRef(null);return i.default.createElement(d.FileDropZone,{multiple:false,onDragEnter:function e(){return s(true)},onDragLeave:function e(){return s(false)},onDrop:function e(t){s(false);r([t])}},i.default.createElement(l.Flex,{backgroundColor:n?"gray.600":"gray.900",height:"sizes.400",width:"100%",alignItems:"center",justifyContent:"center",sx:{cursor:"pointer"},onClick:function e(){var t;null===(t=o.current)||void 0===t?void 0:t.click()}},i.default.createElement(u.Upload,{color:"gray.400",sx:{marginRight:1,size:16}}),i.default.createElement(l.Text.Label,{htmlFor:"productComposerDigitalFileUpload",onClick:function e(t){t.stopPropagation()},sx:{cursor:"pointer"}},i.default.createElement(p.T,{project:"commerce-product-composer"},"Upload File")),i.default.createElement("input",{id:"productComposerDigitalFileUpload",ref:o,type:"file",className:m.default.fileInput,onChange:function e(t){t.stopPropagation();t.target.files&&r(Array.from(t.target.files))}})))}var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/FileUploader/FileUploader.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var v=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var b=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var g=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var C=a(r("./common/temp/node_modules/react/index.js"));var n=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var h=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var y=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var P=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var x=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useFileUpload.ts"));var _=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var w=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var E=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/FileUploader/EmptyState.tsx"));var j=r("./src/main/webapp/universal/src/shared/i18n/index.ts");function A(e){return!!e&&e.productType===n.default.DIGITAL}function s(){var e=(0,_.useProductContext)(),a=e.product,n=e.patchProduct;var t=a,r=t.digitalGood;var s=(0,x.default)(),o=s.isUploading,c=s.uploadProgress,i=s.handleFileUpload;var u=C.default.useState(r?[r]:[]),l=(0,g.default)(u,2),d=l[0],p=l[1];if(!A(a))return null;var m=function(){var r=(0,b.default)(v.default.mark(function e(r){return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return i(r);case 2:p([{filename:r[0].name,id:""}]);case 3:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();var f;f=o?C.default.createElement("div",null,(0,j.t)("Current progress: {uploadProgress}%",{uploadProgress:c})):d.length>0?C.default.createElement(C.default.Fragment,null,C.default.createElement(h.Flex,{backgroundColor:"gray.900",height:"sizes.400",width:"100%",alignItems:"center",justifyContent:"center"},C.default.createElement(h.Text.Label,null,d[0].filename)),C.default.createElement(y.default,{flush:true},C.default.createElement(h.Flex,{width:"100%",justifyContent:"space-between"},C.default.createElement(h.Button.Danger,{animationDirection:"none",onClick:(0,b.default)(v.default.mark(function e(){var r;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,w.deleteDigitalGoods)(a.id);case 2:r=t.sent;if(r){n({hasDigitalGoods:false});p([])}case 4:case"end":return t.stop()}},e)}))},C.default.createElement(P.T,{project:"commerce-product-composer"},"Remove"))))):C.default.createElement(E.default,{handleFileUpload:m});return C.default.createElement(h.Box,null,C.default.createElement(h.Text.Subtitle,null,C.default.createElement(P.T,{project:"commerce-product-composer"},"File")),f,C.default.createElement(h.Text.Caption,null,C.default.createElement(P.T,{project:"commerce-product-composer"},"Customers receive a secure link to the file lasting 24 hours after the first download.")))}var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/GiftCardVariantTable.less":function(e,t,r){e.exports={tableCell:"_3Al-nG7OK",tableGrid:"_2xY1yfbdo",tableHeaderCell:"NGfJgL2JC",mainImage:"_3zHmSgFOD",skuCell:"_1Quq8lMzF",priceCell:"pOnPNt5Y5",rightAligned:"_2-YjXYXcg",addVariantButton:"_2fkXe0xPN",moreMenu:"_37NlBRHaP"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/GiftCardVariantTable.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var P=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var x=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var _=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var w=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var E=a(r("./common/temp/node_modules/react/index.js"));var j=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var A=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var S=a(r("./common/temp/node_modules/classnames/index.js"));var O=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/index.tsx"));var I=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var T=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var k=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var F=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var D=a(r("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js"));var R=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var M=r("./src/main/webapp/universal/src/shared/constants/UploadMimeTypes.js");var N=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/MainImageCell.tsx"));var V=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/PriceCell.tsx"));var q=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SkuCell.tsx"));var B=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionListWrapper.tsx"));var L=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/generateVariants.ts");var U=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/GiftCardVariantTable.less"));var G=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/SharedStyles.less"));var W=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var Y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");function n(e){var t=e.variants,i=e.patchVariant;var r=E.default.useState(null),a=(0,w.default)(r,2),u=a[0],l=a[1];var n=E.default.useState(null),s=(0,w.default)(n,2),o=s[0],d=s[1];var c=E.default.useState(null),p=(0,w.default)(c,2),m=p[0],f=p[1];var v=E.default.useRef(null);var b=(0,R.useProductContext)(),g=b.product,C=b.patchProduct;var h=(0,Y.useConfirmModal)(),y=h.showConfirmModal;if(!g)return null;return E.default.createElement("div",{"data-test":"gift-card-variant-table"},E.default.createElement("div",{className:U.default.tableGrid},E.default.createElement("div",{className:U.default.tableHeaderCell},E.default.createElement(A.T,{project:"commerce-product-composer"},"Image")),E.default.createElement("div",{className:U.default.tableHeaderCell},E.default.createElement(A.T,{project:"commerce-product-composer"},"SKU")),E.default.createElement("div",{className:(0,S.default)(U.default.tableHeaderCell,U.default.rightAligned)},E.default.createElement(A.T,{project:"commerce-product-composer"},"Amount")),E.default.createElement("div",{className:(0,S.default)(U.default.tableHeaderCell)}),t.map(function(e){var t;var a=e.id,r=e.mainImage,n=e.sku,s=e.price,o=e.salePrice,c=e.onSale;return E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:U.default.tableCell},E.default.createElement(N.default,{mainImage:r,onUpload:function e(){if(g.images.length>0)l(a);else{var t;d(a);null===(t=v.current)||void 0===t?void 0:t.click()}},onReplace:function e(){return l(a)},onRemove:function e(){return i(a,{mainImage:void 0})}}),E.default.createElement(O.default,{isOpen:u===a,onClose:function e(){l(null);d(null);f(null)},onSave:function e(t){return i(a,{mainImage:t})},onUpdateImages:function e(t){return C({images:t})},images:g.images,mainImageId:null!==(t=null===r||void 0===r?void 0:r.id)&&void 0!==t?t:null,productId:g.id,productName:g.name,productType:g.productType,productEditor:I.ProductEditor.PRODUCT_COMPOSER_V1,variantId:a,firstImage:m})),E.default.createElement("div",{className:U.default.skuCell},E.default.createElement(q.default,{sku:n,onChange:function e(t){return i(a,{sku:t})}})),E.default.createElement("div",{className:U.default.priceCell},E.default.createElement(V.default,{price:s,salePrice:o,onSale:c,onChange:function e(t,r){if(t.isZero())return;i(a,{price:t,salePrice:r})}})),E.default.createElement("div",{"data-test":"gift-card-variant-more",className:U.default.moreMenu},g.variants.length>1&&E.default.createElement(B.default,null,E.default.createElement(B.default.ButtonDanger,{"data-test":"gift-card-variant-delete",onClick:(0,_.default)(x.default.mark(function e(){var r;return x.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return y({title:(0,j.t)("Delete Product Variant"),message:(0,j.t)("Are you sure you wish to delete this variant?"),confirmLabel:(0,j.t)("Delete")});case 2:r=t.sent;r&&C({variants:g.variants.filter(function(e){return e.id!==a})});case 4:case"end":return t.stop()}},e)}))},E.default.createElement(A.T,{project:"commerce-product-composer"},"Delete")))))}),E.default.createElement("label",{htmlFor:"variantImageUpload"},E.default.createElement("input",{id:"variantImageUpload",type:"file",onChange:function(){var t=(0,_.default)(x.default.mark(function e(r){var a;return x.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r.stopPropagation();a=r.target.files;a&&f(a[0]);l(o);case 4:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),accept:Object.values(M.IMAGE_MIME_TYPES).join(),multiple:false,ref:v,className:G.default.srOnly}))),E.default.createElement(T.default,{flush:true,icon:E.default.createElement(F.Plus,{className:U.default.addVariantButton})},E.default.createElement(k.Button.Tertiary,{animationDirection:"none",onClick:function e(){var t;var r=g.variants[g.variants.length-1];t=r?(0,L.generateGiftCardVariant)(r.price.add(W.default.fromJson({currencyCode:D.default.getStoreCurrency(),decimalValue:"25.00"}))):(0,L.generateGiftCardVariant)(W.default.fromJson({currencyCode:D.default.getStoreCurrency(),decimalValue:"25.00"}));C({variants:[].concat((0,P.default)(g.variants),[t])})}},E.default.createElement(A.T,{project:"commerce-product-composer"},"Add"))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/EditMetadataModal.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var b=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var g=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var C=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var h=a(r("./common/temp/node_modules/react/index.js"));var y=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var P=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var x=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var _=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var w=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var E=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");function s(e){var a=e.productId,n=e.imageId,r=e.onClose;var t=(0,h.useState)(""),s=(0,C.default)(t,2),o=s[0],c=s[1];var i=(0,h.useState)(false),u=(0,C.default)(i,2),l=u[0],d=u[1];var p=(0,h.useState)(false),m=(0,C.default)(p,2),f=m[0],v=m[1];(0,h.useEffect)(function(){var e=function(){var t=(0,g.default)(b.default.mark(function e(){var r;return b.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,E.getProduct)(a);case 2:r=t.sent;c(r.images.filter(function(e){return e.id===n})[0].title||"");v(true);case 5:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();e()},[]);return h.default.createElement(w.default,{isDirty:l,onClose:r,onSave:(0,g.default)(b.default.mark(function e(){return b.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,E.putProductItemImage)(a,n,{title:o});case 2:r();case 3:case"end":return t.stop()}},e)})),title:(0,P.t)("Edit Metadata")},f?h.default.createElement(w.default.Section,null,h.default.createElement(_.Text.Label,{mb:2,htmlFor:"productComposerImageMetadata"},h.default.createElement(y.T,{project:"commerce-product-composer"},"Alt Text")),h.default.createElement(x.TextInput,{id:"productComposerImageMetadata","aria-describedby":"editAltTextCaption",placeholder:(0,P.t)("Add..."),value:o,onChange:function e(t){c(t);d(true)}}),h.default.createElement(x.Divider,null),h.default.createElement(_.Text.Caption,{mt:1,mb:6,id:"editAltTextCaption"},h.default.createElement(y.T,{project:"commerce-product-composer"},"Adding alt text to images is a great way to give your site an SEO boost and make it more accessible."))):h.default.createElement(_.Flex,{alignItems:"center",justifyContent:"center",py:8},h.default.createElement(x.ActivityIndicator,null)))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/EmptyState.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var c=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");function i(e){var t=e.isDraggingImage,r=e.onClick,a=e.label;return n.default.createElement(o.Flex,{backgroundColor:t?"gray.600":"gray.900",height:"calc(7 * ".concat(c.space[4],")"),width:"100%",alignItems:"center",justifyContent:"center",onClick:r,sx:{cursor:"pointer"}},n.default.createElement(s.Upload,{color:"gray.400",sx:{marginRight:1,size:16}}),n.default.createElement(o.Text.Label,{sx:{cursor:"pointer"}},a))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/Image.less":function(e,t,r){e.exports={container:"_2_2-JWQ1N",isDragging:"A9NTCYdzB",dragProxy:"XuIIxi7qW",moreMenuButton:"_2gYIO7r-x",image:"_3s-OQryYR",isProcessing:"_3zmyF6Z-4",moreMenu:"GIKk-X8lN"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/Image.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var E=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var j=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var A=a(r("./common/temp/node_modules/react/index.js"));var S=a(r("./common/temp/node_modules/classnames/index.js"));var n=a(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var O=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var I=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var T=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var k=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var F=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionListWrapper.tsx"));var D=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/Image.less"));var R=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ProgressBar.tsx"));function M(e){var t=e.mediaProcessingState;return t===n.default.QUEUED}function s(e){var t=e.productId,n=e.image,r=e.dragState,a=e.onSetShowImageEditorForImage,s=e.onSetShowEditMetadataForImage;var o=r.isDragging;var c=(0,k.useProductContext)(),i=c.product,u=c.patchProduct,l=c.patchVariant;var d=A.default.useState(false),p=(0,j.default)(d,2),m=p[0],f=p[1];var v=A.default.useState(),b=(0,j.default)(v,2),g=b[0],C=b[1];var h=A.default.useCallback(function(e){C(e)},[]);var y=A.default.useState(n.focalPoint),P=(0,j.default)(y,2),x=P[0],_=P[1];var w=function e(r){if(!(null!==i&&void 0!==i&&i.variants))return;i.variants.forEach(function(e){var t;(null===(t=e.mainImage)||void 0===t?void 0:t.id)===r&&l(e.id,{mainImage:void 0})})};if(!i)return null;return A.default.createElement("div",{className:(0,S.default)(D.default.container,(0,E.default)({},D.default.isDragging,o)),onMouseEnter:function e(){return f(true)},onMouseLeave:function e(){return f(false)}},A.default.createElement("div",{ref:h,className:(0,S.default)(D.default.image,(0,E.default)({},D.default.isProcessing,M(n))),style:{backgroundImage:'url("'.concat(n.urls.https,'")')},role:"img","data-testid":"pc-image-gallery-image","data-test":"pc-image-gallery-image"}),g&&A.default.createElement(O.FocalPoint,{visible:m&&!M(n),imageNodeGetter:function e(){return g},onChange:function e(t){var r=t.x,a=t.y;(0,T.updateFocalPoint)(i.id,n.id,r,a);_({x:r,y:a})},x:x.x,y:x.y,hideTooltip:true}),!!n.processingProgress&&A.default.createElement(R.default,{percentage:n.processingProgress}),A.default.createElement("div",{className:(0,S.default)(D.default.moreMenuButton),"data-testid":"pc-action-list-button"},A.default.createElement(F.default,null,A.default.createElement(F.default.Button,{onClick:a,"data-testid":"pc-image-edit-image-button"},A.default.createElement(I.T,{project:"commerce-product-composer"},"Edit Image")),A.default.createElement(F.default.Button,{onClick:s,"data-testid":"pc-image-edit-metadata-button"},A.default.createElement(I.T,{project:"commerce-product-composer"},"Edit Metadata")),A.default.createElement(F.default.ButtonDanger,{onClick:function e(){w(n.id);(0,T.deleteProductImage)(t,n.id);u({images:i.images.filter(function(e){var t=e.id;return t!==n.id})})},"data-testid":"pc-image-delete-button"},A.default.createElement(I.T,{project:"commerce-product-composer"},"Delete")))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/ImageGallery.less":function(e,t,r){e.exports={container:"u3ZLbSclS",fileInputContainer:"VnXgal_iS",fileInput:"_2DMzrm4Z3",grid:"_1w7Cffcwo"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/ImageGallery.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var y=n(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var P=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var x=a(r("./common/temp/node_modules/react/index.js"));var _=n(r("./common/temp/node_modules/classnames/index.js"));var w=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var m=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var E=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var j=n(r("./src/main/webapp/universal/src/apps/App/shared/components/ImageEditor/index.js"));var A=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var S=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useProductImageUpload.ts"));var O=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ImageApi.ts");var I=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/EditMetadataModal.tsx"));var T=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/Image.tsx"));var k=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/UploadImageTile.tsx"));var F=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/ImageGallery.less"));var D=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/Image.less"));var R=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var M=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/EmptyState.tsx"));var f=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Thumbnail.tsx"));function v(e){var t=e.images,a=e.productId,r=e.isDraggingImage;var n=(0,x.useState)(null),s=(0,P.default)(n,2),o=s[0],c=s[1];var i=(0,x.useState)(null),u=(0,P.default)(i,2),l=u[0],d=u[1];var p=(0,x.useRef)(null);var m=(0,A.useProductContext)(),f=m.patchProduct;var v=(0,S.default)(),b=v.handleImageUpload,g=v.handleImageReplace;var C=0===t.length;function h(t,e,r){return x.default.createElement(T.default,{productId:a,image:t,dragState:r,onSetShowImageEditorForImage:function e(){return c(t)},onSetShowEditMetadataForImage:function e(){return d(t)}})}return x.default.createElement(x.default.Fragment,null,o&&x.default.createElement(j.default,{imageSrc:o.urls.https,onSave:function e(t){g(t,o.id);c(null)},onCancel:function e(){return c(null)},isOpen:true}),l&&x.default.createElement(I.default,{imageId:l.id||"",productId:a,onClose:function e(){return d(null)}}),x.default.createElement("div",{className:(0,_.default)(R.default.container,F.default.container)},x.default.createElement(E.ReorderableGroup,{className:F.default.grid,childItems:t,extraChildItems:!C&&x.default.createElement(k.default,{isDraggingImage:r}),getChildKeyFromItem:function e(t){return t.id},childItemRenderer:h,proxyClassName:D.default.dragProxy,onReorder:function e(t,r){f({images:(0,y.default)(r)})}},C&&x.default.createElement(x.default.Fragment,null,x.default.createElement(M.default,{label:(0,w.t)("Add Images"),onClick:function e(){var t;return null===(t=p.current)||void 0===t?void 0:t.click()},isDraggingImage:r}),x.default.createElement("label",{htmlFor:"productComposerFileUpload",className:F.default.fileInputContainer},x.default.createElement("input",{id:"productComposerFileUpload",className:F.default.fileInput,accept:O.ACCEPTED_IMAGE_TYPES_STRING,type:"file",multiple:true,ref:p,onChange:function e(t){var r=t.target.files;r&&b(Array.from(r))}}))))))}function s(e){var t=e.images,r=e.productId,a=e.collectionId;var n=0===t.length;var s=(0,S.default)(),o=s.handleImageUpload;var c=(0,x.useState)(false),i=(0,P.default)(c,2),u=i[0],l=i[1];var d=(0,A.useProductContext)(),p=d.product;return x.default.createElement(x.default.Fragment,null,x.default.createElement(E.FileDropZone,{onDrop:function e(t){t instanceof Array?o(t):o([t]);l(false)},onDragEnter:function e(){return l(true)},onDragLeave:function e(){return l(false)},validMimeTypes:O.ACCEPTED_IMAGE_TYPES,multiple:true},x.default.createElement(v,{images:t,productId:r,isDraggingImage:u})),(!n||!!(null!==p&&void 0!==p&&p.thumbnailImage))&&x.default.createElement(m.Box,{mt:1,mb:5},x.default.createElement(f.default,{productId:r,collectionId:a})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/UploadImageTile.less":function(e,t,r){e.exports={container:"_1BOtwSRQC",uploadTile:"_3W-t4wMSw",isFocused:"_7tFkEp1bA",isDraggingImage:"_11bdeLUnA",fileInput:"_1QRvEeiZ-",icon:"_2qMirYyP0"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/UploadImageTile.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=a(r("./common/temp/node_modules/classnames/index.js"));var m=a(r("./common/temp/node_modules/@sqs/core-components/primitives/Icon.js"));var f=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useProductImageUpload.ts"));var v=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ImageApi.ts");var b=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/UploadImageTile.less"));function n(e){var t;var r=e.isDraggingImage;var a=d.default.useState(false),n=(0,l.default)(a,2),s=n[0],o=n[1];var c=(0,f.default)(),i=c.handleImageUpload;return d.default.createElement("div",{className:b.default.container},d.default.createElement("label",{htmlFor:"productComposerFileUpload",className:(0,p.default)(b.default.uploadTile,(t={},(0,u.default)(t,b.default.isFocused,s),(0,u.default)(t,b.default.isDraggingImage,r),t))},d.default.createElement(m.default,{name:"stepperPlus",className:b.default.icon}),d.default.createElement("input",{id:"productComposerFileUpload",className:b.default.fileInput,accept:v.ACCEPTED_IMAGE_TYPES_STRING,type:"file",multiple:true,onFocus:function e(){o(true)},onBlur:function e(){o(false)},onChange:function e(t){var r=t.target.files;r&&i(Array.from(r))}})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/VariantImageGallery.less":function(e,t,r){e.exports={imageContainer:"_1C5pZB8mn",image:"_2Qi87-p4a"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/VariantImageGallery.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var P=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var x=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var _=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var w=a(r("./common/temp/node_modules/react/index.js"));var E=a(r("./common/temp/node_modules/classnames/index.js"));var j=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var A=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var S=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var O=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var I=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var T=r("./src/main/webapp/universal/src/shared/constants/UploadMimeTypes.js");var k=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/EmptyState.tsx"));var F=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/index.tsx"));var D=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var R=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/VariantImageGallery.less"));var M=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/ImageGallery.less"));var N=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var V=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/SharedStyles.less"));var q=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var B=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackVariantImages.ts");function n(e){var t,r;var a=e.variant;var n=w.default.useState(false),s=(0,_.default)(n,2),o=s[0],c=s[1];var i=w.default.useState(null),u=(0,_.default)(i,2),l=u[0],d=u[1];var p=w.default.useState(false),m=(0,_.default)(p,2),f=m[0],v=m[1];var b=w.default.useRef(null);var g=(0,D.useProductContext)(),C=g.product,h=g.patchProduct,y=g.patchVariant;if(!C)return null;return w.default.createElement("div",{className:(0,E.default)(N.default.container,M.default.container)},a.mainImage?w.default.createElement(w.default.Fragment,null,w.default.createElement("div",{className:R.default.imageContainer},w.default.createElement("img",{className:R.default.image,src:a.mainImage.urls.https})),w.default.createElement("div",{className:N.default.fields},w.default.createElement(j.default,null,w.default.createElement(A.Flex,{width:"100%",justifyContent:"space-between"},w.default.createElement(A.Button.Tertiary,{animationDirection:"none",onClick:function e(){return c(true)}},w.default.createElement(O.T,{project:"commerce-product-composer"},"Replace")),w.default.createElement(A.Button.Danger,{animationDirection:"none",onClick:function e(){var t;null!==(t=a.mainImage)&&void 0!==t&&t.id&&(0,B.trackRemoveVariantImage)({imageId:a.mainImage.id,productId:C.id,variantId:a.id,productEditor:q.ProductEditor.PRODUCT_COMPOSER_V1});y(a.id,{mainImage:void 0})}},w.default.createElement(O.T,{project:"commerce-product-composer"},"Remove")))))):w.default.createElement(S.FileDropZone,{onDrop:function e(t){t&&d(t);c(true);v(false)},onDragEnter:function e(){return v(true)},onDragLeave:function e(){return v(false)},validMimeTypes:T.IMAGE_MIME_TYPES,multiple:false},w.default.createElement(k.default,{onClick:function e(){var t;return C.images.length>0?c(true):null===(t=b.current)||void 0===t?void 0:t.click()},label:(0,I.t)("Add Images"),isDraggingImage:f})),w.default.createElement(F.default,{isOpen:o,onClose:function e(){c(false);d(null)},onSave:function e(t){return y(a.id,{mainImage:t})},onUpdateImages:function e(t){return h({images:t})},images:C.images,mainImageId:null!==(t=null===(r=a.mainImage)||void 0===r?void 0:r.id)&&void 0!==t?t:null,productId:C.id,productName:C.name,productType:C.productType,productEditor:q.ProductEditor.PRODUCT_COMPOSER_V1,variantId:a.id,firstImage:l}),w.default.createElement("label",{htmlFor:"variantImageUpload"},w.default.createElement("input",{id:"variantImageUpload",type:"file",onChange:function(){var t=(0,x.default)(P.default.mark(function e(r){var a;return P.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r.stopPropagation();a=r.target.files;a&&d(a[0]);c(true);case 4:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),accept:Object.values(T.IMAGE_MIME_TYPES).join(),multiple:false,ref:b,className:V.default.srOnly})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/ImageGallery.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Inventory.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var d=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var p=a(r("./common/temp/node_modules/react/index.js"));var m=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var v=n(r("./common/temp/node_modules/@sqs/core-components/fields/BooleanField.js"));var b=n(r("./common/temp/node_modules/@sqs/core-components/fields/NumberField.js"));var g=n(r("./common/temp/node_modules/@sqs/core-components/fields/StringField.js"));var C=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var h=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var y=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/validation/sku.ts"));var P=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/calculateStockQuantity.ts"));var x=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useSubscription.ts"));var _=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/anchorLinks.ts"));(0,m.t)("Unlimited Quantity");function s(e){var a=e.stock,t=e.sku,n=e.onChangeStock,r=e.onChangeSku;var s=(0,p.useState)(0),o=(0,d.default)(s,2),c=o[0],i=o[1];var u=(0,x.default)(),l=u.hasSubscription;(0,p.useEffect)(function(){a.unlimited||i(a.quantity)},[]);return p.default.createElement("div",{className:C.default.container,"data-anchor":_.default.INVENTORY},p.default.createElement(h.Text.Subtitle,null,p.default.createElement(f.T,{project:"commerce-product-composer"},"Inventory")),p.default.createElement("div",{className:C.default.fields},!l&&p.default.createElement(v.default,{label:(0,m.t)("Unlimited Quantity"),value:a.unlimited,onChange:function e(t){var r=a.quantity||0;n({unlimited:t,quantity:r});i(r)}}),!a.unlimited&&!l&&p.default.createElement(b.default,{label:(0,m.t)("Quantity"),value:c,onChange:function e(t){var r=(0,P.default)(t);i(r);n({unlimited:false,quantity:r})},onBlur:function e(t){var r=t.target.value;if(!r){i(0);n({unlimited:false,quantity:0})}},rightAlign:true,min:0}),p.default.createElement(g.default,{label:(0,m.t)("SKU"),placeholder:(0,m.t)("Add..."),value:t,onChange:function e(t){r((0,y.default)(t))},rightAlign:true})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Name.less":function(e,t,r){e.exports={nameField:"_35coSsSBR"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Name.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=d;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./common/temp/node_modules/classnames/index.js"));var o=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var c=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Name.less"));var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var l=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/anchorLinks.ts"));function d(e){var t=e.name,r=e.onChange;return n.default.createElement("div",{className:(0,s.default)(u.default.container,i.default.nameField),"data-testid":"product-name","data-test":"product-name","data-anchor":l.default.DETAILS},n.default.createElement(o.Textarea,{placeholder:(0,c.t)("Add product name"),value:t,onChange:r,maxLength:200}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Organization.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var o=a(r("./common/temp/node_modules/react/index.js"));var c=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var i=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var l=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var d=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/TagField.tsx"));var p=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Visibility/index.tsx"));var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Categories/Categories.tsx"));var f=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");var v=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var b=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/anchorLinks.ts"));function g(e){return e.map(function(e){return{text:e}})}function n(e){var a=e.product,n=e.patchProduct,t=e.isNewProduct;var r=(0,v.useConfirmModal)(),s=r.showConfirmModal;return o.default.createElement("div",{className:u.default.container,"data-anchor":b.default.ORGANIZATION},o.default.createElement(l.Text.Subtitle,null,o.default.createElement(c.T,{project:"commerce-product-composer"},"Organization")),!t&&o.default.createElement(p.default,{onChange:function e(t){n({visibility:t})},visibility:a.visibility}),o.default.createElement(m.default,{categories:a.categories}),o.default.createElement(d.default,{onChange:function e(t){var r=t.value;if(r.length>a.tags.length&&r.length>f.MAX_TAG_COUNT){s({isCancellable:false,title:(0,i.t)("Cannot add tag"),message:(0,i.t)("Product cannot have more than {maxTags} tags.",{maxTags:f.MAX_TAG_COUNT}),confirmLabel:(0,i.t)("Okay")});return}n({tags:r.map(function(e){return e.text})})},tags:g(a.tags)}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Pricing.less":function(e,t,r){e.exports={originalPrice:"_1r-XqsKU-"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Pricing.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var u=a(r("./common/temp/node_modules/react/index.js"));var l=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var d=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var p=a(r("./common/temp/node_modules/@sqs/core-components/fields/BooleanField.js"));var m=a(r("./common/temp/node_modules/classnames/index.js"));var f=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var v=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Pricing.less"));var b=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var g=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/MoneyFieldWithCurrency.tsx"));var C=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/calculatePrice.ts");var h=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");function n(e){var a=e.onSale,r=e.price,n=e.salePrice,s=e.onChangePrice,o=e.onChangeSalePrice,c=e.onChangeOnSale;return u.default.createElement("div",{className:f.default.container},u.default.createElement(b.Text.Subtitle,null,u.default.createElement(d.T,{project:"commerce-product-composer"},"Pricing")),u.default.createElement("div",{className:f.default.fields},u.default.createElement(g.default,{max:h.MAX_PRICE,className:(0,m.default)((0,i.default)({},v.default.originalPrice,a)),label:(0,l.t)("Price"),value:r.value,onChange:function e(t){var r=(0,C.getPriceAndSalePrice)(t,n,a);s(r.price,r.sale)},rightAlign:true,"data-test":"pc-price-input"}),u.default.createElement(p.default,{label:(0,l.t)("On Sale"),value:a,onChange:function e(t){return c(t)},"data-test":"pc-onSale-label"}),a&&u.default.createElement(g.default,{max:h.MAX_PRICE,label:(0,l.t)("Sale Price"),value:n.value,onChange:function e(t){o((0,C.getSalePrice)(t,r))},errors:1===n.compare(r)?{message:(0,l.t)("Sale price must be less than the regular price.")}:null,rightAlign:true,placeholder:(0,l.t)("0.00"),"data-test":"pc-salePrice-input"})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/PublishOnModal/PublishOnModal.less":function(e,t,r){e.exports={mobileToolbar:"m_Fskt4Dk"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/PublishOnModal/PublishOnModal.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var m=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var f=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var v=a(r("./common/temp/node_modules/react/index.js"));var b=n(r("./common/temp/node_modules/classnames/index.js"));var g=n(r("./common/temp/node_modules/moment/moment.js"));var C=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var h=n(r("./common/temp/node_modules/@sqs/core-components/navigation/Toolbar.js"));var y=n(r("./common/temp/node_modules/@sqs/core-components/fields/DateTimeField.js"));var P=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var x=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var _=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var w=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.tsx"));var E=r("./src/main/webapp/universal/src/shared/types/Visibility.ts");var j=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));var A=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/PublishOnModal/PublishOnModal.less"));function s(e){var t;var r=e.onCancel,a=e.onSave;var n=(0,j.default)(),s=n.isMobile;var o=(0,_.useProductContext)(),c=o.product,i=o.patchProduct;var u=(0,v.useState)((null===c||void 0===c?void 0:null===(t=c.visibility)||void 0===t?void 0:t.visibleOn)||new Date),l=(0,f.default)(u,2),d=l[0],p=l[1];if(!c)return null;return v.default.createElement(w.default,{isFullScreen:s,isOpen:true,onRequestClose:r},v.default.createElement(C.Box,{pt:3,px:2,pb:10,width:s?"100%":"400px"},v.default.createElement(h.default,{className:(0,b.default)((0,m.default)({},A.default.mobileToolbar,s))},v.default.createElement(h.default.Left,null,v.default.createElement(C.Button.Tertiary,{onClick:r,animationDirection:"none"},v.default.createElement(x.T,{project:"commerce-product-composer"},"Cancel"))),v.default.createElement(h.default.Center,null),v.default.createElement(h.default.Right,null,v.default.createElement(C.Button.Tertiary,{onClick:function e(){if(!d)return;i({visibility:{visibleOn:d,state:E.VisibilityState.SCHEDULED}});a()},animationDirection:"none"},v.default.createElement(x.T,{project:"commerce-product-composer"},"Apply")))),v.default.createElement(C.Text.Title,{mt:6,px:3,as:"time"},(0,P.formatDateTime)(d.getTime(),"MMM DD, YYYY hh:mm A")),v.default.createElement(y.default,{value:d.getTime(),onChange:function e(t){p(new Date(t))},disable:[{before:(0,g.default)().subtract(1,"days").valueOf()}]})))}var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/PublishOnModal/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/PublishOnModal/PublishOnModal.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/EditSearchModal.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var E=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var j=a(r("./common/temp/node_modules/react/index.js"));var A=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var o=n(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var c=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var S=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var O=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/TextareaField.tsx"));var I=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var i=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/NeedsProduct.tsx"));var T=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/UrlInput.tsx"));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),true).forEach(function(e){(0,s.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var F=c.legacyV6Flags.isFeatureEnabled(o.default.NESTED_CATEGORIES);function l(e){var t,r,a,n;var s=e.onClose;var o=(0,I.useProductContext)();var c=o.patchProduct;var i=(0,I.useProductContext)().product;var u=(0,j.useState)(i.url.productPath),l=(0,E.default)(u,2),d=l[0],p=l[1];var m=(0,j.useState)(null===(t=i.seoData)||void 0===t?void 0:t.title),f=(0,E.default)(m,2),v=f[0],b=f[1];var g=(0,j.useState)(null===(r=i.seoData)||void 0===r?void 0:r.description),C=(0,E.default)(g,2),h=C[0],y=C[1];var P=d!==i.url.productPath||v!==(null===(a=i.seoData)||void 0===a?void 0:a.title)||h!==(null===(n=i.seoData)||void 0===n?void 0:n.description);var x=F?"p/":"";var _="".concat(i.url.collectionPath).concat(x);var w="".concat(_).concat(d);return j.default.createElement(j.default.Fragment,null,j.default.createElement(S.default,{isDirty:P,onClose:s,onSave:function e(){c({seoData:{title:v,description:h},url:k({},null===i||void 0===i?void 0:i.url,{productPath:d,fullPath:w}),urlId:d});s()},title:(0,A.t)("SEO"),subtitle:(0,A.t)("Search engine optimization (SEO) allows you to improve your ranking in search results.")},j.default.createElement(S.default.Section,null,j.default.createElement(T.default,{label:(0,A.t)("Url"),value:d,path:_,onChange:function e(t){p(t)}}),j.default.createElement(O.default,{label:(0,A.t)("SEO Title"),placeholder:(0,A.t)("Enter a title..."),value:v||"",onChange:function e(t){return b(t)},maxLength:100,showMaxLength:true}),j.default.createElement(O.default,{label:(0,A.t)("SEO Description"),placeholder:(0,A.t)("Enter a description..."),value:h||"",onChange:function e(t){return y(t)},maxLength:400,showMaxLength:true}))))}var d=(0,i.default)(l);t.default=d;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/EditSocialModal.less":function(e,t,r){e.exports={fileInput:"v0uL30oJ7",image:"_3EOXmwza3"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/EditSocialModal.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var O=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var I=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var T=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var k=a(r("./common/temp/node_modules/react/index.js"));var F=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var D=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var R=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var M=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var N=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var V=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/BaseModal.tsx"));var q=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/EmptyState.tsx"));var B=r("./src/main/webapp/universal/src/shared/constants/UploadMaxSize.js");var L=r("./src/main/webapp/universal/src/shared/constants/UploadMimeTypes.js");var U=n(r("./src/main/webapp/universal/src/apps/App/shared/components/ImageEditor/index.js"));var G=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ImageApi.ts");var W=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/EditSocialModal.less"));var s=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ProgressBar.tsx"));var Y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/imageUploader.ts");var z=function e(t){var r=t.previewImage,a=t.processingProgress;return k.default.createElement(R.Flex,{sx:{position:"relative",margin:"auto"},size:"300px",alignItems:"center",justifyContent:"center"},k.default.createElement(M.Image,{sx:{opacity:.5,mt:"2"},className:W.default.image,src:r}),k.default.createElement(s.default,{percentage:100*a}))};function o(e){var t=e.onClose,r=e.onSave,a=e.image;var n=(0,k.useState)(false),s=(0,T.default)(n,2),o=s[0],c=s[1];var i=(0,k.useState)(a),u=(0,T.default)(i,2),l=u[0],d=u[1];var p=(0,k.useState)(false),m=(0,T.default)(p,2),f=m[0],v=m[1];var b=(0,k.useRef)(null);var g=(0,k.useState)(null),C=(0,T.default)(g,2),h=C[0],y=C[1];var P=null===l||void 0===l?void 0:l.urls.https;var x=(0,k.useState)(null),_=(0,T.default)(x,2),w=_[0],E=_[1];var j=function(){if(w)return k.default.createElement(z,{previewImage:w.tempImageUrl,processingProgress:w.progress});if(!P)return k.default.createElement(q.default,{onClick:function e(){var t;return null===(t=b.current)||void 0===t?void 0:t.click()},label:(0,D.t)("Add Image"),isDraggingImage:f});return k.default.createElement(k.default.Fragment,null,k.default.createElement(M.Image,{sx:{mt:"2"},className:W.default.image,src:P}),k.default.createElement(R.Flex,{width:"100%",justifyContent:"space-between"},k.default.createElement(R.Button.Tertiary,{animationDirection:"none",onClick:function e(){return y(l)}},k.default.createElement(F.T,{project:"commerce-product-composer"},"Edit Image")),k.default.createElement(R.Button.Danger,{animationDirection:"none",onClick:function e(){return d(void 0)}},k.default.createElement(F.T,{project:"commerce-product-composer"},"Remove"))),k.default.createElement(M.Divider,null))}();var A=function e(t){(0,Y.createUpload)({file:t,uploadHandler:function e(){c(true);return(0,G.uploadPreviewImage)(t)},onUpdate:function e(t){E(t)},onComplete:function e(t){d(t.focalPointImage);E(null)}})};var S=function(){var r=(0,I.default)(O.default.mark(function e(r){return O.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(r){v(false);A(r)}case 1:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();return k.default.createElement(k.default.Fragment,null,k.default.createElement(V.default,{maxHeight:700,isDirty:o,onClose:t,onSave:function e(){return r(l)},title:(0,D.t)("Social Share"),subtitle:(0,D.t)("If you dont add a social sharing image, well use the item's thumbnail instead")},k.default.createElement(V.default.Section,null,k.default.createElement(R.Text.Label,{mt:6,mb:3},k.default.createElement(F.T,{project:"commerce-product-composer"},"Alternate Social Sharing Image")),k.default.createElement(N.FileDropZone,{onDrop:function e(t){return!w&&S(t)},onDragEnter:function e(){return!P&&v(true)},onDragLeave:function e(){return!P&&v(false)},validMimeTypes:L.IMAGE_MIME_TYPES,maxSize:B.MAX_SIZE,multiple:false},j),k.default.createElement("label",{htmlFor:"productComposerFileUpload"},k.default.createElement("input",{id:"productComposerFileUpload",className:W.default.fileInput,accept:G.ACCEPTED_IMAGE_TYPES_STRING,type:"file",multiple:false,ref:b,onChange:function(){var t=(0,I.default)(O.default.mark(function e(r){var a;return O.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.target.files;a&&A(a[0]);case 2:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()})))),h&&k.default.createElement(U.default,{imageSrc:h.urls.https,onSave:function(){var t=(0,I.default)(O.default.mark(function e(r){return O.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:y(null);A(r);case 2:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),onCancel:function e(){return y(null)},isOpen:true}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/SearchPreview.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var i=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var u=a(r("./common/temp/node_modules/react/index.js"));var l=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var d=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var p=n(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var m=n(r("./common/temp/node_modules/@sqs/core-components/components/SEOPreview.js"));var f=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/EditSearchModal.tsx"));function s(e){var t=e.title,r=e.link,a=e.description;var n=(0,u.useState)(false),s=(0,i.default)(n,2),o=s[0],c=s[1];return u.default.createElement(d.Box,{mt:6},u.default.createElement(m.default,{title:t,link:r,description:a}),u.default.createElement(p.default,{flush:true},u.default.createElement(d.Button.Tertiary,{sx:{marginTop:2},onClick:function e(){return c(true)},animationDirection:"none"},u.default.createElement(l.T,{project:"commerce-product-composer"},"Edit"))),o&&u.default.createElement(f.default,{onClose:function e(){return c(false)}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/SearchSocialPreview.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var h=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var y=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var P=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var x=a(r("./common/temp/node_modules/react/index.js"));var _=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var w=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var E=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var j=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var A=n(r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js"));var S=n(r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js"));var O=r("./src/main/webapp/universal/src/apps/App/shared/utils/StructuredInputUtils.js");var I=r("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/SEOPanel/utils.js");var T=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var k=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var F=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/SearchPreview.tsx"));var D=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/SocialPreview.tsx"));var R=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ContentItemsApi.ts");var M=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/anchorLinks.ts"));var N=(0,_.t)("This description will be automatically generated by search engines. To override that description, enter one below.");function s(){var e,t;var r=(0,x.useState)("seo-and-url"),a=(0,P.default)(r,2),n=a[0],s=a[1];var o=A.default.getState(),c=o.siteTitle,i=o.baseUrl;var u=(0,T.useProductContext)(),l=u.product;var d=(0,x.useState)(),p=(0,P.default)(d,2),m=p[0],f=p[1];(0,x.useEffect)(function(){var e=function(){var t=(0,y.default)(h.default.mark(function e(){var r;var a,n;return h.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(null!==l&&void 0!==l&&null!==(r=l.seoData)&&void 0!==r&&r.seoImageId)){t.next=7;break}t.next=3;return(0,R.getFocalPointImage)(null===l||void 0===l?void 0:null===(a=l.seoData)||void 0===a?void 0:a.seoImageId);case 3:n=t.sent;f(n);t.next=8;break;case 7:f(void 0);case 8:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();e()},[null===l||void 0===l?void 0:null===(e=l.seoData)||void 0===e?void 0:e.seoImageId]);if(!l)return null;var v=function e(){var t;var r=(null===(t=l.seoData)||void 0===t?void 0:t.title)||l.name;var a={"%s":{exampleText:c},"%p":{exampleText:r},"%i":{exampleText:r}};var n=(0,O.buildRegexes)(a);var s=S.default.getState().itemTitleFormat;s=s?(0,I.updateLegacyFormat)(s):"";return(0,O.getPreviewString)(n,a,s)};var b=v();var g="".concat(i).concat(l.url.fullPath);var C=(null===(t=l.seoData)||void 0===t?void 0:t.description)||N;return x.default.createElement("div",{className:k.default.container,"data-anchor":M.default.MARKETING},x.default.createElement(E.Text.Subtitle,null,x.default.createElement(w.T,{project:"commerce-product-composer"},"Marketing")),x.default.createElement(j.Tabs,{options:[{label:(0,_.t)("SEO and URL"),value:"seo-and-url"},{label:(0,_.t)("Social Share"),value:"social-share"}],value:n,onChange:function e(t){return s(t)},fitted:true}),"seo-and-url"===n?x.default.createElement(F.default,{title:b.substring(0,70),link:g,description:C}):x.default.createElement(D.default,{title:b,link:g,description:C,image:m}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/SocialPreview.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=c;var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var m=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var f=a(r("./common/temp/node_modules/react/index.js"));var v=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var b=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var g=n(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var C=n(r("./common/temp/node_modules/@sqs/core-components/components/SocialPreview.js"));var h=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var y=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/EditSocialModal.tsx"));function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),true).forEach(function(e){(0,s.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function c(e){var t;var r=e.title,a=e.link,n=e.description,s=e.image;var o=(0,f.useState)(false),c=(0,m.default)(o,2),i=c[0],u=c[1];var l=(0,h.useProductContext)(),d=l.product,p=l.patchProduct;if(!d)return null;return f.default.createElement(b.Box,{mt:6},f.default.createElement(C.default,{cover:(null===s||void 0===s?void 0:s.urls.https)||(null===(t=d.thumbnailImage)||void 0===t?void 0:t.urls.https),title:r,link:a,description:n}),f.default.createElement(g.default,{flush:true},f.default.createElement(b.Button.Tertiary,{sx:{marginTop:2},onClick:function e(){return u(true)},animationDirection:"none"},f.default.createElement(v.T,{project:"commerce-product-composer"},"Edit"))),i&&f.default.createElement(y.default,{image:s,onClose:function e(){return u(false)},onSave:function e(t){u(false);p({seoData:P({},d.seoData,{seoImageId:null===t||void 0===t?void 0:t.id})})}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/UrlInput.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=d;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=a(r("./common/temp/node_modules/react/index.js"));var n=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var c=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var i=r("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var u=(0,n.withFocusManagedDivider)(o.Cell,o.Divider);var l=function e(t){return s.default.createElement(u,t)};function d(e){var t=e.label,r=e.path,a=e.value,n=e.onChange;return s.default.createElement(s.default.Fragment,null,s.default.createElement(c.Text.Label,null,t),s.default.createElement(l,{body:s.default.createElement(o.TextInput,{onChange:function e(t){n((0,i.createUrlWithSlash)(t))},value:a,maxLength:200}),interiorPre:s.default.createElement(c.Text.Body,{m:0,color:"gray.600"},r)}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/SearchSocialPreview.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less":function(e,t,r){e.exports={formOverride:"pFEr_hebt",panelOverride:"_8WlWjpt3F",fieldHeading:"_3dEabmVJH",fields:"hpiJe-g_m",container:"_7UkcyC03x"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/TagField.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var o=a(r("./common/temp/node_modules/react/index.js"));var c=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var i=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var u=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/TagsApi.ts");var l=a(r("./src/main/webapp/universal/src/apps/Commerce/shared/utils/useFetch.ts"));var d=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var p=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/TagManagerSuggestionWrapper.tsx"));function n(e){var t=e.tags,r=e.onChange;var a=(0,l.default)(u.getAutoCompleteTags),n=a.data,s=void 0===n?[]:n;return o.default.createElement("div",{className:p.default.container},o.default.createElement(d.Text.Label,null,o.default.createElement(i.T,{project:"commerce-product-composer"},"Tags")),o.default.createElement("div",{className:p.default.fields},o.default.createElement(m.default,{value:t,onChange:function e(t){return r({value:t})},showFilter:false,inputPlaceholder:function e(){return(0,c.t)("Add...")},allSuggestions:s.map(function(e){var t=e.text;return t})})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/TagManagerSuggestionWrapper.less":function(e,t,r){e.exports={sortableTag:"_34zL51q3h"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/TagManagerSuggestionWrapper.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=p;var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var b=n(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var g=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var C=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var h=n(r("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var y=a(r("./common/temp/node_modules/react/index.js"));var o=r("./common/temp/node_modules/@sqs/react-sortable-hoc/dist/react-sortable-hoc.umd.js");var P=n(r("./common/temp/node_modules/@sqs/core-components/components/TagManager.js"));var x=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/arrayMove.ts"));var c=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/TagManagerSuggestionWrapper.less"));var i=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),true).forEach(function(e){(0,s.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var l=(0,o.SortableElement)(function(e){var t=e.text,r=(0,h.default)(e,["text"]);return y.default.createElement("div",{className:c.default.sortableTag},y.default.createElement(P.default.Tag,(0,C.default)({},r,{tag:{text:t}})))});var w=function e(t){return y.default.createElement(P.default.TagInput,(0,C.default)({maxLength:i.MAX_TAG_LENGTH},t))};var d=function e(t){var r=t.tag,a=t.index,n=(0,h.default)(t,["tag","index"]);var s=r.text,o=r.key;return y.default.createElement(l,(0,C.default)({},n,{index:a,key:o,text:s}))};var E=(0,o.SortableContainer)(function(e){var t=e.renderTag,r=(0,h.default)(e,["renderTag"]);return y.default.createElement(P.default,(0,C.default)({renderTag:d},r))});function p(e){var n=e.value,s=e.onChange,o=e.allSuggestions,c=e.isMatchingStart,i=e.isIncludingInput,t=e.isReorderable,r=e.helperClass,a=(0,h.default)(e,["value","onChange","allSuggestions","isMatchingStart","isIncludingInput","isReorderable","helperClass"]);var u=(0,y.useState)([]),l=(0,g.default)(u,2),d=l[0],p=l[1];function m(e){var r=e.trim().toLowerCase();var a=n.map(function(e){var t=e.text;return t});if(0===r.length)return[];var t=o.filter(function(e){var t=c?e.toLowerCase().startsWith(r):e.toLowerCase().includes(r);return t&&!a.includes(r)});i&&!t.some(function(e){return e.toLocaleLowerCase()===r})&&(t=[e].concat((0,b.default)(t)));return t}function f(e,t){s(e);p(m(t))}var v=_({value:n,onChange:function e(t){var r=t.value,a=t.inputValue;return f(r,a)},suggestions:d.map(function(e){return{text:e}})},a);if(t)return y.default.createElement(E,(0,C.default)({axis:"xy",onSortEnd:function e(t){var r=t.oldIndex,a=t.newIndex;s((0,x.default)(n,r,a))},helperClass:r},v));return y.default.createElement(P.default,(0,C.default)({renderTagInput:w},v))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Taxes.less":function(e,t,r){e.exports={searchInput:"_2aRnksBtK"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Taxes.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var E=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var j=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var A=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var S=a(r("./common/temp/node_modules/react/index.js"));var s=r("./src/main/webapp/frontend/packages/universal-router/lib/index.js");var O=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");var I=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var f=a(r("./src/main/webapp/frontend/packages/knowledge-base-links/lib/index.js"));var T=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var v=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var k=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var o=n(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var c=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var F=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/SearchChipInput/SearchChipInput.tsx"));var D=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var R=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var p=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmExitProduct.ts"));var m=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useDeleteProduct.tsx"));var b=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx");var M=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var N=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/taxCategoryContext.tsx");var g=n(r("./src/main/webapp/universal/src/apps/Commerce/shared/utils/useFetch.ts"));var C=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));var V=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Taxes.less"));var q=c.ProductEditor.PRODUCT_COMPOSER_V1;function B(e){return{productId:(null===e||void 0===e?void 0:e.id)||null,productType:e?(0,o.default)(e.productType):null}}var h=(0,s.withRouter)(function(e){var n=e.router,s=e.isNewProduct;var t=(0,M.useProductContext)(),o=t.product;var r=(0,m.default)(),c=r.deleteProduct;var a=(0,p.default)(),i=a.confirmExit;var u=(0,b.useLifeCycleHooksContext)(),l=u.lifeCycleHooks;var d=function(){var t=(0,A.default)(j.default.mark(function e(){var r,a;return j.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return i();case 2:r=t.sent;if(r){a=B(o);(0,R.trackTaxCategoryClickCTA)({productId:a.productId,productType:a.productType,productEditor:q});s?c(true):l.onCancelButtonClick();n.redirect("/config/commerce/taxes?source=productComposer")}case 4:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();return S.default.createElement(I.Card,{ml:18,mr:18,"data-test":"tax-panel-intercept"},S.default.createElement(I.Card.Body,null,S.default.createElement(I.Stack,{space:1},S.default.createElement(T.Text.Subtitle,null,S.default.createElement(v.T,{project:"commerce-product-composer"},"Connect a tax extension to automate your rates")),S.default.createElement(T.Text.Body,{m:0},S.default.createElement(v.T,{project:"commerce-product-composer"},"Add a tax extension to automatically calculate the right tax rate for this product.")),S.default.createElement(T.Button.Tertiary,{onClick:d},S.default.createElement(v.T,{project:"commerce-product-composer"},"Add Extension")))))});function y(e){var t=e.taxCategory;var r=(0,N.useProductTaxCategoryContext)(),a=r.setTaxCategory,n=r.setOriginalTaxCategory;var s=(0,M.useProductContext)(),o=s.product;var c=S.default.useState(t),i=(0,E.default)(c,2),u=i[0],l=i[1];var d=S.default.useState(""),p=(0,E.default)(d,2),m=p[0],f=p[1];var v=S.default.useState([]),b=(0,E.default)(v,2),g=b[0],C=b[1];var h=S.default.useState(false),y=(0,E.default)(h,2),P=y[0],x=y[1];var _=S.default.useRef(false);(0,S.useEffect)(function(){n(t)});(0,S.useEffect)(function(){a(u)},[u,a]);(0,S.useEffect)(function(){function t(){return e.apply(this,arguments)}function e(){e=(0,A.default)(j.default.mark(function e(){var r;return j.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return(0,D.searchProductTaxCategories)(m);case 3:r=t.sent;C(r.categories);t.next=9;break;case 7:t.prev=7;t.t0=t["catch"](0);case 9:x(false);case 10:case"end":return t.stop()}},e,null,[[0,7]])}));return e.apply(this,arguments)}x(true);if(m.length>1){var r=setTimeout(function(){t();if(!_.current){var e=B(o);(0,R.trackTaxCategorySearch)({productId:e.productId,productType:e.productType,productEditor:q});_.current=true}},500);return function(){return clearTimeout(r)}}m.length||C([]);x(false)},[m,o]);function w(e){var t=B(o);(0,R.trackTaxCategoryChangeCategory)({action:"change",categoryAction:e?R.TaxCategoryAction.ADD:R.TaxCategoryAction.DELETE,categoryName:(null===e||void 0===e?void 0:e.taxCategoryName)||(null===u||void 0===u?void 0:u.taxCategoryName),productId:t.productId,productType:t.productType,productEditor:q});l(e);C([])}return S.default.createElement("div",{"data-test":"tax-category-input",className:V.default.searchInput},S.default.createElement(F.default,{fieldName:(0,k.t)("Tax Category"),query:m,setQuery:f,value:u,setValue:w,selectedValueLabel:null===u||void 0===u?void 0:u.taxCategoryName},g.length?g.map(function(e){return S.default.createElement(O.Dropdown.Option,{key:e.taxCategoryCode,value:e},e.taxCategoryName)}):P?S.default.createElement(I.Cell,{body:S.default.createElement(T.Flex,{justifyContent:"center"},S.default.createElement(I.ActivityIndicator,null))}):S.default.createElement(T.Text.Body,{color:"gray.300",onClick:null,px:2},"No results")))}function P(e){var t=e.retry;return S.default.createElement(I.Cell,{body:S.default.createElement(T.Flex,{pt:0,justifyContent:"center"},S.default.createElement(T.Text.Body,{color:"gray.300"},S.default.createElement(v.T,{project:"commerce-product-composer"},"Something went wrong with Tax Categories.")),S.default.createElement(T.Text.Body,{color:"gray.300",onClick:t,css:{textDecoration:"underline"},pl:1},S.default.createElement(v.T,{project:"commerce-product-composer"},"Try Again")))})}function i(e){var t=e.productId,r=e.isNewProduct;var a=(0,M.useProductContext)(),n=a.product;var s=(0,g.default)(function(){return(0,D.getProductTaxCategoryData)(t)}),o=s.data,c=s.isError,i=s.refetch;var u=(null===o||void 0===o?void 0:o.extensionEligible)||false;var l=(null===o||void 0===o?void 0:o.extensionInstalled)||false;var d=null===o||void 0===o?void 0:o.productTaxCategory;var p=!l||l&&u;var m=(0,S.useRef)(false);(0,S.useEffect)(function(){if(o&&!m.current){var e=B(n);(0,R.trackTaxCategoryFeatureAvailable)({productId:e.productId,productType:e.productType,productEditor:q,ctaPresent:!o.extensionInstalled,extensionEligible:o.extensionEligible});m.current=true}},[o,n]);return S.default.createElement(S.default.Fragment,null,p&&S.default.createElement("div",{className:C.default.container,"data-test":"taxes-section"},S.default.createElement(T.Text.Subtitle,null,S.default.createElement(v.T,{project:"commerce-product-composer"},"Taxes")),l&&S.default.createElement(T.Text.Caption,{fontSize:3},S.default.createElement(v.T,{project:"commerce-product-composer",helpLink:S.default.createElement("a",{href:f.COMMERCE_TAXES_AUTO_CALCS,target:"_blank"},S.default.createElement(v.T,{project:"apps.App"},"Learn more"))},"Extensions can use your product's tax category to calculate the right tax rate during checkout. {helpLink}")),S.default.createElement("div",{className:C.default.fields},c?S.default.createElement(P,{retry:i}):l?S.default.createElement(y,{taxCategory:d}):S.default.createElement(h,{isNewProduct:r}))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Thumbnail.less":function(e,t,r){e.exports={fileInput:"jXOCkYMel",uploadable:"_2EFhn0GwG",thumbnailImage:"_1-Yo57vg1",isProcessing:"_3bhLutiRv"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Thumbnail.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=c;var C=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var h=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var y=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var P=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var x=a(r("./common/temp/node_modules/react/index.js"));var s=n(r("./common/temp/node_modules/uuid/v1.js"));var _=n(r("./common/temp/node_modules/classnames/index.js"));var w=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var E=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var j=n(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var A=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var S=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var O=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var I=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var T=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/UploadButton.tsx"));var k=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionListWrapper.tsx"));var F=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ImageApi.ts");var D=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Thumbnail.less"));var R=n(r("./src/main/webapp/universal/src/apps/App/shared/components/ImageEditor/index.js"));var M=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var N=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/imageUploader.ts");var V=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ProgressBar.tsx"));function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),true).forEach(function(e){(0,y.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function B(e){return{id:(0,s.default)(),urls:{https:URL.createObjectURL(e)},focalPoint:{x:0,y:0},mediaProcessingState:j.default.QUEUED,processingProgress:0}}function c(e){var t,r,a,n;var s=e.productId,o=e.collectionId;var c=(0,I.useProductContext)(),i=c.product,u=c.patchProduct;var l=x.default.useRef(null);var d=(0,x.useState)(null),p=(0,P.default)(d,2),m=p[0],f=p[1];var v=function e(a){var r=B(a);u({thumbnailImage:r});(0,N.createUpload)({file:a,uploadHandler:function e(t){var r=t.onUploadProgress;return(0,F.uploadPreviewThumbnailImage)(s,o,a,r)},onUpdate:function e(t){u({thumbnailImage:q({},r,{processingProgress:t.progress})})},onComplete:function e(t){u({thumbnailImage:t.focalPointImage})}})};if(!i)return null;var b=(null===(t=i.thumbnailImage)||void 0===t?void 0:t.mediaProcessingState)===j.default.QUEUED||(null===(r=i.thumbnailImage)||void 0===r?void 0:r.mediaProcessingState)===j.default.PROCESSING;var g=x.default.createElement(A.Cell,{className:(0,_.default)((0,y.default)({},D.default.uploadable,!b)),onClick:function e(){if(!b){var t;null===(t=l.current)||void 0===t?void 0:t.click()}},label:(0,E.t)("Thumbnail Image"),interiorPre:x.default.createElement(x.default.Fragment,null,i.thumbnailImage?x.default.createElement(S.Box,{width:O.space[6],height:O.space[6],position:"relative"},x.default.createElement(A.Image,{className:(0,_.default)(D.default.thumbnailImage,(a={},(0,y.default)(a,D.default.uploadable,!b),(0,y.default)(a,D.default.isProcessing,b),a)),src:null===(n=i.thumbnailImage)||void 0===n?void 0:n.urls.https}),!!i.thumbnailImage.processingProgress&&b&&x.default.createElement(V.default,{percentage:100*i.thumbnailImage.processingProgress})):x.default.createElement(T.default,{onClick:function e(t){var r;null===(r=l.current)||void 0===r?void 0:r.click();t.stopPropagation()}}),x.default.createElement("label",{htmlFor:"productComposerThumbnailUpload"},x.default.createElement("input",{id:"productComposerThumbnailUpload",className:D.default.fileInput,accept:F.ACCEPTED_IMAGE_TYPES_STRING,type:"file",ref:l,onChange:function(){var t=(0,h.default)(C.default.mark(function e(r){var a;return C.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.target.files;if(!a){t.next=6;break}if(!i.thumbnailImage){t.next=5;break}t.next=5;return(0,F.deleteThumbnailImage)(s);case 5:v(a[0]);case 6:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}))),interiorAccessory:x.default.createElement("div",{onClick:function e(t){return t.stopPropagation()}},i.thumbnailImage&&!b&&x.default.createElement(k.default,null,x.default.createElement(k.default.Button,{onClick:function e(){return i.thumbnailImage&&f(i.thumbnailImage)}},x.default.createElement(w.T,{project:"commerce-product-composer"},"Edit Image")),x.default.createElement(k.default.ButtonDanger,{onClick:(0,h.default)(C.default.mark(function e(){return C.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,F.deleteThumbnailImage)(s);case 2:u({thumbnailImage:void 0});case 3:case"end":return t.stop()}},e)}))},x.default.createElement(w.T,{project:"commerce-product-composer"},"Delete"))))});return x.default.createElement(x.default.Fragment,null,x.default.createElement(M.FileDropZone,{onDrop:function(){var t=(0,h.default)(C.default.mark(function e(r){return C.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:b||v(r);case 1:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),validMimeTypes:F.ACCEPTED_IMAGE_TYPES,multiple:false},g),x.default.createElement(A.Divider,null),m&&x.default.createElement(R.default,{imageSrc:m.urls.https,onSave:function(){var t=(0,h.default)(C.default.mark(function e(r){return C.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:f(null);v(r);case 2:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),onCancel:function e(){return f(null)},isOpen:true}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/VariantBreadcrumb.less":function(e,t,r){e.exports={container:"_1vGAyMlhb",productName:"_3l8HRdJWc",divider:"_3XtFous9A",variantAttributes:"_2rvEpR80Q"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/VariantBreadcrumb.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/VariantBreadcrumb.less"));function o(e){var t=e.productName,r=e.variantAttributes;return n.default.createElement("div",{className:s.default.container,"data-test":"pc-variant-form-breadcrumb"},n.default.createElement("div",{className:s.default.productName},t),n.default.createElement("div",{className:s.default.divider},"/"),n.default.createElement("div",{className:s.default.variantAttributes},Object.values(r).filter(function(e){return!!e}).join("  ")))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/VariantList.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getVariantTitle=n;t.VariantListItem=w;t.default=o;var d=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var p=a(r("./common/temp/node_modules/react/index.js"));var m=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var c=a(r("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts"));var f=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var b=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var g=a(r("./common/temp/node_modules/@sqs/core-components/primitives/Icon.js"));var C=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/index.tsx"));var h=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-context.tsx");var y=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));var P=5;function n(e){var t=e.attributes;return Object.values(t).filter(function(e){return!!e}).join("  ")}function x(e){var t=e.price,r=e.salePrice,a=e.onSale,n=e.stock;var s=c.default.formatter.format(a?r:t);var o=n.unlimited?"":(0,f.pluralize)({one:"{%n} Unit",other:"{%n} Units"},n.quantity);return"".concat(s,"  ").concat(o)}function s(e){var t=e.mainImage;return t?t.urls.https:"placeholder"}function _(e){var t=e.find(function(e){return e.mainImage});if(!t)return"placeholder";return s(t)}function w(e){var t=e.variant,r=e.subtitle,a=e.onClick;return p.default.createElement(b.default,{label:n(t),subtitle:r,accessory:p.default.createElement(g.default,{name:"chevronLargeRightLight"}),icon:s(t),flush:true,onClick:a,"data-test":"pc-variant-list-cell"})}function E(e){if(0===e.length)throw new Error("Unable to generate price range from empty variant list");var t=e.map(function(e){return e.price});var r=t[0];var a=t[0];t.forEach(function(e){var t=e.value;t.gt(a.value)?a=e:t.lt(r.value)&&(r=e)});var n=c.default.formatter.format(r,{trimZeroFractions:true});var s=c.default.formatter.format(a,{trimZeroFractions:true});if(r.value.eq(a.value))return n;return"".concat(n,"-").concat(s)}function o(e){var t=e.variants;var r=(0,h.useRouterContext)(),a=(0,d.default)(r,2),n=a[1];var s=(0,y.default)(),o=s.isMobile;var c=p.default.useState(false),i=(0,d.default)(c,2),u=i[0],l=i[1];return p.default.createElement(p.default.Fragment,null,p.default.createElement(v.Flex,{alignItems:"center"},p.default.createElement(v.Text.Subtitle,null,p.default.createElement(m.T,{project:"commerce-product-composer"},"Variants"))),t.length>P&&!o?p.default.createElement(b.default,{label:(0,f.t)("{numVariants} variants",{numVariants:t.length}),subtitle:E(t),accessory:p.default.createElement(g.default,{name:"chevronLargeRightLight"}),icon:_(t),flush:true,onClick:function e(){return n({route:h.Route.VARIANT_TABLE})},"data-test":"pc-variant-collapsed-list-cell"}):t.map(function(t){return p.default.createElement(w,{key:t.id,variant:t,subtitle:x(t),onClick:function e(){n(o?{route:h.Route.VARIANT_FORM,variantId:t.id}:{route:h.Route.VARIANT_TABLE})}})}),o?p.default.createElement(b.default,{onClick:function e(){return l(true)},flush:true},p.default.createElement(v.Button.Tertiary,{animationDirection:"none"},p.default.createElement(m.T,{project:"commerce-product-composer"},"Manage Options"))):p.default.createElement(b.default,{onClick:function e(){return n({route:h.Route.VARIANT_TABLE})},flush:true},p.default.createElement(v.Button.Tertiary,{"data-testid":"pc-edit-variants-button",animationDirection:"none"},p.default.createElement(m.T,{project:"commerce-product-composer"},"Edit All"))),p.default.createElement(C.default,{isOpen:u,onRequestClose:function e(){return l(false)}}))}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Variations.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=l;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=a(r("./common/temp/node_modules/react/index.js"));var o=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var c=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var i=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/index.tsx"));function l(){var e=s.default.useState(false),t=(0,n.default)(e,2),r=t[0],a=t[1];return s.default.createElement(o.Box,{mt:6},s.default.createElement(o.Text.Subtitle,null,s.default.createElement(i.T,{project:"commerce-product-composer"},"Variations")),s.default.createElement(o.Text.Caption,{fontSize:3},s.default.createElement(i.T,{project:"commerce-product-composer"},"Sell different versions of the same product. For example, a shirt that comes in multiple colors or sizes.")),s.default.createElement(c.default,{flush:true},s.default.createElement(o.Button.Tertiary,{animationDirection:"none",onClick:function e(){return a(true)}},s.default.createElement(i.T,{project:"commerce-product-composer"},"Add"))),s.default.createElement(u.default,{isOpen:r,onRequestClose:function e(){return a(false)}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Visibility/Visibility.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var d=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var p=a(r("./common/temp/node_modules/react/index.js"));var m=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var f=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var v=a(r("./common/temp/node_modules/@sqs/core-components/fields/DropdownSelectField.js"));var b=a(r("./common/temp/node_modules/@sqs/core-components/primitives/Label.js"));var g=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var C=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var h=r("./src/main/webapp/universal/src/shared/types/Visibility.ts");var y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var P=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/PublishOnModal/index.tsx"));var x=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SharedFieldStyles.less"));function n(e){var t=e.visibility,r=e.onChange;var a=p.default.useState(false),n=(0,d.default)(a,2),s=n[0],o=n[1];var c=(0,y.useProductContext)(),i=c.product;if(!i)return null;var u=i.visibility.visibleOn;var l=[{label:(0,g.t)("Public"),value:h.VisibilityState.VISIBLE},{label:(0,g.t)("Hidden"),value:h.VisibilityState.HIDDEN},{label:(0,g.t)("Scheduled"),value:h.VisibilityState.SCHEDULED}];return p.default.createElement("div",{className:x.default.fields},p.default.createElement(b.default,{label:(0,g.t)("Visibility"),context:true}),p.default.createElement(v.default,{value:t.state,onChange:function e(t){(0,h.isVisibility)(t)&&r({state:t,visibleOn:u||new Date});t===h.VisibilityState.SCHEDULED&&o(true)},options:l}),t.state===h.VisibilityState.SCHEDULED&&p.default.createElement(p.default.Fragment,null,p.default.createElement(m.Text.Caption,{ml:4},p.default.createElement(C.T,{project:"commerce-product-composer",visibleOn:(0,g.formatDateTime)(u.getTime(),"MMM DD, YYYY hh:mm A")},"Scheduled to be published on {visibleOn}")),p.default.createElement(f.default,null,p.default.createElement(m.Button.Tertiary,{onClick:function e(){return o(true)}},p.default.createElement(C.T,{project:"commerce-product-composer"},"Edit")))),s&&p.default.createElement(P.default,{onCancel:function e(){return o(false)},onSave:function e(){o(false)}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Visibility/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Visibility/Visibility.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/GlobalLoadingOverlay/GlobalLoadingOverlay.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=u;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var c=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx");function i(){return n.default.createElement(s.Box,{sx:{backgroundColor:"background",opacity:".5",position:"absolute",height:"100%",width:"100%"}})}function u(){var e=(0,c.useViewStateContext)(),t=e.loadingMessage;return n.default.createElement(s.Flex,{sx:{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",alignItems:"center",justifyContent:"center"}},n.default.createElement(i,null),n.default.createElement(s.Flex,{sx:{flexDirection:"column",alignItems:"center"}},n.default.createElement(o.ActivityIndicator,null),n.default.createElement(s.Box,{sx:{marginTop:"1",color:"black",fontSize:"3"}},t)))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/GlobalLoadingOverlay/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/GlobalLoadingOverlay/GlobalLoadingOverlay.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/Header.less":function(e,t,r){e.exports={toolbar:"_18ylTWT-f",toolbarCenter:"_3ZcqYjxEV",classicEditorButton:"qEQWT6bWg"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/Header.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=c;var f=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var v=a(r("./common/temp/node_modules/react/index.js"));var b=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var g=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var n=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var C=a(r("./common/temp/node_modules/@sqs/core-components/components/BackButton.js"));var h=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.tsx"));var y=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var P=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var x=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-context.tsx");var _=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FeedbackForm/useFeedbackForm.tsx");var w=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/SaveButton.tsx"));var E=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/Header.less"));var s=r("./src/main/webapp/universal/src/shared/types/Visibility.ts");(0,P.t)("Physical Product");(0,P.t)("Digital Product");(0,P.t)("Service Product");(0,P.t)("Gift Card Product");function j(e){switch(e){case n.default.PHYSICAL:return(0,P.t)("Create Physical Product");case n.default.DIGITAL:return(0,P.t)("Create Digital Product");case n.default.SERVICE:return(0,P.t)("Create Service Product");case n.default.GIFT_CARD:return(0,P.t)("Create Gift Card Product")}}function o(e){switch(e){case n.default.PHYSICAL:return(0,P.t)("Physical Product");case n.default.DIGITAL:return(0,P.t)("Digital Product");case n.default.SERVICE:return(0,P.t)("Service Product");case n.default.GIFT_CARD:return(0,P.t)("Gift Card Product")}}function A(e,t){var r=e.visibility.state;if(t&&r===s.VisibilityState.HIDDEN)return(0,P.t)("Draft");var a=o(e.productType);var n=r===s.VisibilityState.HIDDEN?(0,P.t)("Hidden"):r===s.VisibilityState.SCHEDULED?(0,P.t)("Scheduled"):"";return n?[a,n].join(" - "):a}function c(e){var t=e.product,r=e.isNewProduct,a=e.isMobile,n=e.variant;var s=(0,x.useRouterContext)(),o=(0,f.default)(s,2),c=o[0],i=c.currentLocation,u=c.hasPreviousRoute,l=o[1];var d=(0,_.useFeedbackForm)(),p=d.showFeedbackForm,m=d.closeFeedbackForm;return v.default.createElement(v.default.Fragment,null,v.default.createElement(h.default,{className:E.default.toolbar},v.default.createElement(h.default.Left,null,u?v.default.createElement(C.default,{onClick:function e(){return l({route:x.Route.BACK})}}):v.default.createElement(w.default,{isNewProduct:r,isMobile:a})),v.default.createElement(h.default.Center,{className:E.default.toolbarCenter},v.default.createElement(b.Text.Title,{fontSize:"13px",lineHeight:"1"},a&&n?v.default.createElement(y.T,{project:"commerce-product-composer"},"Edit Variant"):r?j(t.productType):i.route===x.Route.VARIANT_TABLE?v.default.createElement(y.T,{project:"commerce-product-composer"},"Edit Variants"):v.default.createElement(y.T,{project:"commerce-product-composer",productName:t.name},"Edit {productName}")),v.default.createElement(b.Text.Caption,{sx:{display:"block",marginTop:"3px"}},i.route===x.Route.VARIANT_TABLE?v.default.createElement(v.default.Fragment,null,(0,P.pluralize)({one:"{%n} Variant",other:"{%n} Variants"},t.variants.length,void 0)):a&&n?Object.values(n.attributes).join("  "):A(t,r))),v.default.createElement(h.default.Right,null,!u&&!a&&v.default.createElement(v.default.Fragment,null,v.default.createElement(b.Button.Secondary,{borderStyle:"none",animationDirection:"none",onClick:function e(){p({onRequestClose:m,shouldToggleBeta:false,productSection:"feedback-button"})}},v.default.createElement(y.T,{project:"commerce-product-composer"},"Feedback")),v.default.createElement(b.Button.Secondary,{className:E.default.classicEditorButton,borderStyle:"none",animationDirection:"none",onClick:function e(){p({onRequestClose:m,shouldToggleBeta:true,productSection:"opt-out"})},"data-testid":"pc-opt-out-button"},v.default.createElement(y.T,{project:"commerce-product-composer"},"Classic Editor"),v.default.createElement(g.ExternalLink,{sx:{marginLeft:1}}))))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/SaveActionSheet.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var i=a(r("./common/temp/node_modules/react/index.js"));var u=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var l=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var d=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionSheet.tsx"));var p={height:"44px",mx:3,justifyContent:"start",borderBottom:1,borderColor:"gray.800"};function n(e){var t=e.isOpen,r=e.isNewProduct,a=e.onSave,n=e.onSaveAndPublish,s=e.onSchedule,o=e.onDiscard,c=e.onDismiss;return i.default.createElement(d.default,{isOpen:t,onDismiss:c,header:(0,l.t)("Confirm Changes"),body:i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Button.Tertiary,{sx:p,onClick:a},(0,l.t)("Save")),i.default.createElement(u.Button.Tertiary,{sx:p,onClick:n},(0,l.t)("Save and Publish")),i.default.createElement(u.Button.Tertiary,{sx:p,onClick:s},(0,l.t)("Schedule")),i.default.createElement(u.Button.Danger,{sx:p,onClick:o},r?(0,l.t)("Discard Product"):(0,l.t)("Discard Changes")),i.default.createElement(u.Flex,{sx:{paddingTop:6}}))})}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/SaveButton.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var R=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var M=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var N=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var V=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var q=a(r("./common/temp/node_modules/react/index.js"));var B=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var L=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var U=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var G=r("./src/main/webapp/universal/src/shared/types/Visibility.ts");var W=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var Y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var z=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx");var H=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/OverflowMenu.tsx"));var K=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionListWrapper.tsx"));var Z=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/PublishOnModal/index.tsx"));var X=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useSaveProduct.tsx"));var J=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useDeleteProduct.tsx"));var Q=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/SaveActionSheet.tsx"));var $=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/EtsyProductImport/components/ProductImportSurvey.tsx"));function s(e){var r=e.isNewProduct,t=e.isMobile;var a=q.default.useState(false),n=(0,V.default)(a,2),s=n[0],o=n[1];var c=(0,X.default)(r),i=c.saveProduct;var u=(0,J.default)(),l=u.deleteProduct;var d=(0,z.useLifeCycleHooksContext)(),p=d.lifeCycleHooks;var m=(0,Y.useProductContext)(),f=m.product,v=m.patchProduct;var b=q.default.useState(false),g=(0,V.default)(b,2),C=g[0],h=g[1];var y=(0,q.useState)(false),P=(0,V.default)(y,2),x=P[0],_=P[1];var w=(0,q.useState)(false),E=(0,V.default)(w,2),j=E[0],A=E[1];var S=function(){var t=(0,N.default)(M.default.mark(function e(){return M.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.t0=r;if(!t.t0){t.next=5;break}t.next=4;return(0,$.passesSurveyRequirements)();case 4:t.t0=t.sent;case 5:if(!t.t0){t.next=9;break}_(true);t.next=10;break;case 9:A(true);case 10:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();(0,q.useEffect)(function(){var e=function(){var t=(0,N.default)(M.default.mark(function e(){var r,a;return M.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(f){t.next=2;break}return t.abrupt("return");case 2:t.next=4;return i();case 4:r=t.sent;a=r.encounteredErrors;a?A(false):p.onSaveButtonClick(f);case 7:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();j&&e()},[j]);if(!f)return null;var O={textStyle:"body"};var I=function(){var t=(0,N.default)(M.default.mark(function e(){return M.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:S();case 1:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();var T=function(){var t=(0,N.default)(M.default.mark(function e(){return M.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:v({visibility:{state:G.VisibilityState.VISIBLE,visibleOn:new Date}});S();case 2:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();var k=function e(){h(true)};var F=function e(){r?l(true):p.onCancelButtonClick()};var D=function e(){_(false);A(true)};return q.default.createElement(q.default.Fragment,null,t?q.default.createElement(q.default.Fragment,null,q.default.createElement(B.Button.Tertiary,{onClick:function e(){return o(true)}},q.default.createElement(U.T,{project:"commerce-product-composer"},"Done")),q.default.createElement(Q.default,{isOpen:s,isNewProduct:r,onDiscard:F,onSave:I,onSaveAndPublish:T,onSchedule:k,onDismiss:function e(){return o(false)}})):q.default.createElement("button",{onMouseEnter:function e(){return o(true)},onMouseLeave:function e(){return o(false)},onClick:function e(){return o(!s)},"data-testid":"pc-header-done-button"},q.default.createElement(H.default,{label:q.default.createElement(B.Flex,{alignItems:"center"},q.default.createElement(U.T,{project:"commerce-product-composer"},"Done"),q.default.createElement(L.ChevronSmallDown,{sx:{marginRight:-1}})),isOpen:s,onClose:function e(){return o(false)},position:"bottom-right",anchorPoint:{x:"left",y:"bottom"},offset:0},q.default.createElement(B.Flex,{bg:"white",flexDirection:"column"},q.default.createElement(K.default.Button,(0,R.default)({},O,{onRequestClose:function e(){o(false)},onClick:I,"data-testid":"pc-save-button"}),q.default.createElement(U.T,{project:"commerce-product-composer"},"Save")),f.visibility.state===G.VisibilityState.HIDDEN&&q.default.createElement(q.default.Fragment,null,q.default.createElement(K.default.Button,(0,R.default)({},O,{onRequestClose:function e(){o(false)},onClick:T}),q.default.createElement(U.T,{project:"commerce-product-composer"},"Save and Publish")),q.default.createElement(K.default.Button,(0,R.default)({},O,{onRequestClose:function e(){o(false)},onClick:k}),q.default.createElement(U.T,{project:"commerce-product-composer"},"Schedule"))),q.default.createElement(K.default.ButtonDanger,(0,R.default)({},O,{onRequestClose:function e(){o(false)},onClick:F,"data-testid":"pc-cancel-button"}),r?q.default.createElement(U.T,{project:"commerce-product-composer"},"Discard Product"):q.default.createElement(U.T,{project:"commerce-product-composer"},"Discard Changes")),f.visibility.state===G.VisibilityState.SCHEDULED&&q.default.createElement(B.Box,{sx:{px:4,py:2,borderTop:1,borderColor:"gray.800"}},q.default.createElement("div",null,q.default.createElement(B.Text.Caption,null,q.default.createElement(U.T,{project:"commerce-product-composer"},"Scheduled"))),q.default.createElement("div",null,q.default.createElement(B.Text.Caption,null,(0,W.formatDateTime)(f.visibility.visibleOn.getTime(),"MMM DD, YYYY hh:mm A"))))))),C&&q.default.createElement(Z.default,{onCancel:function e(){h(false)},onSave:(0,N.default)(M.default.mark(function e(){return M.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:h(false);S();case 2:case"end":return t.stop()}},e)}))}),x&&q.default.createElement($.default,{onClose:D}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/Header/Header.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.less":function(e,t,r){e.exports={fullScreen:"qx39RtEyW"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.AlertModalWrapper=n;t.default=g;var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var u=a(r("./common/temp/node_modules/react/index.js"));var o=a(r("./common/temp/node_modules/classnames/index.js"));var l=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");var d=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var p=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.less"));var m=d.Modal.Transition,f=d.Modal.Overlay,v=d.Modal.Position,i=d.Modal.Dialog,b=d.Modal.TouchScroll;function n(e){var t=e.isOpen,r=e.onClose,a=e.onConfirm,n=e.title,s=e.message,o=e.confirmLabel,c=e.cancelLabel,i=void 0===c?(0,p.t)("Cancel"):c;return u.default.createElement(m,null,t&&u.default.createElement(d.Modal,{onRequestClose:r,lockFocus:false},u.default.createElement(f,null),u.default.createElement(v,{position:"center"},u.default.createElement(l.AlertDialog,{title:n,message:s,buttons:r?[u.default.createElement(u.default.Fragment,null,u.default.createElement(l.AlertDialog.Button,{key:"close",onClick:r},i),u.default.createElement(l.AlertDialog.Button,{key:"confirm",onClick:a,"data-testid":"pc-alert-confirm-button","data-test":"pc-alert-confirm-button"},o))]:[u.default.createElement(l.AlertDialog.Button,{key:"confirm",onClick:a,"data-testid":"pc-alert-confirm-button","data-test":"pc-alert-confirm-button"},o)]}))))}function g(e){var t=e.isOpen,r=e.onRequestClose,a=e.children,n=e.isFullScreen;return u.default.createElement(m,null,t&&u.default.createElement(d.Modal,{onRequestClose:r,lockFocus:false},u.default.createElement(f,null),u.default.createElement(v,{position:"center"},u.default.createElement(i,{className:(0,o.default)((0,s.default)({},c.default.fullScreen,n))},u.default.createElement(b,null,a)))))}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ChooseProductPage.less":function(e,t,r){e.exports={stepTitle:"_14xnTXSKp",stepDescription:"_2k6olRKb3",productCollection:"_1tPlbg6uk"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ChooseProductPage.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=a(r("./common/temp/node_modules/@sqs/core-components/containers/Wizard.js"));var m=a(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var f=a(r("./common/temp/node_modules/@sqs/core-components/components/ActivityIndicator.js"));var v=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var b=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var g=a(r("./src/main/webapp/universal/src/apps/Commerce/shared/utils/useFetch.ts"));var C=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ChooseProductPage.less"));function n(e){var n=e.onSelectPage;var t=(0,g.default)(b.getProductCollections),r=t.data,a=t.isLoading,s=t.isError;var o=d.default.useState(null),c=(0,l.default)(o,2),i=c[0],u=c[1];d.default.useEffect(function(){r&&u(r)},[r]);return d.default.createElement(p.default.Step.Content,{className:C.default.container},d.default.createElement("div",{className:C.default.stepTitle},d.default.createElement(v.T,{project:"commerce-product-composer"},"Select a Store")),d.default.createElement("div",{className:C.default.stepDescription},d.default.createElement(v.T,{project:"commerce-product-composer"},"Select a page to put your new product into.")),a&&d.default.createElement(f.default,null),s&&d.default.createElement("div",null,d.default.createElement(v.T,{project:"commerce-product-composer"},"There was an error fetching product pages. Please refresh the page and try again.")),i&&i.map(function(e){var t=e.id,r=e.title,a=e.itemCount;return d.default.createElement(m.default,{label:r,icon:"/universal/images-v6/page-layout/store.svg",indented:false,onClick:function e(){return n(t,a)}})}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ChooseProductType.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=g;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var o=a(r("./common/temp/node_modules/@sqs/core-components/containers/Wizard.js"));var c=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var i=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductTypeButton.tsx"));var l=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/PhysicalPreview.png"));var d=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/DigitalPreview.png"));var p=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/GiftCardPreview.png"));var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/ServicePreview.png"));var f=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var v=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var b=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));function g(e){var r=e.onClick,t=e.setPreviewImage;function a(e){var t=(0,b.default)(e);r(e);t&&(0,f.trackSelectProductType)(t,v.ProductEditor.PRODUCT_COMPOSER_V1)}return n.default.createElement(n.default.Fragment,null,n.default.createElement(o.default.Step.HeaderTitle,null,(0,i.t)("What do you want to sell?")),n.default.createElement(o.default.Step.Content,null,n.default.createElement(o.default.Step.Content.Title,{"data-testid":"choose-product-type-title"},(0,i.t)("What do you want to sell?")),n.default.createElement(c.Text.Body,{color:"gray.400",mb:6},(0,i.t)("Your product type determines certain product settings and features")),n.default.createElement(u.default,{label:(0,i.t)("Physical"),description:(0,i.t)("A package must be shipped by the merchant"),onClick:function e(){return a(s.default.PHYSICAL)},onMouseOver:function e(){return t(l.default)}}),n.default.createElement(u.default,{label:(0,i.t)("Digital"),description:(0,i.t)("Customers can download a secure link to the file lasting 24 hours after the first download."),onClick:function e(){return a(s.default.DIGITAL)},onMouseOver:function e(){return t(d.default)}}),n.default.createElement(u.default,{label:(0,i.t)("Service"),description:(0,i.t)("Services do not have shipping costs applied."),onClick:function e(){return a(s.default.SERVICE)},onMouseOver:function e(){return t(m.default)}}),n.default.createElement(u.default,{label:(0,i.t)("Gift Card"),description:(0,i.t)("Customers can apply a gift card towards future purchases."),onClick:function e(){return a(s.default.GIFT_CARD)},onMouseOver:function e(){return t(p.default)}})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/EtsyImportFork.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=n(r("./common/temp/node_modules/react/index.js"));var o=a(r("./common/temp/node_modules/@sqs/core-components/containers/Wizard.js"));var c=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var i=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductTypeButton.tsx"));var l=r("./src/main/webapp/frontend/packages/universal-router/lib/index.js");var d=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackEtsyImportActivation.ts");function p(e){var t=e.onNext,r=e.onClose,a=e.router;(0,s.useEffect)(function(){(0,d.trackViewEtsyImportPrompt)("add-product")},[]);return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.default.Step.HeaderTitle,null,(0,i.t)("How do you want to add products to your store?")),s.default.createElement(o.default.Step.Content,null,s.default.createElement(c.Box,{mb:6},s.default.createElement(o.default.Step.Content.Title,{"data-testid":"choose-product-type-title"},(0,i.t)("How do you want to add products to your store?"))),s.default.createElement(u.default,{label:(0,i.t)("Import from Etsy"),description:(0,i.t)("Start selling quickly by importing your Etsy products."),onClick:function e(){(0,d.trackClickEtsyImportPrompt)("add-product","import-from-etsy");r();a.push("/config/inventory?open=etsy-import")}}),s.default.createElement(u.default,{label:(0,i.t)("Create new products"),description:(0,i.t)("Add new products and services manually."),onClick:function e(){(0,d.trackClickEtsyImportPrompt)("add-product","add-manual");t()}})))}var m=(0,l.withRouter)(p);t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductCreationWizard.less":function(e,t,r){e.exports={wizardPanel:"_2Nxms9-ih",previewPanel:"_19C5oo8PU",previewImage:"_2uCe88fys"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductCreationWizard.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var F=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var D=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var R=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var M=n(r("./common/temp/node_modules/react/index.js"));var N=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var V=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var q=n(r("./common/temp/node_modules/@sqs/core-components/containers/Wizard.js"));var B=n(r("./src/main/webapp/frontend/packages/enums/ProductApiErrorType.js"));var L=n(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var U=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var G=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var W=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var Y=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ChooseProductType.tsx"));var z=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ChooseProductPage.tsx"));var H=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/EtsyImportFork.tsx"));var K=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/PhysicalPreview.png"));var Z=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductCreationWizard.less"));var X=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var J=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var Q=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/EtsyProductImport/utils/isEtsyImportDeepLink.ts");var s=r("./src/main/webapp/frontend/packages/universal-router/lib/index.js");var $=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/Dashboard/utils/useOnboardingPreferences.tsx"));var ee=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/EtsyProductImport/utils/shouldShowEtsyImportFork.ts"));function o(e){var s=e.collectionId,o=e.collectionItemCount,c=e.onProductCreated,t=e.isMobile,r=e.shouldSkipEtsyFork,a=e.onClose,n=e.router;var i=(0,$.default)(),u=i.preferences;var l=!r&&(0,ee.default)(u);var d=M.default.useState(l?"etsy-import-fork":"choose-product-type"),p=(0,R.default)(d,2),m=p[0],f=p[1];var v=M.default.useState(L.default.PHYSICAL),b=(0,R.default)(v,2),g=b[0],C=b[1];var h=M.default.useState(function(){return new q.default.History}),y=(0,R.default)(h,1),P=y[0];var x=M.default.useState(K.default),_=(0,R.default)(x,2),w=_[0],E=_[1];var j=M.default.useState(false),A=(0,R.default)(j,2),S=A[0],O=A[1];var I=(0,X.useConfirmModal)(),T=I.showConfirmModal;var k=t||"etsy-import-fork"===m;return M.default.createElement(M.default.Fragment,null,M.default.createElement(q.default.SplitScreen,{"data-test":"product-creation-wizard"},M.default.createElement(q.default.SplitScreen.Panel,{className:Z.default.wizardPanel},S?M.default.createElement(N.Flex,{flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center"},M.default.createElement(V.ActivityIndicator,null),M.default.createElement(N.Text.Caption,{sx:{mt:2}},(0,J.t)("Creating product..."))):M.default.createElement(q.default,{currentStepId:m,onRequestStep:f,history:P,closeButtonProps:{onClick:a}},M.default.createElement(q.default.Step,{id:"etsy-import-fork",nextStepId:"choose-product-type",hideNavigation:true,hideProgress:true},function(e){var t=e.next;return M.default.createElement(H.default,{onNext:t,onClose:a})}),M.default.createElement(q.default.Step,{id:"choose-product-type",nextStepId:"choose-product-page",hideNavigation:true,renderProgress:function e(){return M.default.createElement(N.Button.Tertiary,{onClick:function e(){a();n.push("/commerce/inventory?open=".concat(Q.ETSY_IMPORT_DEEPLINK_PARAM))}},(0,J.t)("Import from Etsy"))}},function(e){var n=e.next;return M.default.createElement(Y.default,{onClick:function(){var t=(0,D.default)(F.default.mark(function e(r){var a;return F.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!s){t.next=19;break}t.prev=1;O(true);t.next=5;return(0,W.createProduct)(s,r,null!==o&&void 0!==o?o:0);case 5:a=t.sent;c(a);t.next=18;break;case 9:t.prev=9;t.t0=t["catch"](1);if(!(t.t0.response.data.errorType===B.default.PAGE_SIZE_TOO_BIG)){t.next=16;break}t.next=14;return T({isCancellable:false,title:(0,J.t)("Page Max Size Reached"),message:(0,J.t)("This page has a maximum size of 200 items. We recommend adding an additional page to hold your items."),confirmLabel:(0,J.t)("Okay")});case 14:t.next=18;break;case 16:t.next=18;return T({isCancellable:false,title:(0,J.t)("Something went wrong"),message:(0,J.t)("Please try again."),confirmLabel:(0,J.t)("Okay")});case 18:return t.abrupt("return");case 19:C(r);n();case 21:case"end":return t.stop()}},e,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}(),setPreviewImage:E})}),!s&&M.default.createElement(q.default.Step,{id:"choose-product-page",hideProgress:true},M.default.createElement(z.default,{onSelectPage:function(){var r=(0,D.default)(F.default.mark(function e(r,a){var n;return F.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:(0,U.trackSelectStore)(G.ProductEditor.PRODUCT_COMPOSER_V1);O(true);t.next=4;return(0,W.createProduct)(r,g,a);case 4:n=t.sent;c(n);case 6:case"end":return t.stop()}},e)}));return function(e,t){return r.apply(this,arguments)}}()})))),!k&&M.default.createElement(q.default.SplitScreen.Panel,{className:Z.default.previewPanel},w&&M.default.createElement("img",{src:w,className:Z.default.previewImage}))))}var c=(0,$.withEnsureOnboardingPreferences)((0,s.withRouter)(o));t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductTypeButton.less":function(e,t,r){e.exports={arrow:"_2I22wfiOC"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductTypeButton.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=a(r("./common/temp/node_modules/react/index.js"));var o=a(r("./common/temp/node_modules/@sqs/core-components/primitives/Icon.js"));var c=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductTypeButton.less"));var u=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");function n(e){var t=e.onClick,r=e.label,a=e.description,n=e.onMouseOver;return s.default.createElement(u.Card,{isSelectable:true,isHoverable:true,onClick:t,onMouseOver:n,mb:2},s.default.createElement(u.Card.Body,null,s.default.createElement(c.Flex,{alignItems:"center",justifyContent:"space-between"},s.default.createElement(c.Box,null,s.default.createElement(c.Text.Subtitle,{m:0,"data-testid":"choose-product-type-option"},r),s.default.createElement(c.Text.Body,{m:0,color:"gray.400"},a)),s.default.createElement(o.default,{name:"arrowRightDark",className:i.default.arrow}))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/DigitalPreview.png":function(e,t,r){e.exports=r.p+"DigitalPreview-a4fcb572b9af4e82f3c622c9055ce2b9.png"},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/GiftCardPreview.png":function(e,t,r){e.exports=r.p+"GiftCardPreview-a6718aae726979fcd0ef49a07c746056.png"},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/PhysicalPreview.png":function(e,t,r){e.exports=r.p+"PhysicalPreview-4681813adbd34d7d84d31827b0e6267c.png"},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/assets/ServicePreview.png":function(e,t,r){e.exports=r.p+"ServicePreview-c7f225e72d19fea10e544e430192c5e5.png"},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductCreationWizard/ProductCreationWizard.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductForm/ProductForm.less":function(e,t,r){e.exports={uppercase:"_3H_bLF46c",container:"ZienQfhoc",isMobile:"_2J_JjLIRV",variantGeneratorModal:"_1MgeJ_xzc",formSectionHeader:"_2k11mrh4s",formSectionTitle:"_2rddn-xt7"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductForm/ProductForm.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=d;var p=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var m=a(r("./common/temp/node_modules/react/index.js"));var f=a(r("./common/temp/node_modules/classnames/index.js"));var n=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var v=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var s=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var b=r("./src/main/webapp/universal/src/shared/types/NormalizedProduct.ts");var g=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductForm/ProductForm.less"));var C=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Name.tsx"));var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Pricing.tsx"));var h=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/VariantList.tsx"));var y=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/index.tsx"));var P=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Description.tsx"));var x=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Inventory.tsx"));var _=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/DuplicateProduct.tsx"));var w=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/DeleteProduct/index.tsx"));var E=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/index.tsx"));var j=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/Reviews.tsx"));var A=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/Subscription.tsx"));var S=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/RelatedProducts.tsx"));var O=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdvancedShipping/index.tsx"));var I=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/AdditionalInfo/index.tsx"));var T=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/CustomForms/index.tsx"));var k=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/CustomButton.tsx"));var F=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/CustomizeSection/SocialAccounts/index.tsx"));var D=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var R=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Organization.tsx"));var M=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Variations.tsx"));var N=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/SearchSocialPreview/index.tsx"));var V=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/GiftCardVariantTable.tsx"));var q=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/FileUploader/FileUploader.tsx"));var B=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/FeaturedProduct.tsx"));var L=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Taxes.tsx"));var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/AnchorLinks/index.tsx"));var U=r("./src/main/webapp/universal/src/apps/App/utils/commercePricingFlags.ts");var G=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductReviews/shouldShowEtsyProductReviewImport.ts"));var W=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var Y=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),true).forEach(function(e){(0,p.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var H=function e(t){var a=t.variant,n=t.patchVariant;return m.default.createElement(c.default,{onSale:a.onSale,price:a.price,salePrice:a.salePrice,onChangePrice:function e(t,r){n(a.id,{price:t,salePrice:r})},onChangeSalePrice:function e(t){n(a.id,{salePrice:t})},onChangeOnSale:function e(t){n(a.id,{onSale:t})}})};function l(e){var n=e.product,s=e.isNewProduct,t=e.externalYUIModules;var r=(0,D.useProductContext)(),a=r.patchProduct,o=r.patchVariant;var c=(0,Y.default)(),i=c.isMobile;var u=n.variants[0];var l=1===n.variants.length&&Object.values(u.attributes).every(function(e){return!e});var d=function e(t){var r=t.productType;var a=(0,U.isProductTaxCategoriesEnabled)()&&m.default.createElement(L.default,{productId:n.id,isNewProduct:s});switch(r){case v.default.PHYSICAL:case v.default.SERVICE:return l?m.default.createElement(m.default.Fragment,null,m.default.createElement(H,{variant:u,patchVariant:o}),m.default.createElement(x.default,{stock:u.stock,sku:u.sku,onChangeStock:function e(t){o(u.id,{stock:t})},onChangeSku:function e(t){o(u.id,{sku:t})}}),m.default.createElement(M.default,null),a):m.default.createElement(m.default.Fragment,null,m.default.createElement(h.default,{variants:n.variants}),a);case v.default.GIFT_CARD:return m.default.createElement(V.default,{variants:n.variants,patchVariant:o});case v.default.DIGITAL:return m.default.createElement(m.default.Fragment,null,m.default.createElement(q.default,null),m.default.createElement(H,{variant:u,patchVariant:o}),a);default:throw new Error("Invalid product type: ".concat(r))}};return m.default.createElement("div",{className:(0,f.default)(g.default.container,(0,p.default)({},g.default.isMobile,i))},m.default.createElement(C.default,{name:n.name,onChange:function e(t){return a({name:t})}}),m.default.createElement(P.default,{description:n.description,onChange:function e(t){return a({description:t})}}),m.default.createElement(y.default,{images:n.images,productId:n.id,collectionId:n.collectionId}),d(n),m.default.createElement(R.default,{product:n,patchProduct:a,isNewProduct:s}),m.default.createElement(B.default,null),m.default.createElement(N.default,null),m.default.createElement(E.default,null,(0,G.default)()&&m.default.createElement(j.default,null),(0,b.isSubscribable)(n)&&m.default.createElement(A.default,{subscription:n.subscriptionPlan,onChange:function e(t){(0,W.createSubscriptionPlan)(n.id,t);a({subscribable:true,subscriptionPlan:z({},n.subscriptionPlan,{},t)})}}),!(0,b.isGiftCardProduct)(n)&&m.default.createElement(T.default,{customFormsConstructor:t.customFormsConstructor,dialog:t.dialog}),(0,b.isPhysicalProduct)(n)&&m.default.createElement(O.default,{variants:n.variants}),m.default.createElement(S.default,null),m.default.createElement(k.default,null),m.default.createElement(F.default,{socialAccountsConstructor:t.socialAccountsConstructor,dialog:t.dialog,product:n}),m.default.createElement(I.default,{additionalInfoConstructor:t.additionalInfoConstructor,dialog:t.dialog})),m.default.createElement(_.default,{isNewProduct:s}),m.default.createElement(w.default,{isNewProduct:s}))}function d(e){var t=(0,Y.default)(),r=t.isMobile;var a=s.legacyV6Flags.isFeatureEnabled(n.default.PRODUCT_COMPOSER_REDESIGN);return m.default.createElement(o.Flex,null,!r&&a&&m.default.createElement(o.Flex,{position:"absolute",px:6,py:5},m.default.createElement(i.default,null)),m.default.createElement(l,e))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductForm/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ProductForm/ProductForm.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/SharedStyles.less":function(e,t,r){e.exports={srOnly:"_2etvHrY8M"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantForm/VariantForm.less":function(e,t,r){e.exports={srOnly:"_2XH4zUCrW",container:"UOARM7THT",isMobile:"_3pBN3fKPZ"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantForm/VariantForm.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var m=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var f=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var v=a(r("./common/temp/node_modules/react/index.js"));var b=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var g=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var C=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var h=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var P=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-context.tsx");var x=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));var _=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useDeleteVariant.ts"));var w=a(r("./common/temp/node_modules/classnames/index.js"));var E=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/VariantBreadcrumb.tsx"));var j=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/ImageGallery/VariantImageGallery.tsx"));var A=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Pricing.tsx"));var S=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/Inventory.tsx"));var O=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantForm/VariantForm.less"));function n(e){var t=e.product,r=e.variantId;switch(t.productType){case C.default.PHYSICAL:case C.default.SERVICE:var a=(0,y.useProductContext)(),n=a.patchVariant;var s=(0,P.useRouterContext)(),o=(0,f.default)(s,2),c=o[1];var i=t.variants.find(function(e){return e.id===r});var u=(0,x.default)(),l=u.isMobile;var d=(0,_.default)(),p=d.deleteVariant;if(!i)throw new Error("Could not find a variant with id: ".concat(r));return v.default.createElement("div",{className:(0,w.default)(O.default.container,(0,m.default)({},O.default.isMobile,l))},!l&&v.default.createElement(E.default,{productName:t.name,variantAttributes:i.attributes}),v.default.createElement(j.default,{variant:i}),v.default.createElement(A.default,{onSale:i.onSale,price:i.price,salePrice:i.salePrice,onChangePrice:function e(t,r){n(i.id,{price:t,salePrice:r})},onChangeSalePrice:function e(t){n(i.id,{salePrice:t})},onChangeOnSale:function e(t){n(i.id,{onSale:t})}}),v.default.createElement(S.default,{stock:i.stock,sku:i.sku,onChangeStock:function e(t){n(i.id,{stock:t})},onChangeSku:function e(t){n(i.id,{sku:t})}}),v.default.createElement(b.Cell,{label:v.default.createElement(g.Button.Danger,{sx:{ml:1,alignSelf:"start"},animationDirection:"none",onClick:function e(){p(i.id,function(){c({route:P.Route.BACK})})}},v.default.createElement(h.T,{project:"commerce-product-composer"},"Delete Variant"))}));default:throw new Error("Variant Form can not render for type: ".concat(t.productType))}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantForm/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantForm/VariantForm.tsx"));var s=n.default;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/Preview.less":function(e,t,r){e.exports={container:"_1T_C4nb7y",previewTitle:"_1sN79w8ds",previewCard:"_2V1X-VMdY",productImage:"_3ktQKREmo"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/Preview.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var o=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/PreviewImage.tsx"));var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/Preview.less"));function i(e){var t=e.children,r=e.productImages;var a=r[0];return n.default.createElement("div",{className:c.default.container},n.default.createElement("div",{className:c.default.previewTitle},n.default.createElement(s.T,{project:"commerce-product-composer"},"Preview")),n.default.createElement("div",{className:c.default.previewCard},a?n.default.createElement("img",{src:a.urls.https,className:c.default.productImage}):n.default.createElement(o.default,null),t))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/PreviewImage.less":function(e,t,r){e.exports={container:"_3NjYYc5xC"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/PreviewImage.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/PreviewImage.less"));function o(){return n.default.createElement("div",{className:s.default.container})}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGenerator.less":function(e,t,r){e.exports={container:"_3MZdHPT3a",header:"_3cPnLY5WA",description:"_2h16hE5aJ",optionContainer:"_3evKE-UL1",option:"_3EJDqpdUe",moreMenu:"_3ZrJrZ3_Z",tagManager:"_3uPRikWnN",labelContextField:"_1m3K9ur2c",customInput:"_2fwnrRS9V",optionLabel:"_3YmOmk9L8",plusIcon:"kKbK2zx4j",previewContainer:"_3F6yTxngS",previewOptionLabelContainer:"_3RjGRL2qe",previewOptions:"_11tzz_CsG",select:"_3KRtIDtkA",listItem:"_2PtFTRCU5",dragHandle:"_1Fy69rlRD",optionList:"JTDDB5dPl",sortableHelper:"_2QDBpPH0T"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGenerator.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=d;t.CUSTOM_LABEL=void 0;var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var N=n(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var V=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var o=n(r("./common/temp/node_modules/lodash/uniq.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var q=a(r("./common/temp/node_modules/react/index.js"));var c=n(r("./common/temp/node_modules/classnames/index.js"));var B=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var L=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var U=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var G=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var W=n(r("./common/temp/node_modules/@sqs/core-components/primitives/Input.js"));var Y=n(r("./common/temp/node_modules/@sqs/core-components/fields/DropdownSelectField.js"));var z=n(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var H=n(r("./common/temp/node_modules/@sqs/core-components/fields/ContextField.js"));var i=r("./common/temp/node_modules/@sqs/react-sortable-hoc/dist/react-sortable-hoc.umd.js");var K=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var Z=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var X=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var J=n(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var u=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/defaultOptions.ts"));var Q=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/Preview.tsx"));var $=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/generateVariants.ts"));var ee=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGeneratorMobile.tsx"));var te=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.tsx"));var re=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/validateVariants.ts");var ae=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGenerator.less"));var ne=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/TagManagerSuggestionWrapper.tsx"));var se=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionListWrapper.tsx"));var oe=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/arrayMove.ts"));var ce=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),true).forEach(function(e){(0,s.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var ue=(0,B.t)("Custom...");t.CUSTOM_LABEL=ue;var le=(0,i.SortableElement)(function(e){var t=e.index,r=e.children;return q.default.createElement("li",{className:ae.default.listItem,key:t},r)});var de=(0,i.SortableContainer)(function(e){var t=e.className,r=e.children;return q.default.createElement("ul",{className:(0,c.default)(t,ae.default.optionList)},r)});var pe=(0,i.SortableHandle)(function(e){var t=e.children;return t});var me=u.default.map(function(e){return e.label});function fe(e){if(!e)return[];var s=e.variantAttributeNames.map(function(e){return{label:e,values:[]}});e.variants.forEach(function(e){Object.entries(e.attributes).forEach(function(e){var t=(0,V.default)(e,2),r=t[0],a=t[1];var n=s.find(function(e){return(null===e||void 0===e?void 0:e.label)===r});n&&!n.values.includes(a)&&a.length>0&&n.values.push(a)})});return s}function ve(t){return u.default.find(function(e){return e.label===t})}function be(t){return me.filter(function(e){return!t.includes(e)})}function ge(e,t){var r=e[t];var a=be(e);return(0,o.default)([].concat((0,N.default)(r?[r]:[]),(0,N.default)(a),[ue])).map(function(e){return{label:e,value:e}})}function d(e){var a=e.onClose,t=e.isMobile;var r=(0,K.useProductContext)(),n=r.product,s=r.patchProduct;var o=fe(n);var c=(0,q.useState)(o),i=(0,V.default)(c,2),u=i[0],l=i[1];var d=(0,q.useState)(false),p=(0,V.default)(d,2),m=p[0],f=p[1];var v=(0,q.useState)(false),b=(0,V.default)(v,2),g=b[0],C=b[1];if(!n)return null;var h=u.length>0?u:g?[]:[{label:me[0],values:[]}];var y=h.map(function(e){var t=e.label;return t});var P=(0,J.default)(n.productType);var x=(0,re.getHasOptionErrors)(h);var _=(0,re.getErrorMessageIdForOption)(h);var w=(0,re.getHasOptionsErrors)(h);var E=m?(0,re.getErrorMessageForOptions)(h):null;var j=!!E;var A="error-options";function S(){l([{label:be(y)[0],values:[]}].concat((0,N.default)(h)))}function O(r,a){l(h.map(function(e,t){return t===a?r:e}))}function I(){document.body.style.cursor="grabbing"}function T(e){var t=e.oldIndex,r=e.newIndex;document.body.style.cursor="";l((0,oe.default)(h,t,r))}function k(r){C(true);l(h.filter(function(e,t){return t!==r}))}function F(r){l(h.map(function(e,t){return t===r?ie({},e,{values:[]}):e}))}function D(){if(n&&P){var t=o.map(function(e){return e.label});var r=h.map(function(e){return e.label});t.forEach(function(e){r.includes(e)||(0,Z.trackDeleteProductOption)({optionName:e,productId:n.id,productName:n.name,productType:P,productEditor:X.ProductEditor.PRODUCT_COMPOSER_V1})});r.forEach(function(e){t.includes(e)||(0,Z.trackAddProductOption)({optionName:e,productId:n.id,productName:n.name,productType:P,productEditor:X.ProductEditor.PRODUCT_COMPOSER_V1})})}}function R(e){e.forEach(function(e){n&&!n.variants.includes(e)&&P&&(0,Z.trackAddVariant)({productId:n.id,productName:n.name,productType:P,variantId:e.id,productEditor:X.ProductEditor.PRODUCT_COMPOSER_V1})})}function M(){if(x||w){f(true);return}var e=(0,$.default)(h,n.variants),t=e.generatedVariants,r=e.filteredOptions;s({variants:t,variantAttributeNames:r.map(function(e){var t=e.label;return t})});D();R(t);a()}if(t)return q.default.createElement(ee.default,{options:h,onAddOption:S,onUpdate:O,onApply:M,onClose:a,onDelete:k,getDropdownOptions:function e(t){return ge(y,t)}});return q.default.createElement("div",{className:ae.default.container},q.default.createElement(L.Flex,{flexDirection:"column",className:ae.default.optionContainer},q.default.createElement(te.default,{className:ae.default.header},q.default.createElement(te.default.Left,null,q.default.createElement(L.Button.Tertiary,{animationDirection:"none",onClick:function e(){a()}},(0,B.t)("Cancel")))),q.default.createElement(L.Text.Title,{mb:2,sx:{paddingLeft:G.space[6]}},(0,B.t)("Add Options")),q.default.createElement("div",{className:ae.default.description},(0,B.t)("Product options allow you to sell different versions of the same product, like clothes in different colors or sizes.")),h.length<ce.MAX_NUM_OPTIONS&&q.default.createElement(L.Button.Tertiary,{animationDirection:"none",onClick:function e(){return S()},sx:{alignSelf:"start",display:"flex",alignItems:"center",paddingLeft:G.space[6]},mt:6},q.default.createElement(U.Plus,{className:ae.default.plusIcon}),(0,B.t)("Add Option")),q.default.createElement(q.default.Fragment,null,q.default.createElement(L.Flex,{sx:{paddingLeft:G.space[6]}},q.default.createElement(H.default,{className:ae.default.labelContextField,label:(0,B.t)("Options")}),q.default.createElement(H.default,{className:ae.default.labelContextField,label:(0,B.t)("Variants")})),q.default.createElement(de,{onSortStart:I,onSortEnd:T,useDragHandle:true,helperClass:ae.default.sortableHelper},h.map(function(a,n){var e=a.label,t=a.values,r=a.isNewCustom;var s=ve(e);var o=t.length>0;var c=m?(0,re.getErrorMessageForOption)(a):null;var i=!!c;var u="error-label-".concat(e);return q.default.createElement(le,{key:n,index:n},q.default.createElement(L.Flex,{className:ae.default.option,ml:-2,sx:{"&:hover":{"#drag-handle":{opacity:1}}}},q.default.createElement(L.Flex,{sx:{zIndex:1},display:"flex",justifyContent:"center",mt:"11px",ml:"15px",mr:"-4px"},q.default.createElement(pe,null,q.default.createElement(U.Drag,{id:"drag-handle",className:ae.default.dragHandle}))),q.default.createElement("div",null,r||!ve(e)?q.default.createElement(z.default,{flush:true,className:ae.default.customInput,focusable:false},q.default.createElement(W.default,{placeholder:(0,B.t)("Option"),value:e,onChange:function e(t){O(ie({},a,{label:t}),n)},autoFocus:!e})):q.default.createElement(Y.default,{flush:true,className:ae.default.optionLabel,placeholder:(0,B.t)("Option"),value:""===e?void 0:e,options:ge(y,n),onChange:function e(t){var r=t===ue;O(ie({},a,{label:r?"":t,isNewCustom:r}),n)}})),q.default.createElement(L.Flex,{flexGrow:1,"aria-describedby":i?u:void 0},q.default.createElement(ne.default,{isReorderable:true,helperClass:ae.default.sortableHelper,containerClassName:ae.default.tagManager,inputPlaceholder:function e(){if(t.length>0)return(0,B.t)("Add...");return(null===s||void 0===s?void 0:s.placeholder)||(0,B.t)("Add option values...")},value:t.map(function(e){return{text:e}}),onChange:function e(t){return O(ie({},a,{values:t.map(function(e){var t=e.text;return t})}),n)},allSuggestions:(null===s||void 0===s?void 0:s.suggestions)||[],showFilter:false,enableEdit:false,promptOnDelete:false,isIncludingInput:true,isMatchingStart:true})),q.default.createElement("div",{className:ae.default.moreMenu},q.default.createElement(se.default,null,q.default.createElement(se.default.ButtonDanger,{onClick:function e(){k(n)}},(0,B.t)("Delete")),o&&q.default.createElement(se.default.Button,{onClick:function e(){F(n)}},(0,B.t)("Clear"))))),i&&q.default.createElement(L.Box,{mt:1,ml:6},q.default.createElement(L.Text.Caption,{id:u,role:"alert",color:"red"},c)))})),j&&q.default.createElement(L.Box,{mt:1,ml:6},q.default.createElement(L.Text.Caption,{id:A,role:"alert",color:"red"},E)),q.default.createElement(L.Flex,{sx:{pt:4,pl:6}},q.default.createElement(L.Button.Primary,{animationDirection:"none",sx:{px:6,py:3},onClick:M,"aria-describedby":j?A:_,disabled:m&&(w||x)},(0,B.t)("Apply"))))),q.default.createElement("div",{className:ae.default.previewContainer},q.default.createElement(Q.default,{productImages:n.images},q.default.createElement("div",{className:ae.default.previewOptions},h.map(function(e,t){return q.default.createElement("label",{key:t,className:ae.default.previewOptionLabelContainer},q.default.createElement(H.default,{label:e.label}),q.default.createElement("select",{className:ae.default.select},q.default.createElement("option",null,(0,B.t)("Select")),(0,N.default)(e.values).map(function(e){return q.default.createElement("option",{value:e,key:e},e)})))})))))}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGeneratorMobile.less":function(e,t,r){e.exports={header:"_3135q7gYo",tagManager:"_1QYnp_U3-"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGeneratorMobile.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var x=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var _=a(r("./common/temp/node_modules/react/index.js"));var w=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var E=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var j=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var A=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var S=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/validateVariants.ts");var O=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGenerator.tsx");var l=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");var I=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/defaultOptions.ts"));var T=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FormFields/TagManagerSuggestionWrapper.tsx"));var k=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionSheet.tsx"));var F=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGeneratorMobile.less"));function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function R(e){var t=e.onClickLeftButton,r=e.onClickRightButton;return _.default.createElement(w.Flex,{sx:{mb:6},justifyContent:"space-between"},t&&_.default.createElement(E.BackButton,{sx:{ml:-1},onClick:t},"Back"),r&&_.default.createElement(w.Button.Tertiary,{onClick:r},"Apply"))}function b(e){var t=e.option,r=e.onBack,a=e.index,n=e.onUpdate,s=e.onDelete,o=e.getDropdownOptions,c=e.isNewVariant;var i=_.default.useState(t),u=(0,x.default)(i,2),l=u[0],d=u[1];var p=_.default.useState(),m=(0,x.default)(p,2),f=m[0],v=m[1];var b=_.default.useState(false),g=(0,x.default)(b,2),C=g[0],h=g[1];var y=o(a);var P=I.default.find(function(e){return e.label===l.label});return _.default.createElement(w.Flex,{flexDirection:"column"},_.default.createElement(R,{onClickLeftButton:function e(){var t=(0,S.getErrorMessageForOption)(l);if(t){v(t);return}n(l);r()}}),_.default.createElement(w.Text.Title,null,c?(0,A.t)("New option"):(0,A.t)("Edit option")),_.default.createElement(w.Text.Label,{sx:{mt:6}},(0,A.t)("Option")),l.isNewCustom?_.default.createElement(E.Cell,{body:_.default.createElement(E.TextInput,{value:l.label,placeholder:(0,A.t)("Write option here..."),onChange:function e(t){return d(D({},l,{label:t}))}}),sx:{borderBottom:1,borderColor:"gray.800"}}):_.default.createElement(E.Cell,{label:l.label,sx:{borderBottom:1,borderColor:"gray.800"},exteriorAccessory:_.default.createElement(j.ChevronLargeDown,null),onClick:function e(){return h(true)}}),_.default.createElement(w.Text.Label,{sx:{mt:6}},(0,A.t)("Variants")),_.default.createElement(T.default,{isReorderable:true,containerClassName:F.default.tagManager,inputPlaceholder:function e(){if(l.values.length>0)return(0,A.t)("Add...");return(null===P||void 0===P?void 0:P.placeholder)||(0,A.t)("Add option values...")},value:l.values.map(function(e){return{text:e}}),onChange:function e(t){d(D({},l,{values:t.map(function(e){var t=e.text;return t})}))},allSuggestions:(null===P||void 0===P?void 0:P.suggestions)||[],showFilter:false,enableEdit:false,promptOnDelete:false,isIncludingInput:true,isMatchingStart:true}),f&&_.default.createElement(w.Text.Caption,{sx:{mt:1},color:"red"},f),_.default.createElement(E.Cell,{sx:{p:0,mt:5,borderBottom:1,borderColor:"gray.800"},body:_.default.createElement(w.Button.Danger,{sx:{alignSelf:"start"},onClick:s},(0,A.t)("Delete"))}),_.default.createElement(k.default,{isOpen:C,onDismiss:function e(){return h(false)},header:(0,A.t)("Select option"),body:_.default.createElement(_.default.Fragment,null,y.map(function(r){return _.default.createElement(E.Cell,{sx:{mx:3,borderBottom:1,borderColor:"gray.800"},label:r.label,onClick:function e(){var t=r.label===O.CUSTOM_LABEL;d(D({},l,{label:t?"":r.label,isNewCustom:t}));h(false)},interiorPre:r.label===l.label&&_.default.createElement(j.Checkmark,null)})}),_.default.createElement(w.Flex,{sx:{mb:8}}))}))}function g(e){var t=e.onBack,r=e.onClickVariant,a=e.options,n=e.onAddOption,s=e.onApply;var o=_.default.useState(""),c=(0,x.default)(o,2),i=c[0],u=c[1];return _.default.createElement(w.Flex,{flexDirection:"column"},_.default.createElement(R,{onClickLeftButton:t,onClickRightButton:function e(){var t=(0,S.getOptionWithErrors)(a);if(t){u((0,S.getErrorMessageForOption)(t));return}s()}}),_.default.createElement(w.Text.Title,null,(0,A.t)("Add options")),_.default.createElement(w.Text.Subtitle,{sx:{color:"gray.300"}},(0,A.t)("Product options allow you to sell different versions of the same product, like clothes in different colors or sizes.")),a.map(function(e,t){return _.default.createElement(E.Cell,{label:e.label,sx:{borderBottom:1,borderColor:"gray.800"},description:e.values.length>0?e.values.join(", "):(0,A.t)("Add Variants"),exteriorAccessory:_.default.createElement(j.ChevronLargeRight,null),onClick:function e(){return r(t)}})}),i&&_.default.createElement(w.Text.Caption,{role:"alert",color:"red",sx:{mt:2}},i),a.length<l.MAX_NUM_OPTIONS&&_.default.createElement(w.Button.Tertiary,{onClick:n,sx:{display:"flex",alignItems:"center",alignSelf:"start",mt:3}},_.default.createElement(j.Plus,{sx:{mr:1}}),(0,A.t)("Add Option")))}function o(e){var t=e.options,r=e.onAddOption,a=e.onDelete,n=e.onUpdate,s=e.onApply,o=e.onClose,c=e.getDropdownOptions;var i=_.default.useState(-1),u=(0,x.default)(i,2),l=u[0],d=u[1];var p=_.default.useState(false),m=(0,x.default)(p,2),f=m[0],v=m[1];return _.default.createElement(w.Flex,{flexDirection:"column",sx:{mx:3,mt:2}},l>=0?_.default.createElement(b,{isNewVariant:f,option:t[l],onBack:function e(){return d(-1)},onUpdate:function e(t){return n(t,l)},onDelete:function e(){a(l);d(-1)},index:l,getDropdownOptions:c}):_.default.createElement(g,{options:t,onBack:o,onAddOption:function e(){v(true);r();d(t.length)},onApply:s,onClickVariant:function e(t){d(t)}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/defaultOptions.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var n=[{label:(0,a.t)("Color"),placeholder:(0,a.t)("Navy, Black, White..."),suggestions:[(0,a.t)("Aqua"),(0,a.t)("Beige"),(0,a.t)("Black"),(0,a.t)("Blue"),(0,a.t)("Brown"),(0,a.t)("Charcoal"),(0,a.t)("Chartreuse"),(0,a.t)("Chocolate"),(0,a.t)("Cherry"),(0,a.t)("Eggshell"),(0,a.t)("Grey"),(0,a.t)("Green"),(0,a.t)("Ivy"),(0,a.t)("Jade"),(0,a.t)("Kelly Green"),(0,a.t)("Lilac"),(0,a.t)("Lime"),(0,a.t)("Magenta"),(0,a.t)("Maroon"),(0,a.t)("Mint"),(0,a.t)("Mustard"),(0,a.t)("Navy"),(0,a.t)("Olive"),(0,a.t)("Orange"),(0,a.t)("Peach"),(0,a.t)("Purple"),(0,a.t)("Pink"),(0,a.t)("Red"),(0,a.t)("Silver"),(0,a.t)("Salmon"),(0,a.t)("Tan"),(0,a.t)("Teal"),(0,a.t)("Violet"),(0,a.t)("White"),(0,a.t)("Yellow")]},{label:(0,a.t)("Size"),placeholder:(0,a.t)("Small, Medium, Large..."),suggestions:[(0,a.t)("XSmall"),(0,a.t)("Small"),(0,a.t)("Medium"),(0,a.t)("Large"),(0,a.t)("XLarge"),(0,a.t)("XXLarge"),(0,a.t)("XXXLarge"),(0,a.t)("Extra Narrow"),(0,a.t)("Narrow"),(0,a.t)("Normal, "),(0,a.t)("Wide"),(0,a.t)("Extra Wide"),(0,a.t)("Tall"),(0,a.t)("Petite"),"0","00","1","1.5","2","2.5","3","3.5","4","4.5","5","5.5","6","6.5","7","7.5","8","8.5","9","9.5","10","10.5","11","11.5","12","12.5","13","14.5","14","14.5","15","15.5","16","16.5","17","17.5","18","18.5","19","19.5","20","20.5","21","21.5","22","22.5","23","23.5","24","24.5","25","25.5","26","26.5","27","27.5","28","28.5","29","29.5","30","30.5","31","31.5","32","32.5","33","33.5","34","34.5","35","35.5","36","36.5","37","37.5","38","38.5","39","39.5","40","40.5","41","41.5","42","42.5","43","43.5","44","44.5","45","45.5","46","46.5","47","47.5","48","48.5","49","49.5","50","50.5","51","51.5","52","52.5","53","53.5","54","54.5","55","55.5","56","56.5","57","57.5","58","58.5","59","59.5","60","70","80","90","100"]},{label:(0,a.t)("Material"),placeholder:(0,a.t)("Wood, Steel, Plastic..."),suggestions:[(0,a.t)("Birch"),(0,a.t)("Brass"),(0,a.t)("Cardboard"),(0,a.t)("Canvas"),(0,a.t)("Cedar"),(0,a.t)("Cement"),(0,a.t)("Cherry"),(0,a.t)("Concrete"),(0,a.t)("Copper"),(0,a.t)("Cotton"),(0,a.t)("Crystal"),(0,a.t)("Faux Leather"),(0,a.t)("Faux Fur"),(0,a.t)("Glass"),(0,a.t)("Granite"),(0,a.t)("Gold"),(0,a.t)("Gold Plated"),(0,a.t)("Gold Vermeil"),(0,a.t)("Leather"),(0,a.t)("Mahogany"),(0,a.t)("Maple"),(0,a.t)("Marbal"),(0,a.t)("Metal"),(0,a.t)("Oak"),(0,a.t)("Opal"),(0,a.t)("Paper"),(0,a.t)("Pine"),(0,a.t)("Plastic"),(0,a.t)("Polyester"),(0,a.t)("Poplar"),(0,a.t)("Silver"),(0,a.t)("Silver Plated"),(0,a.t)("Sterling Silver"),(0,a.t)("Twill"),(0,a.t)("Vegan Leather"),(0,a.t)("Walnut"),(0,a.t)("Wood")]}];var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/generateVariants.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.generateGiftCardVariant=j;t.default=S;t.generateEmptyVariants=t.DEFAULT_SHIPPING_SIZE=t.DEFAULT_SHIPPING_WEIGHT=void 0;var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/toArray.js"));var l=a(r("./common/temp/node_modules/lodash/isEqual.js"));var d=a(r("./common/temp/node_modules/uuid/v1.js"));var n=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/MeasurementStandard.js"));var p=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/generateSku.ts"));var m=a(r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js"));var f=a(r("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js"));var v=r("./src/main/webapp/universal/src/shared/types/NormalizedVariant.ts");function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),true).forEach(function(e){(0,o.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function C(e){var t=(0,u.default)(e),r=t[0],a=t[1],n=t.slice(2);if(!a)return r;if(n.length>0){var s=C([a].concat((0,i.default)(n)));return C([r,s])}var o=[];r.forEach(function(e){var t=(0,c.default)(e,1),r=t[0];a.forEach(function(e){o=[].concat((0,i.default)(o),[[r].concat((0,i.default)(e))])})});return o}function h(e){return e.map(function(r){return(0,i.default)(r.values).reduce(function(e,t){return[].concat((0,i.default)(e),[[{value:t,name:r.label}]])},[])})}var y=function e(){return n.default.fromJson({currencyCode:f.default.getStoreCurrency(),decimalValue:"0.00"})};var P=function e(){var t;return null===(t=m.default.getState().storeSettings)||void 0===t?void 0:t.measurementStandard};var x=function e(){return{unit:P()===s.default.IMPERIAL?v.ShippingWeightUnit.POUND:v.ShippingWeightUnit.KILOGRAM,value:0}};t.DEFAULT_SHIPPING_WEIGHT=x;var _=function e(){return{unit:P()===s.default.IMPERIAL?v.ShippingSizeUnit.INCH:v.ShippingSizeUnit.CENTIMETER,length:0,width:0,height:0}};t.DEFAULT_SHIPPING_SIZE=_;function w(){return{attributes:{},id:(0,d.default)(),sku:(0,p.default)(),price:y(),salePrice:y(),onSale:false,stock:{unlimited:false,quantity:1},shippingWeight:x(),shippingSize:_()}}function E(e,c){var i=e.reduce(function(e,t){var r=t.name,a=t.value;return g({},e,(0,o.default)({},r,a))},{});var t=function(){if(0===c.length)return{};var n=0;var s=0;var o=false;var e=function e(t){var r=c[t];var a=Object.values(i).filter(function(e){return Object.values(r.attributes).includes(e)}).length;if(a>=n){n=a;s=t;if((0,l.default)(Object.values(r.attributes).sort(),Object.values(i).sort())){o=true;return"break"}}};for(var t=0;t<c.length;t++){var r=e(t);if("break"===r)break}return{cloneVariant:c[s],isExactMatch:o}}(),r=t.cloneVariant,a=void 0===r?null:r,n=t.isExactMatch,s=void 0!==n&&n;if(a)return g({},a,{attributes:i},s?{}:{id:(0,d.default)(),sku:(0,p.default)()});return g({},w(),{attributes:i})}function j(e){return{attributes:{},id:(0,d.default)(),sku:(0,p.default)(),price:e,salePrice:y(),onSale:false,stock:{unlimited:true,quantity:0}}}var A=function e(){return[w()]};t.generateEmptyVariants=A;function S(e,t){if(e.every(function(e){return 0===e.values.length}))return{generatedVariants:A(),filteredOptions:[]};var r=e.filter(function(e){return e.values.length>0}).map(function(e){return g({},e,{label:e.label.trim()})});var a=h(r);var n=C(a);var s=n.map(function(e){return E(e,t)});return{generatedVariants:s,filteredOptions:r}}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=a(r("./common/temp/node_modules/react/index.js"));var o=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/VariantGenerator.tsx"));var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));var u=1086;function n(e){var t=e.isOpen,r=e.onRequestClose;var a=(0,i.default)(),n=a.isMobile;return s.default.createElement(o.Modal.Transition,null,t&&s.default.createElement(o.Modal,{onRequestClose:r},s.default.createElement(o.Modal.Overlay,null),s.default.createElement(o.Modal.Position,{position:"center"},s.default.createElement(o.Modal.Dialog.ResponsiveProvider,{maxWidth:u},s.default.createElement(o.Modal.Dialog,null,s.default.createElement(c.default,{onClose:r,isMobile:n}))))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/validateVariants.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getErrorMessageForOptions=t.getHasOptionsErrors=t.getErrorMessageForOption=t.getOptionWithErrors=t.getErrorMessageIdForOption=t.getHasOptionErrors=void 0;var a=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var n=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");var s=function e(t){return 0===t.values.length};var o=function e(t){return!t.label.trim()};var c=function e(t){return t.label.length>n.MAX_OPTION_LABEL_LENGTH};var i=function e(t){return t.every(s)};var u=function e(t){return!i(t)&&t.some(function(e){return s(e)||o(e)||c(e)})};t.getHasOptionErrors=u;var l=function e(t){var r;return null===(r=t.find(function(e){return s(e)||o(e)||c(e)}))||void 0===r?void 0:r.label};t.getErrorMessageIdForOption=l;var d=function e(t){return t.find(function(e){return s(e)||o(e)||c(e)})};t.getOptionWithErrors=d;var p=function e(t){if(o(t)&&s(t))return(0,a.t)("Option must have a name and one or more variants.");if(o(t))return(0,a.t)("Option must have a name.");if(s(t))return(0,a.t)("Option must have one or more variants.");if(c(t))return(0,a.t)("Option name must be under {length} characters.",{length:n.MAX_OPTION_LABEL_LENGTH})};t.getErrorMessageForOption=p;var m=function e(t){return t.map(function(e){return e.values.length}).reduce(function(e,t){return e*t},1)>n.MAX_NUM_VARIANTS};var f=function e(t){return t.every(function(e){return e.values.length<2})};var v=function e(r){return r.some(function(t){var e=r.filter(function(e){return t.label===e.label});return e.length>1})};var b=function e(t){return t.some(function(e){return e.values.some(function(e){return e.length>n.MAX_OPTION_VALUE_LENGTH})})};var g=function e(t){return!i(t)&&(f(t)||m(t)||v(t)||b(t))};t.getHasOptionsErrors=g;var C=function e(t){if(f(t))return(0,a.t)("Options must generate more than one variant.");if(m(t))return(0,a.pluralize)({one:"Item cannot have more than {%n} variant.",other:"Item cannot have more than {%n} variants."},n.MAX_NUM_VARIANTS);if(v(t))return(0,a.t)("Options must not have any duplicate names.");if(b(t))return(0,a.t)("Variant names must be under {length} characters.",{length:n.MAX_OPTION_VALUE_LENGTH})};t.getErrorMessageForOptions=C},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/ImageDropZone.less":function(e,t,r){e.exports={loadingSpinner:"_1XkXp_0EE",toolbar:"_3VaPOOYx-",container:"_30uBRb22W",hidden:"_2ssep9_qf"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/ImageDropZone.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var c=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var i=n(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var u=n(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=n(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var d=n(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var p=n(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var m=n(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var f=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var v=a(r("./common/temp/node_modules/react/index.js"));var b=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var g=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var C=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var h=n(r("./common/temp/node_modules/classnames/index.js"));var y=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var P=r("./src/main/webapp/universal/src/shared/constants/UploadMaxSize.js");var x=r("./src/main/webapp/universal/src/shared/constants/UploadMimeTypes.js");var _=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/ImageDropZone.less"));function w(n){var s=E();return function e(){var t=(0,m.default)(n),r;if(s){var a=(0,m.default)(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);return(0,p.default)(this,r)}}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var s=function(e){(0,d.default)(s,e);var a=w(s);function s(){var n;(0,i.default)(this,s);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n=a.call.apply(a,[this].concat(t));(0,f.default)((0,l.default)(n),"state",{isDragging:false,isLoading:false});(0,f.default)((0,l.default)(n),"renderOverlay",function(){var e=n.state,t=e.isDragging,r=e.isLoading;return v.default.createElement(g.Flex,{position:"absolute",left:4,right:2,bg:"gray.300",color:"white",fontSize:"2",borderRadius:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"calc(100% - ".concat(C.space[8],")"),height:"calc(100% - ".concat(C.space[4],")"),sx:{pointerEvents:"none"}},t&&v.default.createElement("span",null,v.default.createElement(b.T,{project:"commerce-product-composer"},"Drop Images to Upload")),r&&v.default.createElement(y.LoadingSpinner,{size:"large"}))});(0,f.default)((0,l.default)(n),"handleImageFileSelect",function(){var t=(0,c.default)(o.default.mark(function e(r){var a;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.setState({isDragging:false,isLoading:true});t.prev=1;a=n.props.uploadImage;t.next=5;return a(r);case 5:n.setState({isLoading:false});t.next=11;break;case 8:t.prev=8;t.t0=t["catch"](1);n.setState({isLoading:false});case 11:case"end":return t.stop()}},e,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}());(0,f.default)((0,l.default)(n),"setDragging",function(){n.setState({isDragging:true})});(0,f.default)((0,l.default)(n),"resetDragging",function(){n.setState({isDragging:false})});return n}(0,u.default)(s,[{key:"render",value:function e(){var t=this.props.children;var r=this.state,a=r.isDragging,n=r.isLoading;return v.default.createElement(g.Flex,{display:"flex",position:"relative",width:"100%"},v.default.createElement(y.FileDropZone,{className:(0,h.default)(_.default.container,(0,f.default)({},_.default.hidden,a||n)),onDrop:this.handleImageFileSelect,onDragEnter:this.setDragging,onDragLeave:this.resetDragging,validMimeTypes:x.IMAGE_MIME_TYPES,maxSize:P.MAX_SIZE,multiple:false},t),(a||n)&&this.renderOverlay())}}]);return s}(v.Component);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/ImageUploader.less":function(e,t,r){e.exports={filepicker:"zYMLZLs5c",uploadIcon:"_2EIPETiYC",uploadText:"_3RpkGdJfV",isLoading:"_2CxMf6fZe",icon:"TWJ6gjz26"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/ImageUploader.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var d=a(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=a(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var f=a(r("./common/temp/node_modules/classnames/index.js"));var v=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var b=a(r("./common/temp/node_modules/react/index.js"));var g=a(r("./common/temp/node_modules/@sqs/core-components/primitives/Icon.js"));var C=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var h=r("./src/main/webapp/universal/src/shared/constants/UploadMaxSize.js");var y=r("./src/main/webapp/universal/src/shared/constants/UploadMimeTypes.js");var P=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/ImageUploader.less"));function x(n){var s=_();return function e(){var t=(0,p.default)(n),r;if(s){var a=(0,p.default)(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);return(0,d.default)(this,r)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var s=function(e){(0,l.default)(s,e);var a=x(s);function s(){var n;(0,i.default)(this,s);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n=a.call.apply(a,[this].concat(t));(0,m.default)((0,u.default)(n),"state",{isLoading:false});(0,m.default)((0,u.default)(n),"handleImageFileSelect",function(){var t=(0,c.default)(o.default.mark(function e(r){var a;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.setState({isLoading:true});t.prev=1;a=n.props.uploadImage;t.next=5;return a(r);case 5:n.setState({isLoading:false});t.next=11;break;case 8:t.prev=8;t.t0=t["catch"](1);n.setState({isLoading:false});case 11:case"end":return t.stop()}},e,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}());return n}(0,n.default)(s,[{key:"render",value:function e(){var t=this.state.isLoading;var r=(0,f.default)(P.default.filepicker,(0,m.default)({},P.default.isLoading,t));return b.default.createElement(C.Flex,{position:"relative",width:"100%",height:0,p:"50%",display:"flex",boxSizing:"border-box"},b.default.createElement(v.FilePicker,{className:r,onChange:this.handleImageFileSelect,validMimeTypes:y.IMAGE_MIME_TYPES,maxSize:h.MAX_SIZE,multiple:false,disabled:t},b.default.createElement(g.default,{name:"stepperPlus",className:P.default.icon})))}}]);return s}(b.default.Component);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var A=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var S=a(r("./common/temp/node_modules/react/index.js"));var O=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var I=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var T=a(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var k=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var F=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var D=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js");var R=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.tsx"));var M=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.tsx"));var N=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useProductImageUpload.ts"));var V=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/ImageDropZone.tsx"));var q=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/ImageUploader.tsx"));var B=a(r("./src/main/webapp/universal/src/shared/images/configuration/no-image.png"));var L=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/styles.less"));var U=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var G=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackVariantImages.ts");function W(e){var t;return{id:e.id,assetUrl:e.urls.https,mediaProcessingState:null!==(t=e.mediaProcessingState)&&void 0!==t?t:T.default.READY}}var n=function e(t){var r=t.isOpen,a=t.onClose,n=t.onSave,s=t.images,o=t.mainImageId,c=t.productId,i=t.productName,u=t.productType,l=t.productEditor,d=t.variantId,p=t.firstImage;var m=S.default.useState(o),f=(0,A.default)(m,2),v=f[0],b=f[1];var g=s.map(W);var C=(0,N.default)(),h=C.handleImageUpload;var y=o;S.default.useEffect(function(){b(o)},[r]);S.default.useEffect(function(){r&&(0,G.trackOpenVariantImagePicker)({productId:c,variantId:d,productEditor:l})},[r]);var P=function e(t){h([t],function(e){if(e.id){b(e.id);var t=(0,U.default)(u);t&&(0,G.trackUploadImage)({imageId:e.id,productId:c,productName:i,productType:t,productSection:"variant-image-picker",productEditor:l})}})};S.default.useEffect(function(){p&&P(p)},[r]);var x=function e(t){t.stopPropagation();b(null)};var _=function e(){a();(0,G.trackCloseVariantImagePicker)({productId:c,variantId:d,productEditor:l})};var w=function e(t){return function(e){e.stopPropagation();b(v===t?null:t)}};function E(){v||(0,G.trackRemoveVariantImage)({imageId:v,productId:c,variantId:d,productEditor:l});v&&!y?(0,G.trackAddVariantImage)({imageId:v,productId:c,variantId:d,productEditor:l}):v&&y&&(0,G.trackChangeVariantImage)({imageId:v,productId:c,variantId:d,productEditor:l});y=v}var j=function e(t){t.stopPropagation();var r=s.find(function(e){var t=e.id;return t===v});n(r);a();E()};return S.default.createElement(R.default,{isOpen:r,onRequestClose:_},S.default.createElement(k.Flex,{onClick:x,width:"sizes.750",height:"600px",pt:4,pb:6,flexDirection:"column",overflow:"hidden"},S.default.createElement(M.default,{className:L.default.toolbar},S.default.createElement(M.default.Left,null,S.default.createElement(k.Button.Tertiary,{animationDirection:"none",onClick:function e(t){t.stopPropagation();_()}},S.default.createElement(O.T,{project:"commerce-product-composer"},"Cancel"))),S.default.createElement(M.default.Center,null,S.default.createElement(k.Text.Subtitle,null,S.default.createElement(O.T,{project:"commerce-product-composer"},"Select Variant Image"))),S.default.createElement(M.default.Right,null)),S.default.createElement(k.Flex,{id:"variant-image-upload",flexDirection:"column",overflow:"auto"},S.default.createElement(V.default,{uploadImage:P},g.map(function(e){var t=e.id,r=e.assetUrl,a=e.mediaProcessingState;switch(a){case T.default.QUEUED:return S.default.createElement(k.Flex,{key:t,width:"108px",height:0,pb:"108px",boxSizing:"border-box",mb:3,bg:"gray.900",overflow:"hidden",display:"flex",position:"relative",sx:{transition:"product.default","&:nth-child(3n+2)":{marginLeft:F.space[3],marginRight:F.space[3]}}},S.default.createElement(k.Flex,{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex"},S.default.createElement(k.Flex,{margin:"auto",flexDirection:"column",sx:{"& > loadingSpinner:before":{margin:"auto"}}},S.default.createElement(D.LoadingSpinner,{size:"large",className:L.default.loadingSpinner}))));case T.default.READY:return S.default.createElement(k.Flex,{key:t,onClick:w(t),width:"108px",height:0,pb:"108px",boxSizing:"border-box",mb:3,bg:"gray.900",overflow:"hidden",position:"relative",sx:{cursor:"pointer",transition:"product.default","&:nth-child(3n+2)":{marginLeft:F.space[3],marginRight:F.space[3]}},borderColor:t===v?"transparent":void 0,boxShadow:t===v?"0px 0px 0px 2px #14AAFF":void 0},S.default.createElement(D.Image,{src:r}));case T.default.ERROR:return S.default.createElement(k.Flex,{key:t,width:"108px",height:0,pb:"108px",boxSizing:"border-box",mb:3,bg:"gray.900",overflow:"hidden",position:"relative",sx:{transition:"product.default","&:nth-child(3n+2)":{marginLeft:F.space[3],marginRight:F.space[3]}}},S.default.createElement(D.Image,{src:B.default}));default:return null}}),S.default.createElement(k.Flex,{width:"108px",height:0,pb:"108px",boxSizing:"border-box",mb:3,bg:"gray.900",overflow:"hidden",sx:{transition:"product.default","&:nth-child(3n+2)":{marginLeft:F.space[3],marginRight:F.space[3]}}},S.default.createElement(q.default,{uploadImage:P})))),S.default.createElement(k.Flex,{flexDirection:"column",overflow:"hidden",pt:"66px",pl:4},S.default.createElement(k.Button.Primary,{animationDirection:"none",sx:{position:"absolute",bottom:6,px:6,py:3},onClick:j,"aria-describedby":"variant-image-upload",disabled:null===v},(0,I.t)("Apply")))))};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/styles.less":function(e,t,r){e.exports={loadingSpinner:"_3Q0aWpHEq",toolbar:"_1I8oCLUn9"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTable.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var d=a(r("./common/temp/node_modules/react/index.js"));var p=r("./src/main/webapp/universal/src/shared/types/NormalizedVariant.ts");var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/index.tsx"));var f=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableHeader.tsx"));var v=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableBody.tsx"));var b=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableFooter.tsx"));var g=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/VariantTable.less"));var C=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useSubscription.ts"));function n(e){var t=e.variants,r=e.patchVariant;var a=d.default.useState(false),n=(0,l.default)(a,2),s=n[0],o=n[1];var c=(0,C.default)(),i=c.hasSubscription;var u=(0,p.isPhysicalVariant)(t[0]);return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:g.default.tableGrid},d.default.createElement(f.default,{hasSubscription:i,hasShipping:u}),d.default.createElement(v.default,{variants:t,patchVariant:r,openVariantGenerator:function e(){return o(true)},hasSubscription:i})),d.default.createElement(b.default,{hasSubscription:i,onClickManageOptions:function e(){return o(true)}}),d.default.createElement(m.default,{isOpen:s,onRequestClose:function e(){return o(false)}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableBody.less":function(e,t,r){e.exports={tableGrid:"_1lC3u8T1B",tableCell:"_28JP7xIk-",mainImage:"_2vT94njrb",skuCell:"_3K_NhoD6F",priceCell:"nsou9-Bis",deleteButton:"_34pm9np9O"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableBody.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var j=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var A=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var S=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var O=a(r("./common/temp/node_modules/react/index.js"));var I=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var T=r("./src/main/webapp/universal/src/shared/types/NormalizedVariant.ts");var k=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantImageEditor/index.tsx"));var F=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var D=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var R=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-context.tsx");var n=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/NeedsProduct.tsx"));var M=r("./src/main/webapp/universal/src/shared/constants/UploadMimeTypes.js");var N=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/AttributesCell.tsx"));var V=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/InventoryCell.tsx"));var q=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/MainImageCell.tsx"));var B=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/PriceCell.tsx"));var L=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SalePriceCell.tsx"));var U=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SkuCell.tsx"));var G=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/ShippingCell.tsx"));var W=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableBody.less"));var Y=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/SharedStyles.less"));var z=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useDeleteVariant.ts"));function s(e){var t=e.variants,l=e.patchVariant,d=e.openVariantGenerator,p=e.hasSubscription;var r=O.default.useState(null),a=(0,S.default)(r,2),m=a[0],f=a[1];var n=O.default.useState(null),s=(0,S.default)(n,2),o=s[0],v=s[1];var c=O.default.useState(null),i=(0,S.default)(c,2),b=i[0],g=i[1];var C=O.default.useRef(null);var u=(0,D.useProductContext)(),h=u.product,y=u.patchProduct;var P=(0,R.useRouterContext)(),x=(0,S.default)(P,2),_=x[1];if(!h)throw new Error("product required");var w=(0,z.default)(),E=w.deleteVariant;return O.default.createElement(O.default.Fragment,null,t.map(function(e){var t;var a=e.id,r=e.mainImage,n=e.attributes,s=e.sku,o=e.stock,c=e.price,i=e.salePrice,u=e.onSale;return O.default.createElement(O.default.Fragment,{key:a},O.default.createElement("div",{className:W.default.tableCell},O.default.createElement(q.default,{mainImage:r,onUpload:function e(){if(h.images.length>0)f(a);else{var t;v(a);null===(t=C.current)||void 0===t?void 0:t.click()}},onReplace:function e(){return f(a)},onRemove:function e(){return l(a,{mainImage:void 0})}}),O.default.createElement(k.default,{isOpen:m===a,onClose:function e(){f(null);v(null);g(null)},onSave:function e(t){return l(a,{mainImage:t})},onUpdateImages:function e(t){return y({images:t})},images:h.images,mainImageId:null!==(t=null===r||void 0===r?void 0:r.id)&&void 0!==t?t:null,productId:h.id,productName:h.name,productType:h.productType,productEditor:F.ProductEditor.PRODUCT_COMPOSER_V1,variantId:a,firstImage:b})),O.default.createElement("div",{className:W.default.tableCell},O.default.createElement(N.default,{attributes:n,openVariantGenerator:d})),O.default.createElement("div",{className:W.default.skuCell},O.default.createElement(U.default,{sku:s,onChange:function e(t){return l(a,{sku:t})}})),O.default.createElement("div",{className:W.default.tableCell},!p&&O.default.createElement(V.default,{stock:o,onChange:function e(t){l(a,{stock:t})}})),O.default.createElement("div",{className:W.default.priceCell},O.default.createElement(B.default,{price:c,salePrice:i,onSale:u,onChange:function e(t,r){return l(a,{price:t,salePrice:r})}})),O.default.createElement("div",{className:W.default.tableCell},O.default.createElement(L.default,{price:c,salePrice:i,onSale:u,onChange:function e(t,r){return l(a,{salePrice:t,onSale:r})}})),O.default.createElement("div",{className:W.default.tableCell},(0,T.isPhysicalVariant)(e)&&O.default.createElement(G.default,{variant:e,onUpdateVariant:function e(t){return l(a,{shippingSize:t.shippingSize,shippingWeight:t.shippingWeight})}})),O.default.createElement("div",{className:W.default.deleteButton},O.default.createElement(I.Trash,{sx:{cursor:"pointer"},onClick:function e(){var t=1===h.variants.length;E(a,function(){t&&_({route:R.Route.BACK})})}})))}),O.default.createElement("label",{htmlFor:"variantImageUpload"},O.default.createElement("input",{id:"variantImageUpload",type:"file",onChange:function(){var t=(0,A.default)(j.default.mark(function e(r){var a;return j.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r.stopPropagation();a=r.target.files;a&&g(a[0]);f(o);case 4:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),accept:Object.values(M.IMAGE_MIME_TYPES).join(),multiple:false,ref:C,className:Y.default.srOnly})))}var o=(0,n.default)(s);t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableFooter.less":function(e,t,r){e.exports={tableGrid:"_37G3PO5dk",tableFooter:"_3TFlMYVBr",subscriptionFooter:"_3iwMHCHEW"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableFooter.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=u;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var o=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableFooter.less"));function u(e){var t=e.onClickManageOptions,r=e.hasSubscription;return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:i.default.tableFooter},n.default.createElement(s.Button.Tertiary,{animationDirection:"none",onClick:t},n.default.createElement(c.T,{project:"commerce-product-composer"},"Manage Options"))),r&&n.default.createElement("div",{className:i.default.subscriptionFooter},n.default.createElement(s.Text.Caption,{sx:{mt:2}},(0,o.t)("Subscription products do not have stock levels."))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableHeader.less":function(e,t,r){e.exports={tableGrid:"_3VQvA9gX5",tableHeader:"_3K8j2sPyQ",tableHeaderCell:"-ZMP0aoSY",rightAligned:"_3LfrafWg-"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableHeader.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./common/temp/node_modules/classnames/index.js"));var o=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTableHeader.less"));function i(e){var t=e.hasSubscription,r=e.hasShipping;return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:c.default.tableHeaderCell},n.default.createElement(o.T,{project:"commerce-product-composer"},"Image")),n.default.createElement("div",{className:c.default.tableHeaderCell},n.default.createElement(o.T,{project:"commerce-product-composer"},"Variation")),n.default.createElement("div",{className:c.default.tableHeaderCell},n.default.createElement(o.T,{project:"commerce-product-composer"},"SKU")),n.default.createElement("div",{className:(0,s.default)(c.default.tableHeaderCell,c.default.rightAligned)},!t&&n.default.createElement(o.T,{project:"commerce-product-composer"},"Units")),n.default.createElement("div",{className:(0,s.default)(c.default.tableHeaderCell,c.default.rightAligned)},n.default.createElement(o.T,{project:"commerce-product-composer"},"Price")),n.default.createElement("div",{className:(0,s.default)(c.default.tableHeaderCell,c.default.rightAligned)},n.default.createElement(o.T,{project:"commerce-product-composer"},"Sale Price")),n.default.createElement("div",{className:(0,s.default)(c.default.tableHeaderCell,c.default.rightAligned)},r&&n.default.createElement(o.T,{project:"commerce-product-composer"},"Shipping")),n.default.createElement("div",{className:(0,s.default)(c.default.tableHeaderCell)}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/VariantTable.less":function(e,t,r){e.exports={tableGrid:"_26LAyIhZf"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/AttributesCell.less":function(e,t,r){e.exports={pillContainer:"_1C_q6LkVk",pill:"_1xDGjTCWj"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/AttributesCell.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/AttributesCell.less"));function o(e){var t=e.attributes,r=e.openVariantGenerator;return n.default.createElement("div",{className:s.default.pillContainer,onClick:r,"data-testid":"pc-variant-table-attributes-cell"},Object.values(t).filter(function(e){return!!e}).map(function(e){return n.default.createElement("div",{key:e,className:s.default.pill},e)}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/InventoryCell.less":function(e,t,r){e.exports={container:"_2BTTtEcxx",unlimited:"_1lfJw6lzK",popover:"jcntx0NNF",popoverContainer:"YZTn-vlqY"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/InventoryCell.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=a(r("./common/temp/node_modules/classnames/index.js"));var m=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var f=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var v=a(r("./common/temp/node_modules/@sqs/core-components/fields/BooleanField.js"));var b=a(r("./common/temp/node_modules/@sqs/core-components/primitives/Input.js"));var g=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var C=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/InventoryCell.less"));var h=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/calculateStockQuantity.ts"));function n(e){var t=e.stock,r=e.onChange;var a=d.default.useState(false),n=(0,l.default)(a,2),s=n[0],o=n[1];var c=d.default.useRef(null);var i=t.quantity||0;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:(0,p.default)(C.default.container,(0,u.default)({},C.default.unlimited,t.unlimited)),ref:c,onClick:function e(){return o(true)}},t.unlimited?"":i),d.default.createElement(f.PopOver,{isOpen:s,anchor:function e(){return c.current},onRequestClose:function e(){return o(false)},className:C.default.popover,position:"bottom-left",anchorPoint:{x:"right",y:"top"},offset:0,hideArrow:true,closeOnClickOutside:true},d.default.createElement(m.Box,{py:1,minWidth:"150px",className:C.default.popoverContainer},d.default.createElement(m.Box,{px:2},d.default.createElement(b.default,{value:t.unlimited?"0":i.toString(),onChange:function e(t){r({unlimited:false,quantity:(0,h.default)(parseInt(t))})},autoFocus:true,rightAlign:true})),d.default.createElement(v.default,{value:t.unlimited,label:(0,g.t)("Unlimited Quantity"),onChange:function e(t){r({unlimited:t,quantity:i})},flush:true,underlined:false}))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/MainImageCell.less":function(e,t,r){e.exports={mainImage:"_1RO6pFY34"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/MainImageCell.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var m=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var f=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionListWrapper.tsx"));var b=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/UploadButton.tsx"));var g=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/MainImageCell.less"));function n(e){var t=e.mainImage,r=e.onUpload,a=e.onReplace,n=e.onRemove;var s=d.default.useRef(null);var o=d.default.useState(false),c=(0,l.default)(o,2),i=c[0],u=c[1];return d.default.createElement("div",{className:g.default.mainImage,ref:s},t?d.default.createElement("img",{src:t.urls.https,style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer"},onClick:function e(){return u(true)}}):d.default.createElement(b.default,{onClick:r}),d.default.createElement(m.PopOver,{isOpen:i,anchor:function e(){return s.current},position:"bottom",hideArrow:true,offset:0,onRequestClose:function e(){return u(false)},closeOnClickOutside:true},d.default.createElement(p.Flex,{bg:"white",flexDirection:"column"},d.default.createElement(v.default.Button,{onClick:function e(){null===a||void 0===a?void 0:a();u(false)}},(0,f.t)("Replace")),d.default.createElement(v.default.ButtonDanger,{onClick:function e(){null===n||void 0===n?void 0:n();u(false)}},(0,f.t)("Remove")))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/PriceCell.less":function(e,t,r){e.exports={price:"_3aUMZ0f-F",moneyField:"_3PpNLpXTy",onSale:"h-1jCfPoQ"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/PriceCell.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a(r("./common/temp/node_modules/react/index.js"));var i=a(r("./common/temp/node_modules/classnames/index.js"));var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/PriceCell.less"));var l=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/MoneyFieldWithCurrency.tsx"));var d=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/calculatePrice.ts");var p=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");function n(e){var t=e.price,a=e.salePrice,n=e.onSale,s=e.onChange;return c.default.createElement("div",{className:u.default.price},c.default.createElement(l.default,{max:p.MAX_PRICE,value:t.value,onChange:function e(t){var r=(0,d.getPriceAndSalePrice)(t,a,n);s(r.price,r.sale)},className:(0,i.default)(u.default.moneyField,(0,o.default)({},u.default.onSale,n)),underlined:false}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SalePriceCell.less":function(e,t,r){e.exports={container:"_3K0d3p-w3",popover:"_1aDCK0WVv",salePriceInput:"HCAF8kwA3"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SalePriceCell.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var m=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var f=a(r("./common/temp/node_modules/@sqs/core-components/fields/BooleanField.js"));var v=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var b=a(r("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts"));var g=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/calculatePrice.ts");var C=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");var h=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/MoneyFieldWithCurrency.tsx"));var y=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SalePriceCell.less"));function n(e){var t=e.price,r=e.salePrice,a=e.onSale,n=e.onChange;var s=d.default.useState(false),o=(0,l.default)(s,2),c=o[0],i=o[1];var u=d.default.useRef(null);return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{ref:u,onClick:function e(){i(true)},className:y.default.container},a?b.default.formatter.format(r):"--"),d.default.createElement(m.PopOver,{isOpen:c,anchor:function e(){return u.current},onRequestClose:function e(){return i(false)},className:y.default.popover,position:"bottom-left",anchorPoint:{x:"right",y:"top"},offset:0,hideArrow:true,closeOnClickOutside:true},d.default.createElement(p.Box,{py:1,minWidth:"150px"},a&&d.default.createElement(h.default,{max:C.MAX_PRICE,value:r.value,onChange:function(t){function e(e){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}(function(e){n((0,g.getSalePrice)(e,t),a)}),className:y.default.salePriceInput,flush:true,underlined:false,autoFocus:true}),d.default.createElement(f.default,{value:a,label:(0,v.t)("On Sale"),onChange:function(t){function e(e){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}(function(e){n(r,e)}),flush:true,underlined:false}))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/ShippingCell.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var i=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var u=n(r("./common/temp/node_modules/react/index.js"));var l=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var d=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var p=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var m=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ShippingFields.tsx"));function s(e){var t=e.variant,r=e.onUpdateVariant;var a=u.default.useState(false),n=(0,i.default)(a,2),s=n[0],o=n[1];var c=u.default.useRef(null);return u.default.createElement(u.default.Fragment,null,u.default.createElement(d.Flex,{ref:c,onClick:function e(){return o(true)},sx:{textAlign:"right"}},u.default.createElement(d.Text.Caption,{color:"black",width:"100%"},(0,m.getShippingSubtitle)({variant:t,emptyState:"--"}))),u.default.createElement(p.PopOver,{isOpen:s,anchor:function e(){return c.current},onRequestClose:function e(){return o(false)},position:"bottom-left",anchorPoint:{x:"right",y:"top"},offset:0,hideArrow:true,closeOnClickOutside:true},u.default.createElement(d.Box,{minWidth:"150px",m:4},u.default.createElement(d.Text.Label,{pl:2},(0,l.t)("Dimensions")),u.default.createElement(m.default,{variant:t,onUpdateVariant:r}))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SkuCell.less":function(e,t,r){e.exports={sku:"_1w7na-DgJ"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SkuCell.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./common/temp/node_modules/@sqs/core-components/primitives/Input.js"));var o=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/validation/sku.ts"));var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/fields/SkuCell.less"));function i(e){var t=e.sku,r=e.onChange;return n.default.createElement("div",{className:c.default.sku},n.default.createElement(s.default,{value:t,onChange:function e(t){r((0,o.default)(t))}}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var s=a(r("./common/temp/node_modules/react/index.js"));var o=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantTable/PhysicalVariantTable.tsx"));var i=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");function n(e){var t=e.productType,r=e.variants;var a=(0,i.useProductContext)(),n=a.patchVariant;switch(t){case o.default.PHYSICAL:return s.default.createElement(c.default,{variants:r,patchVariant:n});case o.default.SERVICE:return s.default.createElement(c.default,{variants:r,patchVariant:n});default:throw new Error("Variant table for Product Type ".concat(t," not implemented yet!"))}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/WelcomeModal/WelcomeModal.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=y;t.dismissWelcomeModal=t.shouldShowWelcomeModal=t.WELCOME_MODAL_COOKIE=void 0;var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var c=a(r("./common/temp/node_modules/react/index.js"));var n=a(r("./common/temp/node_modules/@sqs/cookie-cutter/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var i=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var u=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");var l=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var d=a(r("./src/main/webapp/frontend/packages/enums/AchievementType.js"));var p=a(r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteAchievementStore.js"));var m=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var v=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/WelcomeModal/assets/betaHeroImage.png"));var b="productComposerWelcomeModal";t.WELCOME_MODAL_COOKIE=b;var g=function e(){if(p.default.hasAchievement(d.default.PRODUCT_CREATED_PRODUCT_COMPOSER))return false;if(!p.default.hasAchievement(d.default.PRODUCT_CREATED))return false;if("true"===n.default.get(b))return false;return true};t.shouldShowWelcomeModal=g;var C=function e(){n.default.set(b,"true",{path:"/",expires:new Date("January 1, 2023").toUTCString()})};t.dismissWelcomeModal=C;var h=function e(t){var r=t.confirm;return c.default.createElement(u.Wizard.Step,{id:"step-one",hideProgress:true},c.default.createElement(u.Wizard.Step.HeaderTitle,null,c.default.createElement(f.T,{project:"commerce-product-composer"},"A new way to edit products")),c.default.createElement(u.Wizard.Step.Content,null,c.default.createElement(u.Wizard.Step.Content.Title,null,c.default.createElement(f.T,{project:"commerce-product-composer"},"A new way to edit products")),c.default.createElement(s.Text.Subtitle,{color:"gray.400"},c.default.createElement(f.T,{project:"commerce-product-composer"},"We've improved the way you add and edit products in your store. You've been upgraded to the new experience, but you can still revert back for a limited time.")),c.default.createElement(u.Wizard.Button,{label:(0,m.t)("Launch"),onClick:r,icon:c.default.createElement(l.ArrowRight,{sx:{ml:2,mr:-2}}),inverted:false,css:{position:"absolute",bottom:"33px",zIndex:"1"}})))};function y(e){var t=e.onConfirm;var r=c.default.useState(function(){return new u.Wizard.History}),a=(0,o.default)(r,1),n=a[0];var s=function e(){C();t()};return c.default.createElement(i.Modal.Transition,null,c.default.createElement(i.Modal,{onRequestClose:t,lockFocus:false},c.default.createElement(i.Modal.Overlay,null),c.default.createElement(i.Modal.Position,{position:"center"},c.default.createElement(i.Modal.Dialog.ResponsiveProvider,null,c.default.createElement(i.Modal.Dialog,null,c.default.createElement(u.Wizard.SplitScreen,null,c.default.createElement(u.Wizard.SplitScreen.Panel,null,c.default.createElement(u.Wizard,{closeButtonProps:{onClick:s},currentStepId:"step-one",onRequestStep:function e(){},history:n},c.default.createElement(h,{confirm:s}))),c.default.createElement(u.Wizard.SplitScreen.Panel,null,c.default.createElement("img",{src:v.default,style:{height:"100%",width:"100%",objectFit:"cover"}}))))))))}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/WelcomeModal/assets/betaHeroImage.png":function(e,t,r){e.exports=r.p+"betaHeroImage-ac558714ad096d0498fc4f0feff17263.png"},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionListWrapper.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var c=a(r("./common/temp/node_modules/react/index.js"));var i=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var n=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");function u(e){var t=e.children,r=e.onClick,a=e.onRequestClose,n=(0,o.default)(e,["children","onClick","onRequestClose"]);return c.default.createElement(i.Text.Action,(0,s.default)({sx:{cursor:"pointer","&:hover":{backgroundColor:"gray.900"}},px:[3,4],py:2,onClick:function e(t){t.stopPropagation();r();a()}},n),t)}function l(e){var t=e.children,r=e.onClick,a=e.onRequestClose,n=(0,o.default)(e,["children","onClick","onRequestClose"]);return c.default.createElement(i.Text.Action,(0,s.default)({sx:{cursor:"pointer","&:hover":{backgroundColor:"gray.900"}},color:"red",px:[3,4],py:2,onClick:function e(){r();a()}},n),t)}function d(e){var t=e.position,r=void 0===t?"bottom-right":t,a=e.children;if(!a)return null;return c.default.createElement(n.ActionList.PopOver,{position:r,"data-test":"pc-image-action-list-button"},function(e){var t=e.onRequestClose;return c.default.createElement(i.Flex,{bg:"white",flexDirection:"column"},c.default.Children.toArray(a).map(function(e){if(c.default.isValidElement(e))return c.default.cloneElement(e,{onRequestClose:t})}))})}d.Button=u;d.ButtonDanger=l;var p=d;t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ActionSheet.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var f=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var v=a(r("./common/temp/node_modules/react/index.js"));var b=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var g=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var C=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");function n(e){var t=e.isOpen,r=e.onDismiss,a=e.header,n=e.body;var s=(0,C.useMeasure)(),o=(0,f.default)(s,2),c=o[0],i=o[1];var u=(0,C.useMeasure)(),l=(0,f.default)(u,2),d=l[0],p=l[1];var m=v.default.useRef(null);v.default.useEffect(function(){if(t){var e;null===(e=m.current)||void 0===e?void 0:e.setDockIndex(1)}},[t]);if(!t)return null;return v.default.createElement(g.Sheet.Portal,null,v.default.createElement(g.Sheet.Container,null,v.default.createElement(g.Sheet.Overlay,{onClick:r,sx:{background:"rgba(0, 0, 0, 0.4)"}}),v.default.createElement(g.Sheet.Drawer,{ref:m,docks:[50,i.height+p.height],renderHeader:function e(){return v.default.createElement(b.Flex,{ref:c,justifyContent:"space-between",alignItems:"center",height:55},v.default.createElement(b.Box,null),v.default.createElement(b.Text.Subtitle,{m:0},a),v.default.createElement(b.Box,null))},renderBody:function e(){return v.default.createElement(b.Flex,{ref:d,flexDirection:"column"},n)}})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/Enabled.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var o=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var c=function e(){return n.default.createElement(s.Flex,{alignItems:"center"},n.default.createElement(s.Box,{sx:{marginRight:1,borderRadius:"50%"},height:6,width:6,backgroundColor:"#00B45A"}),n.default.createElement(s.Text.Caption,{as:"span"},n.default.createElement(o.T,{project:"commerce-product-composer"},"Enabled")))};var i=c;t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/FeatureGatePanel.less":function(e,t,r){e.exports={featureGatePanel:"_1ISPIdPy1"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/FeatureGatePanel.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./common/temp/node_modules/@sqs/core-components/components/FeatureGatePanel.js"));var o=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/FeatureGatePanel.less"));var i=function e(t){var r=t.onLearnMoreClick,a=t.description;return n.default.createElement(s.default,{className:c.default.featureGatePanel,description:a,premiumFeatureLabel:(0,o.t)("Premium Feature"),learnMoreLabel:(0,o.t)("Learn More"),onLearnMoreClick:r})};t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/MoneyFieldWithCurrency.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var i=a(r("./common/temp/node_modules/lodash/isNumber.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var u=a(r("./common/temp/node_modules/react/index.js"));var l=a(r("./common/temp/node_modules/@sqs/core-components/fields/MoneyField.js"));var d=a(r("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js"));var n=function e(t){var a=t.onChange,n=t.min,s=t.max,r=(0,c.default)(t,["onChange","min","max"]);return u.default.createElement(l.default,(0,o.default)({},r,{onChange:function e(t){var r=t;(0,i.default)(n)&&(r=Math.max(r,n));(0,i.default)(s)&&(r=Math.min(r,s));a(r)},currencyCode:d.default.getStoreCurrency()}))};var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/OverflowMenu.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=a(r("./common/temp/node_modules/react/index.js"));var p=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var m=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var f=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var n=function e(t){var r=t.isOpen,a=t.onClose,n=t.label,s=t.children,o=t.labelProps,c=(0,l.default)(t,["isOpen","onClose","label","children","labelProps"]);var i=d.default.useRef(null);return d.default.createElement(d.default.Fragment,null,d.default.createElement(p.Button.Secondary,(0,u.default)({ref:i,borderStyle:"none",animationDirection:"none",lineHeight:1},o),n||d.default.createElement(f.Ellipses,null)),d.default.createElement(m.PopOver,(0,u.default)({},c,{isOpen:r,anchor:function e(){return i.current},onRequestClose:a,closeOnClickOutside:true,hideArrow:true}),d.default.createElement("div",{onClick:function e(t){t.stopPropagation();a()}},s)))};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ProgressBar.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=c;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");function c(e){var t=e.percentage;return n.default.createElement(s.Box,{bg:"black",height:"3px",width:"".concat(t,"%"),sx:{position:"absolute",bottom:0,left:0,transition:"width ".concat(o.time[400]," ").concat(o.easing.product.default)}})}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/SearchChipInput/SearchChipInput.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=a(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var p=a(r("./common/temp/node_modules/react/index.js"));var m=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");var f=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/SearchChipInput/components/ChipCell.tsx"));var n=function e(t){var r=t.children,a=t.fieldName,n=t.query,s=t.setQuery,o=t.value,c=t.setValue,i=t.selectedValueLabel;function u(e){c(e);s("")}function l(r,a){if(a)return{renderDisplay:p.default.forwardRef(function(e,t){return p.default.createElement(v.default,{ref:t,close:function e(){c(void 0)},label:a,title:r})})}}return p.default.createElement(m.Search,(0,d.default)({},l(a,i),{exteriorPre:a,exteriorAccessory:null,inputValue:n,onChange:u,onInput:s,placeholder:(0,f.t)("Search..."),sx:{input:{textAlign:"right"},background:"none",pl:"0",pr:"0"},value:o,variant:"floating"}),r)};var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/SearchChipInput/components/ChipCell.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=a(r("./common/temp/node_modules/react/index.js"));var o=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var c=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var n=s.default.forwardRef(function(e,t){var r=e.close,a=e.label,n=e.title;return s.default.createElement(o.Cell,{ref:t,label:n,exteriorAccessory:s.default.createElement(o.Chip,{accessory:s.default.createElement(o.Chip.CloseButton,{onClick:function e(){r()},tabIndex:-1}),label:a,onKeyDown:function e(t){(c.Keyboard.isBackspace(t)||c.Keyboard.isDelete(t))&&r()},tabIndex:0,sx:{h:"5px"}})})});var i=n;t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ShippingFields.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.getShippingSubtitle=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var u=a(r("./common/temp/node_modules/lodash/isNumber.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var l=a(r("./common/temp/node_modules/react/index.js"));var p=r("./src/main/webapp/universal/src/shared/types/NormalizedVariant.ts");var d=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var m=a(r("./common/temp/node_modules/@sqs/core-components/fields/StringField.js"));var f=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var g=function e(t){var r=t.shippingSize,a=t.shippingWeight;return 0===r.height&&0===r.width&&0===r.length&&0===a.value};var o=function e(t){var r=t.variant,a=t.emptyState;if(g(r))return a;var n=r.shippingSize,s=r.shippingWeight;var o=n.unit===p.ShippingSizeUnit.CENTIMETER?"centimeter":"inch";var c=s.unit===p.ShippingWeightUnit.KILOGRAM?"kilogram":"pound";var i=(0,f.formatQuantity)({value:n.length,unit:o},{length:"narrow"});var u=(0,f.formatQuantity)({value:n.width,unit:o},{length:"narrow"});var l=(0,f.formatQuantity)({value:n.height,unit:o},{length:"narrow"});var d=(0,f.formatQuantity)({value:s.value,unit:c},{length:"short"});return"".concat(i,"  ").concat(u,"  ").concat(l,"  ").concat(d)};t.getShippingSubtitle=o;var C=function e(n){var t=l.default.useState(n.value+""),r=(0,i.default)(t,2),a=r[0],s=r[1];var o=function e(t){if(isNaN(t))return 0;return Math.max(t,0)};return l.default.createElement(m.default,(0,c.default)({},n,{label:"",value:a,onChange:function e(t){var r=Number(t);var a=isNaN(r)||r<0||""===t;if(!a&&(0,u.default)(n.max)&&r>n.max){r=n.max;t=String(r)}s(a?"0":t);n.onChange(o(r))},type:"number",flush:true,rightAlign:true,beforeInput:l.default.createElement(d.Text.Body,null,n.label),afterInput:l.default.createElement(d.Text.Caption,null,n.unit)}))};var h=function e(t){return t===p.ShippingSizeUnit.CENTIMETER?"cm":"in"};var y=function e(t){return t===p.ShippingWeightUnit.KILOGRAM?"kg":"lb"};var P=function e(t){var r=t.variant,a=t.onUpdateVariant;var n=r.shippingSize,s=r.shippingWeight;var o=h(n.unit);var c=y(s.unit);return l.default.createElement(l.default.Fragment,null,l.default.createElement(C,{label:(0,f.t)("Length"),unit:o,max:v.MAX_SHIPPING_DIMENSION,value:r.shippingSize.length,onChange:function e(t){a(b({},r,{shippingSize:b({},r.shippingSize,{length:t})}))},placeholder:(0,f.t)("Enter Length")}),l.default.createElement(C,{label:(0,f.t)("Width"),unit:o,max:v.MAX_SHIPPING_DIMENSION,value:r.shippingSize.width,onChange:function e(t){a(b({},r,{shippingSize:b({},r.shippingSize,{width:t})}))},placeholder:(0,f.t)("Enter Width")}),l.default.createElement(C,{label:(0,f.t)("Height"),unit:o,max:v.MAX_SHIPPING_DIMENSION,value:r.shippingSize.height,onChange:function e(t){a(b({},r,{shippingSize:b({},r.shippingSize,{height:t})}))},placeholder:(0,f.t)("Enter Height")}),l.default.createElement(C,{label:(0,f.t)("Weight"),unit:c,max:v.MAX_SHIPPING_WEIGHT,value:r.shippingWeight.value,onChange:function e(t){a(b({},r,{shippingWeight:b({},r.shippingWeight,{value:t})}))},placeholder:(0,f.t)("Enter Weight")}))};t.default=P},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/TextareaField.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var c=a(r("./common/temp/node_modules/react/index.js"));var n=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var i=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var u=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var s=(0,n.withFocusManagedDivider)(i.Cell,i.Divider),l=s.Container,d=s.Shell,p=s.Body,m=s.ExteriorAccessory;function o(e){var t=e.value,r=e.maxLength,a=e.onChange,n=e.placeholder,s=e.label,o=e.showMaxLength;return c.default.createElement(l,{mt:4},c.default.createElement(u.Text.Label,{mb:2},s),c.default.createElement(d,null,c.default.createElement(p,{flexDirection:"initial"},c.default.createElement(i.Textarea,{maxLength:r,placeholder:n,value:t,onChange:a})),o&&r&&c.default.createElement(m,null,c.default.createElement(u.Text.Tabular,{fontSize:3,color:"gray.400"},r-t.length))))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.less":function(e,t,r){e.exports={paddingHack:"a1dHdhNHG"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=a(r("./common/temp/node_modules/classnames/index.js"));var o=a(r("./common/temp/node_modules/@sqs/core-components/navigation/Toolbar.js"));var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/ToolbarWithPaddingHack.less"));function i(e){var t=e.children,r=e.className;return n.default.createElement(o.default,{className:(0,s.default)(c.default.paddingHack,r)},t)}i.Left=o.default.Left;i.Center=o.default.Center;i.Right=o.default.Right;var u=i;t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/UploadButton.less":function(e,t,r){e.exports={uploadIcon:"_2xtCnY9h0"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/UploadButton.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=u;r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var c=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/UploadButton.less"));function u(e){var t=e.onClick;return n.default.createElement("button",{onClick:t},n.default.createElement(s.Flex,{alignItems:"center",justifyContent:"center",backgroundColor:"gray.900",width:o.space[6],height:o.space[6]},n.default.createElement(c.Upload,{className:i.default.uploadIcon,width:o.space[3],height:o.space[3],color:"gray.400"})))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/imageUploader.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.createUpload=t.createUploads=void 0;var p=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var m=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var f=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var v=a(r("./common/temp/node_modules/uuid/v1.js"));var b=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ContentItemsApi.ts");var g=a(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var C=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/JobApi.ts");var s=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var o=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var y=1e3;var i=.2;var u=.9;var l=1e4;var d=15e3;var P=function e(t){return--t*t*t+1};var x=function e(t,r,a){var n=P(a);return Math.min(r,t+(r-t)*n)};var _=function e(t){return new Promise(function(e){return setTimeout(e,t)})};var w=function e(t){if(t.contentItemId)return 1;if(t.job)return x(i,u,t.numPolls*y/t.fakeProcessingTimeMs);return x(0,i,t.uploadProgressRatio)};var E=function e(){return l+(d-l)*Math.random()};var j={isCancellable:false,title:(0,s.t)("Image failed to upload"),message:(0,s.t)("An unexpected error occured."),confirmLabel:(0,s.t)("Close")};var A=function e(t){var r=t.errorType;var a=j;r!==g.default.ERROR_TOO_LARGE&&"IMAGE_UPLOAD_SIZE_TOO_LARGE"!==r||(a=h({},j,{title:(0,s.t)("Image too large"),message:(0,s.t)("Your image must be under {size} MB.",{size:o.IMAGE_UPLOAD_MAX_SIZE_MB})}));return a};var S=function e(t){var i=t.map(function(e){var t=e.file,r=e.uploadHandler,a=e.onUpdate,n=void 0===a?function(){}:a,s=e.onComplete,o=e.onError;return{id:(0,v.default)(),file:t,fakeProcessingTimeMs:E(),numPolls:0,uploadProgressRatio:0,tempImageUrl:URL.createObjectURL(t),onUpdate:n,onComplete:s,uploadHandler:r,onError:o}});var a=function e(t){var r=t.focalPointImage;return!!r};var o=function e(t){var r;return!!(null!==(r=t.job)&&void 0!==r&&r.id)&&!a(t)};var r=function e(){return i.every(a)};var c=function e(t){return t&&[g.default.ERROR,g.default.ERROR_TOO_LARGE,g.default.ERROR_UNSUPPORTED_IMAGE_TYPE,g.default.ERROR_FILE_NOT_FOUND].includes(t.status)};var u=function e(t){i=t;i.forEach(function(e){return e.onUpdate(h({},e,{progress:w(e)}))})};var n=function e(){u(i.map(function(e){if(!e.job)return e;return h({},e,{numPolls:e.numPolls+1})}))};var s=function(){var t=(0,f.default)(p.default.mark(function e(){var r,a,n,s;return p.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=i.filter(o).map(function(e){return e.job.id});a=i.filter(function(e){return e.error});if(!(r.length>0||a.length>0)){t.next=11;break}t.next=5;return(0,C.pollForJobs)(r);case 5:n=t.sent;u(i.map(function(a){var e=n.find(function(e){var t;var r=e.id;return r===(null===(t=a.job)||void 0===t?void 0:t.id)});if((null===e||void 0===e?void 0:e.status)===g.default.READY){var t=e.data.contentItemId;return h({},a,{contentItemId:t})}if(c(e))return h({},a,{error:{errorType:null===e||void 0===e?void 0:e.status}});return a}));t.next=9;return Promise.all(i.map(function(){var t=(0,f.default)(p.default.mark(function e(r){var a,n,s,o,c;return p.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.contentItemId,n=r.error;if(!a){t.next=9;break}t.next=4;return Promise.all([(0,b.getFocalPointImage)(a),_(500)]);case 4:s=t.sent;o=(0,m.default)(s,1);c=o[0];r.onComplete(h({},r,{focalPointImage:c}));return t.abrupt("return",null);case 9:if(!n){t.next=12;break}r.onError&&r.onError(A(n));return t.abrupt("return",null);case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()));case 9:s=t.sent;u(s.filter(function(e){return!!e}).map(function(e){return e}));case 11:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();var l=function(){var r=(0,f.default)(p.default.mark(function e(r){var a,n,s,o,c;return p.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.id,n=r.uploadHandler;t.next=3;return n({onUploadProgress:function e(t){u(i.map(function(e){return h({},e,{uploadProgressRatio:t.loaded/t.total})}))}});case 3:s=t.sent;o=s.job;c=s.error;u(i.map(function(e){if(c)return h({},e,{error:c});return e.id===a?h({},e,{job:o}):e}));case 7:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();var d=function(){var t=(0,f.default)(p.default.mark(function e(){return p.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return Promise.all([_(y),s()]);case 2:n();if(r()){t.next=6;break}t.next=6;return d();case 6:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();i.forEach(l);d();return i};t.createUploads=S;var O=function e(t){return S([t])[0]};t.createUpload=O},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/trackEventsOnSave.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.trackEventsOnSave=n;var i=a(r("./common/temp/node_modules/lodash/isEqual.js"));var u=a(r("./common/temp/node_modules/lodash/difference.js"));var l=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var d=r("./src/main/webapp/universal/src/shared/types/NormalizedProduct.ts");var p=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var m=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var o=a(r("./src/main/webapp/frontend/packages/enums/RelatedProductsConfigurationStrategy.js"));var f=function e(t){if(!t)return null;var r=t.strategy,a=t.relatedCategories,n=t.relatedCategoryIds,s=t.relatedTags;if(r===o.default.CATEGORIES){if(a&&a.length>0)return a[0];if(n&&n.length>0)return n[0];return null}if(r===o.default.TAGS&&s)return s[0];return null};function n(n,s){var o=(0,m.default)(n.productType);var c=p.ProductEditor.PRODUCT_COMPOSER_V1;var e=s.relatedProductsConfiguration;var t=n.relatedProductsConfiguration;if(n&&s&&o){n.description!==s.description&&(0,l.trackEditProductDescription)(n.name,o,c,n.id);n.name!==s.name&&(0,l.trackEditProductTitle)(n.name,o,c,n.id);if(s.tags!==n.tags){(0,u.default)(s.tags,n.tags).forEach(function(e){(0,l.trackRemoveTag)({productName:n.name,productType:o,productEditor:c,productId:n.id,tag:e})});(0,u.default)(n.tags,s.tags).forEach(function(e){(0,l.trackAssignTag)({productName:n.name,productType:o,productEditor:c,productId:n.id,tag:e})})}if(s.categories!==n.categories){(0,u.default)(s.categories,n.categories).forEach(function(e){(0,l.trackRemoveCategory)({productName:n.name,productType:o,productEditor:c,productId:n.id,category:e})});(0,u.default)(n.categories,s.categories).forEach(function(e){(0,l.trackAssignCategory)({productName:n.name,productType:o,productEditor:c,productId:n.id,category:e})})}s.visibility!==n.visibility&&(0,l.trackChangeVisibility)({productName:n.name,productType:o,productEditor:c,productId:n.id,workflowState:n.visibility.state});t&&!(0,i.default)(e,t)&&(0,l.trackChangeRelatedProducts)({productName:n.name,productType:o,productEditor:c,productId:n.id,newValue:f(t)});(0,i.default)(s.additionalInfo,n.additionalInfo)||(0,l.trackChangeAdditionalInfo)(n.name,o,c,n.id);(0,d.isSubscribable)(n)&&(0,d.isSubscribable)(s)&&s.subscriptionPlan!==n.subscriptionPlan&&(0,l.trackToggleSubscription)({productName:n.name,productType:o,productEditor:c,productId:n.id,val:!!n.subscriptionPlan});(0,i.default)(s.variants,n.variants)||n.variants.forEach(function(t){var e;s.variants&&(e=s.variants.find(function(e){return e.id===t.id}));e?t.onSale!==e.onSale&&(0,l.trackToggleOnSale)({productName:n.name,productType:o,productEditor:c,productId:n.id,isOnSale:t.onSale}):t.onSale&&(0,l.trackToggleOnSale)({productName:n.name,productType:o,productEditor:c,productId:n.id,isOnSale:t.onSale});if(e){if(!(0,i.default)(t.stock,e.stock)){var r=e.stock.unlimited?null:e.stock.quantity.toString();var a=t.stock.unlimited?null:t.stock.quantity.toString();(0,l.trackChangeVariantCoreAttribute)({attributeType:"stock",productId:n.id,productName:n.name,productType:o,variantId:t.id,updatedValue:a,productEditor:c,originalValue:r})}t.sku!==e.sku&&(0,l.trackChangeVariantCoreAttribute)({attributeType:"SKU",productId:n.id,productName:n.name,productType:o,variantId:t.id,updatedValue:t.sku,productEditor:c,originalValue:e.sku});t.price.toFloat()!==e.price.toFloat()&&(0,l.trackChangeVariantCoreAttribute)({attributeType:"retail-price",productId:n.id,productName:n.name,productType:o,variantId:t.id,updatedValue:t.price.toFloat().toString(),productEditor:c,originalValue:e.price.toFloat().toString()});t.salePrice.toFloat()!==e.salePrice.toFloat()&&(0,l.trackChangeVariantCoreAttribute)({attributeType:"sale-price",productId:n.id,productName:n.name,productType:o,variantId:t.id,updatedValue:t.salePrice.toFloat().toString(),productEditor:c,originalValue:e.salePrice.toFloat().toString()})}})}}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=r("./common/temp/node_modules/react/index.js");var n=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var s=function e(){var t=(0,a.useContext)(n.Breakpoint.Context),r=t.platform;return{isMobile:"mobile"===r}};var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmExitProduct.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var i=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var u=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var l=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function p(){var e=(0,u.useConfirmModal)(),n=e.showConfirmModal;var t=(0,l.useProductContext)(),s=t.isDirty;var r=function(){var r=(0,c.default)(o.default.mark(function e(r){var a;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(s()){t.next=2;break}return t.abrupt("return",true);case 2:t.next=4;return n(d({title:(0,i.t)("Leave Editor"),message:(0,i.t)("You will lose any unsaved changes."),confirmLabel:(0,i.t)("Confirm")},r));case 4:a=t.sent;return t.abrupt("return",a);case 6:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();return{confirmExit:r}}var m=p;t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.ConfirmModalProvider=i;t.useConfirmModal=v;var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=n(r("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var o=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var l=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var d=a(r("./common/temp/node_modules/react/index.js"));var p=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/ModalWrapper.tsx");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),true).forEach(function(e){(0,s.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var f=d.default.createContext({showConfirmModal:function e(){return Promise.resolve(true)},closeConfirmModal:function e(){}});function i(e){var t=e.children;var r=(0,d.useState)(null),a=(0,l.default)(r,2),n=a[0],c=a[1];var s=n&&d.default.createElement(p.AlertModalWrapper,(0,o.default)({},n,{isOpen:true}));var i=function e(){c(null)};return d.default.createElement(d.default.Fragment,null,s,d.default.createElement(f.Provider,{value:{showConfirmModal:function e(t){var r=t.isCancellable,a=void 0===r||r,n=t.autoClose,s=void 0===n||n,o=(0,u.default)(t,["isCancellable","autoClose"]);return new Promise(function(t){c(m({},o,{onConfirm:function e(){t(true);s&&i()},onClose:a?function(){t(false);s&&i()}:void 0}))})},closeConfirmModal:i}},t))}function v(){return d.default.useContext(f)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useDeleteProduct.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var d=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var p=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var m=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var f=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx");var v=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var b=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx");var g=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var C=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var h=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var y=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var P=r("./src/main/webapp/universal/src/shared/i18n/index.ts");function n(){var e=(0,b.useViewStateContext)(),s=e.showLoadingMessage,o=e.clearLoadingMessage;var t=(0,g.useConfirmModal)(),c=t.showConfirmModal;var r=(0,v.useProductContext)(),a=r.product;var n=(0,f.useLifeCycleHooksContext)(),i=n.lifeCycleHooks;var u=function(){var t=(0,p.default)(d.default.mark(function e(){var r;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",{error:true});case 2:r=(0,C.default)(a.productType);t.prev=3;t.next=6;return(0,m.deleteProduct)(a.id);case 6:i.onDeleteButtonClick(a);r&&(0,h.trackDeleteProduct)({productId:a.id,productType:r,productName:a.name,productEditor:y.ProductEditor.PRODUCT_COMPOSER_V1});return t.abrupt("return",{error:false});case 11:t.prev=11;t.t0=t["catch"](3);return t.abrupt("return",{error:true});case 14:case"end":return t.stop()}},e,null,[[3,11]])}));return function e(){return t.apply(this,arguments)}}();var l=function(){var r=(0,p.default)(d.default.mark(function e(r){var a,n;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r||s((0,P.t)("Deleting Product"));t.next=3;return u();case 3:a=t.sent;n=a.error;if(!n){t.next=9;break}o();t.next=9;return c({isCancellable:false,title:(0,P.t)("Cannot Delete Product"),message:(0,P.t)("There was a problem deleting this product."),confirmLabel:(0,P.t)("Close")});case 9:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();return{deleteProduct:l}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useDeleteVariant.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=c;var l=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var d=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var s=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var p=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/VariantGenerator/generateVariants.ts");var o=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var m=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var f=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var v=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));function c(){var e=(0,s.useConfirmModal)(),c=e.showConfirmModal;var t=(0,o.useProductContext)(),i=t.product,u=t.patchProduct;var r=function(){var a=(0,n.default)(l.default.mark(function e(r,a){var n,s,o;return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(i){t.next=2;break}throw new Error("Product does not exist");case 2:n=(0,v.default)(i.productType);s=1===i.variants.length;t.next=6;return c({title:(0,d.t)("Delete Product Variant"),message:(0,d.t)("Are you sure you wish to delete this variant?"),confirmLabel:(0,d.t)("Delete")});case 6:o=t.sent;if(o){t.next=9;break}return t.abrupt("return");case 9:(0,m.trackDeleteVariant)({productId:i.id,productName:i.name,productType:n,variantId:r,productEditor:f.ProductEditor.PRODUCT_COMPOSER_V1});null===a||void 0===a?void 0:a();u(s?{variants:(0,p.generateEmptyVariants)(),variantAttributeNames:[]}:{variants:i.variants.filter(function(e){return e.id!==r})});case 12:case"end":return t.stop()}},e)}));return function e(t,r){return a.apply(this,arguments)}}();return{deleteVariant:r}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useFileUpload.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var m=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var f=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var v=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var b=a(r("./common/temp/node_modules/react/index.js"));var g=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var C=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var h=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");function y(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=i(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var a=0;var n=function e(){};return{s:n,n:function e(){if(a>=t.length)return{done:true};return{done:false,value:t[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,o=false,c;return{s:function e(){r=t[Symbol.iterator]()},n:function e(){var t=r.next();s=t.done;return t},e:function e(t){o=true;c=t},f:function e(){try{s||null==r.return||r.return()}finally{if(o)throw c}}}}function i(e,t){if(!e)return;if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function s(){var e=(0,h.useProductContext)(),c=e.product,i=e.patchProduct;var t=b.default.useState(false),r=(0,v.default)(t,2),a=r[0],u=r[1];var n=b.default.useState(0),s=(0,v.default)(n,2),o=s[0],l=s[1];var d=function e(t){var r=t.loaded,a=t.total;l(Math.round(100*r/a))};var p=function(){var r=(0,f.default)(m.default.mark(function e(r){var a,n,s,o;return m.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(!c||c.productType!==g.default.DIGITAL)){t.next=2;break}return t.abrupt("return");case 2:u(true);a=[];n=y(r);try{for(n.s();!(s=n.n()).done;){o=s.value;a.push((0,C.uploadDigitalGood)(c.id,o,d))}}catch(e){n.e(e)}finally{n.f()}t.next=8;return Promise.all(a);case 8:u(false);i({hasDigitalGoods:true});case 10:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();return{isUploading:a,uploadProgress:o,handleFileUpload:p}}var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useProductImageUpload.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var f=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var v=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var b=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var g=a(r("./common/temp/node_modules/react/index.js"));var C=a(r("./common/temp/node_modules/uuid/v1.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var h=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var P=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/imageUploader.ts");var x=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackVariantImages.ts");var _=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var w=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var E=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function A(e,t){return{id:e,urls:{https:URL.createObjectURL(t)},focalPoint:{x:0,y:0},mediaProcessingState:s.default.QUEUED,processingProgress:0}}function c(){var e=(0,y.useProductContext)(),u=e.product,r=e.patchProduct;var t=(0,E.useConfirmModal)(),a=t.showConfirmModal;var n=u?u.images:[];var o=g.default.useRef(n);g.default.useEffect(function(){o.current=n},[n]);if(!u)return{handleImageUpload:function e(){return null},handleImageReplace:function e(){return null}};var c=function e(t){r({images:t})};var l=function e(t,r){c(o.current.map(function(e){return e.id===t?j({},e,{},r):e}))};var d=function e(t,r){c(o.current.map(function(e){return e.id===t?r:e}))};var s=function e(t){c(o.current.filter(function(e){return e.id!==t}))};var p=function e(t,r){s(t);a(r)};var i=function(){var a=(0,b.default)(f.default.mark(function e(r,s){var i,a;return f.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=o.current.length;a=r.map(function(e){return{file:e,id:(0,C.default)()}});c([].concat((0,v.default)(o.current),(0,v.default)(a.map(function(e){var t=e.file,r=e.id;return A(r,t)}))));(0,P.createUploads)(a.map(function(e){var c=e.file,n=e.id;return{file:c,uploadHandler:function(){var t=(0,b.default)(f.default.mark(function e(r){var a,n,s,o;return f.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.onUploadProgress;t.next=3;return(0,h.uploadProductImage)(u.id,c,i,a);case 3:n=t.sent;s=n.processingJob;o=n.error;return t.abrupt("return",{job:s,error:o});case 7:case"end":return t.stop()}},e)}));function e(e){return t.apply(this,arguments)}return e}(),onComplete:function e(t){var r=t.focalPointImage;d(n,r);var a=(0,w.default)(u.productType);a&&(0,x.trackUploadImage)({imageId:r.id,productName:u.name,productId:u.id,productType:a,productSection:"product-editor",productEditor:_.ProductEditor.PRODUCT_COMPOSER_V1});null===s||void 0===s?void 0:s(r)},onUpdate:function e(t){var r=t.progress;l(n,{processingProgress:100*r})},onError:function e(t){p(n,t)}}}));case 4:case"end":return t.stop()}},e)}));return function e(t,r){return a.apply(this,arguments)}}();var m=function(){var a=(0,b.default)(f.default.mark(function e(o,c){return f.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:l(c,A(c,o));(0,P.createUpload)({file:o,uploadHandler:function(){var t=(0,b.default)(f.default.mark(function e(r){var a,n,s;return f.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.onUploadProgress;t.next=3;return(0,h.replaceProductImage)(c,o,a);case 3:n=t.sent;s=n.processingJob;return t.abrupt("return",{job:s});case 6:case"end":return t.stop()}},e)}));function e(e){return t.apply(this,arguments)}return e}(),onComplete:function e(t){var r=t.focalPointImage;d(c,r)},onUpdate:function e(t){var r=t.progress;l(c,{processingProgress:100*r})},onError:function e(t){p(c,t)}});case 2:case"end":return t.stop()}},e)}));return function e(t,r){return a.apply(this,arguments)}}();return{handleImageUpload:i,handleImageReplace:m}}var i=c;t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useSaveProduct.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=c;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var x=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var _=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var w=a(r("./src/main/webapp/frontend/packages/enums/AchievementType.js"));var E=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var j=a(r("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var A=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var s=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var S=a(r("./src/main/webapp/universal/src/shared/actions/WebsiteAchievementActions.js"));var O=a(r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteAchievementStore.js"));var I=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/ProductApi.ts");var T=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var k=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx");var F=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/taxCategoryContext.tsx");var D=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/trackEventsOnSave.ts");var R=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var M=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var N=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var V=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var q=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/FeedbackForm/useFeedbackForm.tsx");var B=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/api/productValidation.ts");var L=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/ErrorHandling.tsx");function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var G=(0,s.t)("Saving Product");var W={isCancellable:false,title:(0,s.t)("Cannot Save Product"),message:(0,s.t)("An unexpected error occurred. Please try again later."),confirmLabel:(0,s.t)("Close")};function c(s){var e=(0,T.useProductContext)(),o=e.product,c=e.originalProduct,n=e.composerOpenedAt;var t=(0,k.useViewStateContext)(),i=t.showLoadingMessage,u=t.clearLoadingMessage;var r=(0,F.useProductTaxCategoryContext)(),l=r.taxCategory,d=r.originalTaxCategory;var a=(0,V.useConfirmModal)(),p=a.showConfirmModal;var m=(0,q.useFeedbackForm)(),f=m.showFeedbackForm,v=m.closeFeedbackForm;var b=O.default.hasAchievement(w.default.PRODUCT_CREATED)?"product-save-existing":"product-save-new";var g=function(){var t=(0,_.default)(x.default.mark(function e(){return x.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!A.legacyV6Flags.isFeatureEnabled(E.default.PRODUCT_COMPOSER_FEEDBACK_FORM_ON_SAVE)){t.next=3;break}t.next=3;return f({onRequestClose:v,shouldToggleBeta:false,productSection:b,hideReasonDropdown:true});case 3:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();var C=function e(){if(!o||!c)return null;(0,D.trackEventsOnSave)(o,c);var t=(0,N.default)(o.productType);var r=Date.now()-n;t&&(s?(0,R.trackAddProduct)({productId:o.id,productType:t,productName:o.name,productEditor:M.ProductEditor.PRODUCT_COMPOSER_V1,timeElapsed:r}):(0,R.trackSaveProductEditor)({productId:o.id,productType:t,productName:o.name,productEditor:M.ProductEditor.PRODUCT_COMPOSER_V1,timeElapsed:r}));if(l!==d){var a=l?R.TaxCategoryAction.ADD:R.TaxCategoryAction.DELETE;(0,R.trackTaxCategoryChangeCategory)({action:"submit",categoryAction:a,categoryName:l?l.taxCategoryName:null,productId:o.id,productType:t,productEditor:M.ProductEditor.PRODUCT_COMPOSER_V1})}};var h=function(){var t=(0,_.default)(x.default.mark(function e(){var r,a,n;return x.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(!o||!c)){t.next=2;break}return t.abrupt("return",{error:true});case 2:t.next=4;return(0,B.getProductValidationErrors)(o);case 4:r=t.sent;if(!r){t.next=7;break}return t.abrupt("return",{error:true,errorMessage:r});case 7:t.prev=7;i(G);a=U({},o,{images:o.images.filter(function(e){return e.mediaProcessingState!==j.default.QUEUED&&e.mediaProcessingState!==j.default.PROCESSING})});t.next=12;return(0,I.saveProduct)(a,c,s,{currentTaxCategory:l,originalTaxCategory:d});case 12:u();t.next=22;break;case 15:t.prev=15;t.t0=t["catch"](7);console.error(t.t0);u();n=(0,B.handleBackendErrors)(t.t0);n||(0,L.captureException)("Unexpected product save error: ".concat(t.t0));return t.abrupt("return",{error:true,errorMessage:n});case 22:return t.abrupt("return",{error:false});case 23:case"end":return t.stop()}},e,null,[[7,15]])}));return function e(){return t.apply(this,arguments)}}();function y(){return P.apply(this,arguments)}function P(){P=(0,_.default)(x.default.mark(function e(){var r,a,n;return x.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(!o||!c)){t.next=2;break}return t.abrupt("return",{encounteredErrors:true});case 2:t.next=4;return h();case 4:r=t.sent;a=r.error;n=r.errorMessage;if(!a){t.next=10;break}p(U({},W,{message:n||W.message}));return t.abrupt("return",{encounteredErrors:true});case 10:if(!(s&&!O.default.hasAchievement(w.default.PRODUCT_CREATED_PRODUCT_COMPOSER))){t.next=14;break}S.default.grantAchievement(w.default.PRODUCT_CREATED_PRODUCT_COMPOSER);t.next=14;return g();case 14:O.default.hasAchievement(w.default.PRODUCT_SAVED)||S.default.grantAchievement(w.default.PRODUCT_SAVED);try{C()}catch(e){console.error("error tracking product composer")}return t.abrupt("return",{encounteredErrors:false});case 17:case"end":return t.stop()}},e)}));return P.apply(this,arguments)}return{saveProduct:y}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useSubscription.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=s;var a=r("./src/main/webapp/universal/src/shared/types/NormalizedProduct.ts");var n=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");function s(){var e=(0,n.useProductContext)(),t=e.product;var r=!!t&&(0,a.isSubscribable)(t)&&!!t.subscriptionPlan;return{hasSubscription:r}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useUnavailableOnMobile.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useBreakpoints.ts"));var i=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");var n=function e(){var t=(0,i.useConfirmModal)(),r=t.showConfirmModal;var a=(0,c.default)(),n=a.isMobile;var s=function e(){n&&r({isCancellable:false,title:(0,o.t)("This feature is not supported on mobile."),message:(0,o.t)("Visit Squarespace from your desktop computer to use this feature."),confirmLabel:(0,o.t)("Okay")});return n};return{alertIfUnavailable:s}};var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/anchorLinks.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a;(function(e){e["DETAILS"]="details";e["INVENTORY"]="inventory";e["ORGANIZATION"]="organization";e["MARKETING"]="marketing";e["CUSTOMIZE"]="customize";e["SCROLL_REF"]="scroll-ref"})(a=a||{});var n=a;t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IMAGE_UPLOAD_MAX_SIZE_MB=t.MAX_INVENTORY_LIMIT=t.MAX_NUM_OPTIONS=t.MAX_NUM_VARIANTS=t.MAX_OPTION_LABEL_LENGTH=t.MAX_OPTION_VALUE_LENGTH=t.MAX_TAG_LENGTH=t.MAX_TAG_COUNT=t.SKU_MAX_LENGTH=t.MAX_SHIPPING_WEIGHT=t.MAX_SHIPPING_DIMENSION=t.MAX_PRICE=void 0;var a=1e6;t.MAX_PRICE=a;var n=1e4;t.MAX_SHIPPING_DIMENSION=n;var s=1e4;t.MAX_SHIPPING_WEIGHT=s;var o=60;t.SKU_MAX_LENGTH=o;var c=100;t.MAX_TAG_COUNT=c;var i=100;t.MAX_TAG_LENGTH=i;var u=100;t.MAX_OPTION_VALUE_LENGTH=u;var l=100;t.MAX_OPTION_LABEL_LENGTH=l;var d=250;t.MAX_NUM_VARIANTS=d;var p=6;t.MAX_NUM_OPTIONS=p;var m=1e9;t.MAX_INVENTORY_LIMIT=m;var f=20;t.IMAGE_UPLOAD_MAX_SIZE_MB=f},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/NeedsProduct.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=a(r("./common/temp/node_modules/react/index.js"));var o=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx");var n=function e(n){var t=function e(t){var r=(0,o.useProductContext)(),a=r.product;return a?s.default.createElement(n,t):null};return t};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/lifeCycleHooksContext.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.LifeCycleProvider=p;t.useLifeCycleHooksContext=m;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var i=a(r("./common/temp/node_modules/react/index.js"));function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var o=function e(){};var l={onCancelButtonClick:o,onSaveButtonClick:function e(t){},onDeleteButtonClick:function e(t){},onDuplicateButtonClick:function e(t,r){},onBetaOptOutButtonClick:o};var d=i.default.createContext({lifeCycleHooks:l,setLifeCycleHooks:o});function p(e){var t=e.children;var r=i.default.useState(u({},l)),a=(0,c.default)(r,2),n=a[0],s=a[1];function o(e){s(u({},n,{},e))}return i.default.createElement(d.Provider,{value:{lifeCycleHooks:n,setLifeCycleHooks:o}},t)}function m(){return i.default.useContext(d)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/product-context.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.ProductProvider=n;t.useProductContext=s;var C=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var h=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var y=a(r("./common/temp/node_modules/react/index.js"));var P=a(r("./common/temp/node_modules/lodash/isEqual.js"));var x=y.default.createContext({product:null,originalProduct:null,isDirty:function e(){return false},setProduct:function e(){},patchProduct:function e(){},patchVariant:function e(){},composerOpenedAt:0,setComposerOpenedAt:function e(){}});function _(e,t){switch(t.type){case"setProduct":return{product:t.payload};case"patchProduct":return{product:Object.assign({},e.product,t.payload)};default:return e}}var w={product:null};function n(e){var t=e.children;var r=y.default.useReducer(_,w),a=(0,h.default)(r,2),n=a[0].product,s=a[1];var o=y.default.useState(null),c=(0,h.default)(o,2),i=c[0],u=c[1];var l=y.default.useState(0),d=(0,h.default)(l,2),p=d[0],m=d[1];var f=function e(){return!(0,P.default)(i,n)};function v(e){s({type:"setProduct",payload:e});u(e)}function b(e){s({type:"patchProduct",payload:e})}function g(t,e){if(!n)throw new Error("patchVariant called with null product");var r=n.variants;var a=r.findIndex(function(e){return e.id===t});if(-1===a)throw new Error("Could not find variant with id: ".concat(t));b({variants:[].concat((0,C.default)(r.slice(0,a)),[Object.assign({},r[a],e)],(0,C.default)(r.slice(a+1)))})}return y.default.createElement(x.Provider,{value:{product:n,originalProduct:i,isDirty:f,setProduct:v,patchProduct:b,patchVariant:g,composerOpenedAt:p,setComposerOpenedAt:m}},t)}function s(){return y.default.useContext(x)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-context.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.RouterProvider=o;t.useRouterContext=c;Object.defineProperty(t,"Route",{enumerable:true,get:function e(){return s.Route}});var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var l=a(r("./common/temp/node_modules/react/index.js"));var s=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-locations.ts");var d=l.default.createContext([{currentLocation:{route:s.Route.HOME},hasPreviousRoute:false},function(){}]);function p(e,t){switch(t.route){case s.Route.HOME:case s.Route.PRODUCT_FORM:return{locations:[{route:t.route}].concat((0,n.default)(e.locations))};case s.Route.VARIANT_FORM:return{locations:[{route:t.route,variantId:t.variantId}].concat((0,n.default)(e.locations))};case s.Route.VARIANT_TABLE:return{locations:[{route:t.route}].concat((0,n.default)(e.locations))};case s.Route.BACK:return{locations:e.locations.slice(1)};default:return e}}var m={locations:[{route:s.Route.HOME}]};function o(e){var t=e.children;var r=l.default.useReducer(p,m),a=(0,u.default)(r,2),n=a[0].locations,s=a[1];var o=(0,u.default)(n,1),c=o[0];var i=n.length>1;return l.default.createElement(d.Provider,{value:[{currentLocation:c,hasPreviousRoute:i},s]},t)}function c(){return l.default.useContext(d)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/router-locations.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Route=t.VariantTablePath=t.VariantFormPath=t.ProductFormPath=t.HomePath=void 0;var a="/";t.HomePath=a;var n="/";t.ProductFormPath=n;var s="/variants";t.VariantFormPath=s;var o="variant-table";t.VariantTablePath=o;var c;t.Route=c;(function(e){e["HOME"]="HOME";e["BACK"]="BACK";e["PRODUCT_FORM"]="PRODUCT_FORM";e["VARIANT_FORM"]="VARIANT_FORM";e["VARIANT_TABLE"]="VARIANT_TABLE"})(c||(t.Route=c={}))},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/taxCategoryContext.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.TaxCategoryProvider=s;t.useProductTaxCategoryContext=o;var l=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var d=a(r("./common/temp/node_modules/react/index.js"));var p=d.default.createContext({taxCategory:void 0,setTaxCategory:function e(){},originalTaxCategory:void 0,setOriginalTaxCategory:function e(){}});function s(e){var t=e.children;var r=(0,d.useState)(void 0),a=(0,l.default)(r,2),n=a[0],s=a[1];var o=(0,d.useState)(void 0),c=(0,l.default)(o,2),i=c[0],u=c[1];return d.default.createElement(p.Provider,{value:{taxCategory:i,setTaxCategory:u,originalTaxCategory:n,setOriginalTaxCategory:s}},t)}function o(){return d.default.useContext(p)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/contexts/viewStateContext.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.ViewStateProvider=s;t.useViewStateContext=o;var C=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var h=a(r("./common/temp/node_modules/react/index.js"));var n=function e(){};var y=h.default.createContext({isLoading:false,loadingMessage:null,showLoadingMessage:n,clearLoadingMessage:n,toastManager:null,setToastManager:n,showToastMessage:n});function s(e){var t=e.children;var r=h.default.useState(false),a=(0,C.default)(r,2),n=a[0],s=a[1];var o=h.default.useState(null),c=(0,C.default)(o,2),i=c[0],u=c[1];var l=h.default.useState(null),d=(0,C.default)(l,2),p=d[0],m=d[1];function f(e){u(e);s(true)}function v(){u(null);s(false)}function b(e){if(!p)return;p.present({text:e})}var g={isLoading:n,loadingMessage:i,showLoadingMessage:f,clearLoadingMessage:v,toastManager:p,setToastManager:m,showToastMessage:b};return h.default.createElement(y.Provider,{value:g},t)}function o(){return h.default.useContext(y)}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/index.tsx":function(e,r,t){"use strict";var a=t("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(r,"__esModule",{value:true});var n={ProductCreationWizard:true};Object.defineProperty(r,"default",{enumerable:true,get:function e(){return s.default}});Object.defineProperty(r,"ProductCreationWizard",{enumerable:true,get:function e(){return o.default}});var s=a(t("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductComposerWithProviders.tsx"));var o=a(t("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductCreationWizard.tsx"));var c=t("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/components/shared/useConfirmModal.tsx");Object.keys(c).forEach(function(t){if("default"===t||"__esModule"===t)return;if(Object.prototype.hasOwnProperty.call(n,t))return;if(t in r&&r[t]===c[t])return;Object.defineProperty(r,t,{enumerable:true,get:function e(){return c[t]}})})},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/ErrorHandling.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.ErrorBoundary=t.captureException=t.captureMessage=void 0;var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=a(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var m=a(r("./common/temp/node_modules/react/index.js"));var f=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");var v=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");function b(n){var s=g();return function e(){var t=(0,d.default)(n),r;if(s){var a=(0,d.default)(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);return(0,l.default)(this,r)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var C=v.Modal.Transition,h=v.Modal.Overlay,y=v.Modal.Position;var P="commerce-product-composer";var n=function e(t,r){t.setTag("project",P);r&&t.setExtra("context",JSON.stringify(r))};var s=function e(t,r){var a=window.SQUARESPACE_SENTRY;a&&a.withScope(function(e){n(e,r);a.captureMessage(t);console.error("[".concat(P," Sentry] context: "),r)})};t.captureMessage=s;var x=function e(t,r){var a=window.SQUARESPACE_SENTRY;a&&a.withScope(function(e){n(e,r);a.captureException(t);console.error("[".concat(P," Sentry] ").concat(t),r)})};t.captureException=x;var _=function(e){(0,u.default)(s,e);var n=b(s);function s(){var t;(0,o.default)(this,s);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];t=n.call.apply(n,[this].concat(r));(0,p.default)((0,i.default)(t),"state",{hasError:false,hasDismissedAlert:false});(0,p.default)((0,i.default)(t),"handleClose",function(){t.setState({hasDismissedAlert:true},function(){var e=t.props.onDismissAlert;null===e||void 0===e?void 0:e()})});return t}(0,c.default)(s,[{key:"componentDidCatch",value:function e(t){x("[".concat(P," boundary] ").concat(t));this.setState({hasError:true})}},{key:"render",value:function e(){var t=this.state,r=t.hasError,a=t.hasDismissedAlert;var n=this.props,s=n.title,o=n.message,c=n.confirmLabel;if(r)return m.default.createElement(C,null,!a&&m.default.createElement(v.Modal,{onRequestClose:this.handleClose,lockFocus:false},m.default.createElement(h,null),m.default.createElement(y,{position:"center"},m.default.createElement(f.AlertDialog,{title:s,message:o,buttons:[m.default.createElement(f.AlertDialog.Button,{key:"confirm",onClick:this.handleClose},c)]}))));return this.props.children}}]);return s}(m.default.Component);t.ErrorBoundary=_},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/arrayMove.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));function n(e,t,r){e=(0,u.default)(e);var a=t<0?e.length+t:t;if(a>=0&&a<e.length){var n=r<0?e.length+r:r;var s=e.splice(t,1),o=(0,i.default)(s,1),c=o[0];e.splice(n,0,c)}return e}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/calculatePrice.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getSalePrice=t.getPriceAndSalePrice=void 0;var n=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var s=a(r("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js"));var c=function e(t){return n.default.fromJson({decimalValue:t.toString(),currencyCode:s.default.getStoreCurrency()})};var o=function e(t,r,a){var n=function(){if(isNaN(t)||t<=0)return 0;if(a&&t<r.toFloat())return r.toFloat();return t}();var s=c(n);var o=s.toFloat()<r.toFloat()?s:r;return{price:s,sale:o}};t.getPriceAndSalePrice=o;var i=function e(t,r){var a=function(){if(isNaN(t)||t<0)return 0;if(t>r.toFloat())return r.toFloat();return t}();return c(a)};t.getSalePrice=i},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/calculateStockQuantity.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;var a=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");function n(e){isNaN(e)||e<0?e=0:e>a.MAX_INVENTORY_LIMIT&&(e=a.MAX_INVENTORY_LIMIT);return e}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/generateSku.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=s;var a=7;var n="SQ";function s(){var e=Math.floor(Math.random()*Math.pow(10,a));var t=e.toString().padStart(a,"0");return"".concat(n).concat(t)}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/getToastText.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getDuplicateToastText=t.getWaitlistToastText=void 0;var i=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var u=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var l=r("./src/main/webapp/universal/src/shared/utils/commerce/WaitlistUtils.ts");var d=a(r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js"));var p=r("./src/main/webapp/universal/src/shared/utils/commerce/api/RestockNotificationApi.ts");var m=r("./src/main/webapp/universal/src/apps/App/shared/components/ToastManager/ToastManagerUtils.tsx");var s=function(){var r=(0,n.default)(i.default.mark(function e(r){var a;var n,s,o,c;return i.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=d.default.getState();if(null!==(a=n.storeSettings)&&void 0!==a&&a.merchandisingSettings.restockNotificationsEnabled){t.next=3;break}return t.abrupt("return");case 3:s=(0,l.getInStockNormalizedVariantIds)(r.variants);if(s.length){t.next=6;break}return t.abrupt("return");case 6:o=r.name;t.next=9;return(0,p.fetchTotalEmailCountForVariants)(r.id,s);case 9:c=t.sent;if(!(c>0)){t.next=12;break}return t.abrupt("return",{text:(0,u.t)("You have waitlist signups for {productTitle}.",{productTitle:o}),accessories:[{text:(0,u.t)("View"),onPress:function e(){return window.Y.Squarespace.Singletons.Location.go("/config/commerce/waitlists")}},{component:(0,m.getCloseIcon)()}]});case 12:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();t.getWaitlistToastText=s;var o=function e(){return{text:(0,u.t)("Your product was duplicated")}};t.getDuplicateToastText=o},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/poll.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var u=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));function n(e){return s.apply(this,arguments)}function s(){s=(0,l.default)(u.default.mark(function e(r){var a,n,s,o,c,i;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.fn,n=r.validate,s=r.interval,o=void 0===s?2e3:s;c=function e(t){return new Promise(function(e){return setTimeout(e,t)})};i=function(){var t=(0,l.default)(u.default.mark(function e(){var r;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return a();case 2:r=t.sent;if(!n(r)){t.next=5;break}return t.abrupt("return",r);case 5:t.next=7;return c(o);case 7:return t.abrupt("return",i());case 8:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();return t.abrupt("return",i());case 4:case"end":return t.stop()}},e)}));return s.apply(this,arguments)}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/useElementScroll.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=n;var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var l=r("./common/temp/node_modules/react/index.js");var d=a(r("./common/temp/node_modules/lodash/throttle.js"));function n(){var e=(0,l.useState)(null),t=(0,u.default)(e,2),r=t[0],a=t[1];var n=(0,l.useState)(0),s=(0,u.default)(n,2),o=s[0],c=s[1];var i=(0,l.useCallback)((0,d.default)(function(e){c(e.target.scrollTop)},250),[]);(0,l.useEffect)(function(){r&&r.addEventListener("scroll",i);return function(){return null===r||void 0===r?void 0:r.removeEventListener("scroll",i)}},[r,i]);return{node:r,setNode:a,scrollY:o}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/utils/validation/sku.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;var a=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/constants/validation.ts");function n(e){e.length>a.SKU_MAX_LENGTH&&(e=e.substring(0,a.SKU_MAX_LENGTH));return e}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/Constants.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OFF_VALUE=void 0;var a="Off";t.OFF_VALUE=a},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/RelatedAPI.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getMerchandisingSettings=t.getRelatedProductsData=t.getTags=t.getCategories=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var c=function(){var r=(0,s.default)(n.default.mark(function e(r){var a;return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.get("/api/commondata/GetCollectionCategories?collectionId=".concat(r));case 2:a=t.sent;if(!(200===a.status||204===a.status)){t.next=5;break}return t.abrupt("return",a.data);case 5:return t.abrupt("return",{});case 6:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();t.getCategories=c;var i=function(){var r=(0,s.default)(n.default.mark(function e(r){var a;return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.get("/api/commondata/GetCollectionTags?collectionId=".concat(r));case 2:a=t.sent;if(!(200===a.status||204===a.status)){t.next=5;break}return t.abrupt("return",a.data);case 5:return t.abrupt("return",{});case 6:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();t.getTags=i;var u=function(){var r=(0,s.default)(n.default.mark(function e(r){var a;return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.get("/api/commerce/products/".concat(r));case 2:a=t.sent;if(!(200===a.status||204===a.status)){t.next=5;break}return t.abrupt("return",a.data.relatedProductsConfiguration||{});case 5:return t.abrupt("return",{});case 6:case"end":return t.stop()}},e)}));return function e(t){return r.apply(this,arguments)}}();t.getRelatedProductsData=u;var l=function(){var t=(0,s.default)(n.default.mark(function e(){var r;return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.default.get("/api/commerce/settings/merchandising");case 2:r=t.sent;if(!(200===r.status||204===r.status)){t.next=5;break}return t.abrupt("return",r.data);case 5:return t.abrupt("return",{});case 6:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();t.getMerchandisingSettings=l},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/getCategoriesAndTags.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var v=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var b=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/RelatedAPI.ts");var g=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesAPI.ts");var C=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var h=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var y=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesTree.ts");var n=function(){var n=(0,s.default)(v.default.mark(function e(r,a,n){var s,o,c,i,u,l,d,p,m,f;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s=h.legacyV6Flags.isFeatureEnabled(C.default.NESTED_CATEGORIES);o=false;if(!s){t.next=19;break}t.prev=3;t.next=6;return(0,g.getCategories)(r);case 6:u=t.sent;l=u.categoryTree;d=u.categoryTree[0];p=y.CategoriesTree.constructCategoriesTree(l,[],d);c=p.getNodesInRenderOrder().map(function(e){return{name:e.displayName,id:e.id,level:e.level}});n&&c.unshift({name:d.displayName,id:d.id,level:1});t.next=17;break;case 14:t.prev=14;t.t0=t["catch"](3);o=true;case 17:t.next=29;break;case 19:t.prev=19;t.next=22;return(0,b.getCategories)(r);case 22:m=t.sent;c=m.map(function(e){return{name:e.name}});t.next=29;break;case 26:t.prev=26;t.t1=t["catch"](19);o=true;case 29:if(!a){t.next=34;break}t.next=32;return(0,b.getTags)(r);case 32:f=t.sent;f?i=f.map(function(e){return e.name}):o=true;case 34:return t.abrupt("return",{storeWideCats:c,apiErrors:o,storeWideTags:i});case 35:case"end":return t.stop()}},e,null,[[3,14],[19,26]])}));return function e(t,r,a){return n.apply(this,arguments)}}();var o=n;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var g=n(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var C=n(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var o=n(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var c=n(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=n(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=n(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=n(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=n(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var m=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var f=n(r("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var v=a(r("./common/temp/node_modules/@sqs/core-components/fields/DropdownSelectField.js"));var b=n(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var h=n(r("./src/main/webapp/frontend/packages/enums/RelatedProductsConfigurationStrategy.js"));var y=n(r("./common/temp/node_modules/classnames/index.js"));var P=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var x=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var _=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var w=n(r("./common/temp/node_modules/react/index.js"));var E=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var j=n(r("./common/temp/node_modules/@sqs/core-components/components/Cell.js"));var A=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/RelatedAPI.ts");var S=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/Constants.ts");var O=n(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/styles.less"));function I(n){var s=T();return function e(){var t=(0,d.default)(n),r;if(s){var a=(0,d.default)(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);return(0,l.default)(this,r)}}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var k=P.legacyV6Flags.isFeatureEnabled(b.default.NESTED_CATEGORIES);var F=function e(t){var r;var a=t.isSelected,n=t.isFocused,s=t.level,o=(0,f.default)(t,["isSelected","isFocused","level"]);return w.default.createElement(j.default,(0,p.default)({accessory:a?w.default.createElement(x.Checkmark,{width:16,height:16}):null,focused:n,focusable:false,underlined:false,className:(0,y.default)((r={},(0,m.default)(r,O.default.levelTwoCategory,2===s),(0,m.default)(r,O.default.levelThreeCategory,3===s),r))},o))};var D=function(e){(0,u.default)(n,e);var a=I(n);function n(){var s;(0,o.default)(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s=a.call.apply(a,[this].concat(t));(0,m.default)((0,i.default)(s),"state",{value:s.props.initialValue||""});(0,m.default)((0,i.default)(s),"getRelatedCategoriesValue",function(e){var t=e.relatedCategories,r=void 0===t?[]:t,a=e.relatedCategoryIds,n=void 0===a?[]:a;var s=k?n:r;return s?(0,C.default)(s):[]});(0,m.default)((0,i.default)(s),"getCategoryValue",function(e,t){if(t)return"".concat(h.default.CATEGORIES,"_").concat(e.id);return"".concat(h.default.CATEGORIES,"_").concat(e.name)});(0,m.default)((0,i.default)(s),"getTagValue",function(e){return"".concat(h.default.TAGS,"_").concat(e)});(0,m.default)((0,i.default)(s),"onChange",function(e){var t=s.props.saveRelatedAttrs;s.setState({value:e});var r=e.indexOf("_");var a=e.substring(0,r);a=0===a.length?h.default.OFF:a;var n=e.substring(r+1);t([n],a,e)});(0,m.default)((0,i.default)(s),"onClick",function(e){e.stopPropagation();e.preventDefault()});(0,m.default)((0,i.default)(s),"renderDropdown",function(e){return w.default.createElement(v.Dropdown,(0,p.default)({},e,{className:O.default.zIndexOverride}))});return s}(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=(0,s.default)(g.default.mark(function e(){return g.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(this.state.value){t.next=3;break}t.next=3;return this.getValue();case 3:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function e(){var t=this.props,r=t.storeWideCats,a=t.selectableTags,n=t.disableDescription,s=t.children,o=t.isDropdownFlush,c=t.damaskify;var i=w.default.createElement("div",{onClick:this.onClick},w.default.createElement(v.default,{flush:o,className:(0,y.default)(O.default.dropdownStyles,c&&O.default.damaskify),isDisabled:0===r.length&&0===a.length,options:this.getOptions(),value:this.getValueFromStateOrProps(),onChange:this.onChange,renderDropdown:this.renderDropdown,maxHeight:230,renderOption:F}));var u=this.renderDescription();if(s)return s({dropdown:i,description:u});return w.default.createElement(w.default.Fragment,null,i,!n&&w.default.createElement("div",{className:"description"},u))}},{key:"getOptions",value:function e(){var t=this;var r=this.props,a=r.storeWideCats,n=r.selectableTags;var s=[{label:(0,E.t)("Off"),value:S.OFF_VALUE}];if(a.length>0){s.push({isDisabled:true,label:"",subtitle:(0,E.t)("Categories"),value:"categoriesHeader"});a.forEach(function(e){s.push({label:e.name,value:t.getCategoryValue(e,k),level:e.level})})}if(n.length>0){s.push({isDisabled:true,label:"",subtitle:(0,E.t)("Tags"),value:"tagsHeader"});n.forEach(function(e){s.push({label:e,value:t.getTagValue(e)})})}return s}},{key:"getValue",value:function(){var e=(0,s.default)(g.default.mark(function e(){var r,a,n,s,o,c,i,u,l,d,p,m,f,v,b;return g.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=this.props,a=r.model,n=r.storeWideCats,s=r.selectableTags,o=r.existingProductCats;t.next=3;return(0,A.getRelatedProductsData)(a.productId);case 3:c=t.sent;i=c.strategy;u=c.relatedTags;l=c.relatedCategories;d=c.relatedCategoryIds;p=(0,C.default)(o);m=this.getRelatedCategoriesValue({relatedCategories:l,relatedCategoryIds:d});f=n.filter(function(e){if(k)return p.includes(e.id);return p.includes(e.name)});t.t0=i;t.next=t.t0===h.default.OFF?14:t.t0===h.default.CATEGORIES?16:t.t0===h.default.TAGS?20:24;break;case 14:this.setState({value:"Off"});return t.abrupt("break",26);case 16:v=n.filter(function(e){if(k)return m.includes(e.id);return m.includes(e.name)});if(!(v.length>0)){t.next=20;break}this.setState({value:this.getCategoryValue(v[0],k)});return t.abrupt("break",26);case 20:b=Object.values(u).filter(function(e){return s.includes(e)});if(!(b.length>0)){t.next=24;break}this.setState({value:this.getTagValue(b[0])});return t.abrupt("break",26);case 24:this.setState(p[0]?{value:this.getCategoryValue(f[0],k)}:{value:"Off"});return t.abrupt("break",26);case 26:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"isValid",value:function e(t){return t&&t.length>0}},{key:"getValueFromStateOrProps",value:function e(){if(this.props.value)return"categories_".concat(this.props.value);return this.state.value}},{key:"renderDescription",value:function e(){var t=this.props,r=t.storeWideCats,a=t.selectableTags;var n=this.getValueFromStateOrProps();var s;s=this.isValid(r)||this.isValid(a)?n&&"Off"!==n?w.default.createElement(_.T,{project:"apps.App.Commerce.RelatedProducts"},"Products with this tag or category will now appear as related products."):w.default.createElement(_.T,{project:"apps.App.Commerce.RelatedProducts"},"To show related products on this products page, choose a category or tag."):w.default.createElement(_.T,{project:"apps.App.Commerce.RelatedProducts"},"To show related products on this products page, add a category or tag.");return s}}]);return n}(w.default.Component);var R=D;t.default=R;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/styles.less":function(e,t,r){e.exports={search:"_Swg3xuui",add:"_1RjAEm38R",clear:"_1TyTwZFFs",clearLight:"_31q3kVS5V",trash:"jE0ux2jmD",trashLight:"_3B8WJ36c8",check:"_1C5ucl4r0",checkDark:"lA4u2VOcG",checkAfter:"_1EXxSYoP0",checkDarkAfter:"O-hi3UhWm",checkDarkSmallAfter:"_1M8ZjNnIp",checkDarkBefore:"Az9f53y66",aureusCheck:"_25CC6Mv5O",upload:"_1v-Cn_Xr7",avatar:"_34q5XBe6_",gearSmall:"_1jUHLhWbs",pencilSmall:"_1VHkYL4ap",trashSmall:"_289_xNS-8",chevronLight:"urzK6V1CQ",chevronRight:"_2H2BVHEsj",chevronDark:"_2OAG-k_eC",circleLogoDark:"yurWLEdTV",gettyLogo:"_1kEls9rMy",gettyIconLight:"_210ES9Fdp",chevronUpDark:"_16wRMcXTO",chevronDownDark:"Tn87Jnlb1",arrowDark:"_1ZykCVMjl",file:"_2wkWksBbw",shoppingCart:"_3I15GW7Cx",squarespace:"_3-seNyovB",zoomin:"_1o5EBd2FO",zoomout:"J_JbqMetG",squarespaceLight:"dprdAT5_c",dropdownStyles:"_1rk4ubYf6",zIndexOverride:"_2IOKDDfYQ",error:"qI_oTI-Ph",levelTwoCategory:"_2880hMWwm",levelThreeCategory:"_2VET1G4Eh",damaskify:"_5lM87J696"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/WrappedBetaSwitchingButton.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var d=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var p=a(r("./common/temp/node_modules/react/index.js"));var m=a(r("./common/temp/node_modules/react-dom/index.js"));var u=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var f=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var v=r("./src/main/webapp/universal/src/shared/i18n/react.ts");var b=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var g=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var C=a(r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var h=function e(t){var r=t.toggleBetaOptIn,a=t.hideYUIModal,n=t.productId,s=t.productName,o=t.productType;var c=(0,C.default)(o);function i(){r();c&&(0,b.trackTogglePCBeta)(s,c,g.ProductEditor.PRODUCT_COMPOSER_V1,n)}return p.default.createElement(p.default.Fragment,null,p.default.createElement(f.Button.Secondary,{borderStyle:"none",animationDirection:"none",animationBackgroundColor:"transparent",sx:{position:"absolute",top:0,right:0},onClick:function e(){a();i()}},p.default.createElement(f.Flex,{sx:{padding:2}},p.default.createElement(v.T,{project:"commerce-product-composer"},"New Editor"),p.default.createElement(u.ExternalLink,{sx:{marginLeft:1}}))))};var n=function e(t){var r=this;var a=t.container,n=t.toggleBetaOptIn,s=t.hideYUIModal,o=t.showYUIModal,c=t.productId,i=t.productName,u=t.productType;(0,l.default)(this,e);(0,d.default)(this,"container",void 0);(0,d.default)(this,"toggleBetaOptIn",void 0);(0,d.default)(this,"hideYUIModal",void 0);(0,d.default)(this,"showYUIModal",void 0);(0,d.default)(this,"productId",void 0);(0,d.default)(this,"productName",void 0);(0,d.default)(this,"productType",void 0);(0,d.default)(this,"show",function(){var e=p.default.createElement(h,{toggleBetaOptIn:r.toggleBetaOptIn,hideYUIModal:r.hideYUIModal,showYUIModal:r.showYUIModal,productId:r.productId,productName:r.productName,productType:r.productType});m.default.render(e,r.container)});(0,d.default)(this,"destroy",function(){m.default.unmountComponentAtNode(r.container)});this.container=a;this.toggleBetaOptIn=n;this.hideYUIModal=s;this.showYUIModal=o;this.productId=c;this.productName=i;this.productType=u};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/WrappedProductComposer.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var i=a(r("./common/temp/node_modules/react/index.js"));var u=a(r("./common/temp/node_modules/react-dom/index.js"));var l=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/index.tsx"));var n=function e(t){var r=this;var a=t.productId,n=t.lifeCycleHooks,s=t.externalYUIModules;(0,o.default)(this,e);(0,c.default)(this,"productId",void 0);(0,c.default)(this,"lifeCycleHooks",void 0);(0,c.default)(this,"externalYUIModules",void 0);(0,c.default)(this,"container",void 0);(0,c.default)(this,"isOpen",void 0);(0,c.default)(this,"show",function(){r.isOpen=true;r.render()});(0,c.default)(this,"close",function(){r.isOpen=false;r.render()});(0,c.default)(this,"destroy",function(){u.default.unmountComponentAtNode(r.container)});(0,c.default)(this,"render",function(){var e=i.default.createElement(l.default,{isOpen:r.isOpen,productId:r.productId,lifeCycleHooks:r.lifeCycleHooks,externalYUIModules:r.externalYUIModules});u.default.render(e,r.container)});this.productId=a;this.lifeCycleHooks=n;this.externalYUIModules=s;this.container=document.createElement("div");this.isOpen=false};var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/WrappedProductCreationWizard.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var l=a(r("./common/temp/node_modules/react/index.js"));var d=a(r("./common/temp/node_modules/react-dom/index.js"));var p=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/index.tsx");var n=function e(t){var r=this;var a=t.collectionId,n=t.collectionItemCount,s=t.onRequestClose,o=t.onProductCreated,c=t.shouldSkipEtsyFork;(0,i.default)(this,e);(0,u.default)(this,"collectionId",void 0);(0,u.default)(this,"collectionItemCount",void 0);(0,u.default)(this,"onRequestClose",void 0);(0,u.default)(this,"onProductCreated",void 0);(0,u.default)(this,"shouldSkipEtsyFork",void 0);(0,u.default)(this,"isOpen",void 0);(0,u.default)(this,"container",void 0);(0,u.default)(this,"show",function(){r.isOpen=true;r.render()});(0,u.default)(this,"close",function(){r.isOpen=false;r.render()});(0,u.default)(this,"destroy",function(){d.default.unmountComponentAtNode(r.container)});(0,u.default)(this,"render",function(){var e=l.default.createElement(p.ProductCreationWizard,{isOpen:r.isOpen,collectionId:r.collectionId,collectionItemCount:r.collectionItemCount,onRequestClose:r.onRequestClose,onProductCreated:r.onProductCreated,shouldSkipEtsyFork:r.shouldSkipEtsyFork});d.default.render(e,r.container)});this.collectionId=a;this.collectionItemCount=n;this.onRequestClose=s;this.onProductCreated=o;this.shouldSkipEtsyFork=c;this.isOpen=false;this.container=document.createElement("div")};var s=n;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/buildShellContentItem.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=d;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=a(r("./src/main/webapp/frontend/packages/enums/RecordType.js"));var c=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(e){return e.map(function(e){return{id:e.id,sku:e.sku,qtyInStock:e.stock.quantity,unlimited:e.stock.unlimited,attributes:e.attributes}})}function l(e){return e.map(function(e){return{id:e.id,sku:e.sku,unlimited:true}})}function d(e){var t=e.id,r=e.name,a=e.productType,n=e.collectionId;var s={id:t,productType:a,collectionId:n,title:r,recordType:o.default.STORE_ITEM};switch(e.productType){case c.default.PHYSICAL:case c.default.SERVICE:return i({},s,{variants:u(e.variants)});case c.default.GIFT_CARD:return i({},s,{variants:l(e.variants)});case c.default.DIGITAL:return i({},s,{variants:[],onSale:false,price:e.price||e.variants[0].price,salePrice:e.salePrice||e.variants[0].salePrice,hasDigitalGoods:e.hasDigitalGoods})}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/index.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"ProductComposer",{enumerable:true,get:function e(){return c.default}});Object.defineProperty(t,"ProductCreationWizard",{enumerable:true,get:function e(){return i.default}});Object.defineProperty(t,"ProductComposerOrchestrator",{enumerable:true,get:function e(){return u.default}});Object.defineProperty(t,"BetaSwitchingButton",{enumerable:true,get:function e(){return l.default}});Object.defineProperty(t,"buildShellContentItem",{enumerable:true,get:function e(){return d.default}});t.optOutProductComposer=t.optInProductComposer=t.shouldShowProductComposerOptIn=t.shouldShowProductComposer=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=a(r("./common/temp/node_modules/lodash/get.js"));var c=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/WrappedProductComposer.tsx"));var i=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/WrappedProductCreationWizard.tsx"));var u=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductComposer/src/ProductComposerOrchestrator.tsx"));var l=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/WrappedBetaSwitchingButton.tsx"));var d=a(r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/buildShellContentItem.ts"));var p=r("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/utils/cookieUtils.ts");var m=function e(){var t=(0,o.default)(window,"Static.SQUARESPACE_CONTEXT.website.identifier");var r=(0,o.default)(window,"Static.SQUARESPACE_CONTEXT.appDomain");return"squarespace.com"!==r&&["en-us-com-7-1-pc2","en-us-com-product-dig","en-us-com-product-gif","en-us-com-product-phy","en-us-com-product-ser"].includes(t)};var f=function e(){return(0,p.isPCOptedOut)()};var v=function(){var t=(0,s.default)(n.default.mark(function e(){return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.setPCOptInCookie)());case 1:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();t.optInProductComposer=v;var b=function(){var t=(0,s.default)(n.default.mark(function e(){return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.setPCOptOutCookie)());case 1:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();t.optOutProductComposer=b;var g=function e(){if(m())return false;if(f())return false;return true};t.shouldShowProductComposer=g;var C=function e(){return true};t.shouldShowProductComposerOptIn=C},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/utils/cookieUtils.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.setPCOptOutCookie=u;t.setPCOptInCookie=l;t.isPCOptedOut=d;var n=a(r("./common/temp/node_modules/lodash/get.js"));var s=a(r("./common/temp/node_modules/@sqs/cookie-cutter/index.js"));var o=r("./src/main/webapp/universal/src/shared/utils/SessionStorage.ts");var c="commerce-product-composer-opt-out";var i="commerce-product-composer-opted-out";function u(){(0,o.saveSessionData)(i,{isOptedOut:true})}function l(){(0,o.removeSessionData)(i);s.default.set(c,"",{path:"/",expires:new Date(0).toUTCString()})}function d(){if("true"===s.default.get(c))return true;return(0,n.default)((0,o.getSessionData)(i),"isOptedOut",false)}},"./src/main/webapp/universal/src/apps/App/screens/Settings/screens/CustomerAccounts/shared/api/CustomerAccountsSettingsApi.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var s="/api/settings/site-users/accounts/";var o={get:function e(){return n.default.get(s)},save:function e(t){return n.default.put(s,t)}};t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/ToastManager/ToastManagerUtils.tsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getCloseIcon=void 0;var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var o=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var c=function e(){return n.default.createElement(s.CrossLarge,{width:o.space[4],height:o.space[4],color:"gray.400"})};t.getCloseIcon=c},"./src/main/webapp/universal/src/apps/App/shared/components/ToolbarDropdownSelect.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var v=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=n(r("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var o=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var c=n(r("./common/temp/node_modules/prop-types/index.js"));var b=a(r("./common/temp/node_modules/react/index.js"));var g=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");var i=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var u=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var l=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var d=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var p=r("./src/main/webapp/frontend/packages/websites-constants/lib/index.js");var m=r("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var f=n(r("./src/main/webapp/frontend/packages/enums/TemplateVersion.js"));var C=n(r("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js"));function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),true).forEach(function(e){(0,o.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var P=C.default.isVersion(f.default.SEVEN);var x=145;var _={letterSpacing:"0",textAlign:"left",textTransform:"none"};var w={"&:hover":{backgroundColor:P?"":l.colors.gray["800"]},"&::before":{display:"none"},"&[data-focus-visible-added]":{backgroundColor:l.colors.gray["600"]}};var E=P?{borderRadius:0,height:"sizes.250"}:{};var j=b.default.forwardRef(function(e,t){var r=e.isOpen,a=e.label,n=e.setIsOpen;return b.default.createElement(u.Button,(0,s.default)({},_,{backgroundColor:"transparent",border:"none",borderRadius:"4px",boxSizing:"border-box",color:"inherit",css:y({},w,{paddingLeft:"7px",paddingRight:"7px"}),cursor:"pointer",height:"36px",justifyContent:"space-between",minWidth:"".concat(x,"px"),mx:"4px",onClick:function e(){return n(!r)},py:0,ref:t},E),b.default.createElement(u.Flex,{alignItems:"center",justifyContent:"space-between",width:"100%"},b.default.createElement(u.Text.Body,(0,s.default)({flexGrow:1},P?{mb:0}:{},{as:"div"}),a),b.default.createElement(i.ChevronSmallDown,null)))});j.displayName="SiteServerDropdownTrigger";j.propTypes={isOpen:c.default.bool.isRequired,label:c.default.string.isRequired,setIsOpen:c.default.func.isRequired};var A=function e(r){return b.default.createElement(d.ZIndexStack,null,function(e){var t=Math.max(e,m.zIndexes.TOOLBAR)+1;return b.default.createElement(g.Dropdown.Dropdown,(0,s.default)({},r,{className:p.LayoutEngineClassnames.NONINTERACTIVE_CLASSNAME,sheetContainerClassName:p.LayoutEngineClassnames.NONINTERACTIVE_CLASSNAME,focusLockIsDisabled:true,mountAt:r.displayRef.current.ownerDocument.body,style:{border:0,borderRadius:"8px",paddingBottom:"6px",paddingTop:"6px",width:"unset",minWidth:"".concat(x,"px"),zIndex:t},zIndex:t}))})};A.propTypes={displayRef:c.default.shape({current:c.default.shape({tagName:c.default.string})})};var S=function e(t){var r=t.options,a=t.onBeforeOpen,n=t.onChange,s=t.state,o=t.value;var c=(0,b.useState)(false);var i=s||c,u=(0,v.default)(i,2),l=u[0],d=u[1];var p=function e(t){t&&a&&a();d(t)};var m=r.map(function(e){return b.default.createElement(g.Dropdown.Option,{key:e.id,value:e.id,sx:{letterSpacing:0}},e.label)});var f=g.Dropdown.Base;return b.default.createElement(f,{isOpen:l,setIsOpen:p,value:o,onChange:n,renderDisplay:j,renderDropdown:A,placement:"bottom"},m)};S.propTypes={onBeforeOpen:c.default.func,onChange:c.default.func};var O=S;t.default=O;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/TabbedSwatchCustomPicker.jsx":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var P=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var s=n(r("./common/temp/node_modules/prop-types/index.js"));var x=a(r("./common/temp/node_modules/react/index.js"));var _=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var w=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");var E=r("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var o=r("./src/main/webapp/universal/src/apps/App/shared/constants/ColorConfig.js");var j=r("./src/main/webapp/universal/src/shared/utils/ColorUtils.js");var A={label:"Palette",value:o.ColorOverrideTypes.SITE_PALETTE_COLOR};var S={label:"Custom",value:o.ColorOverrideTypes.CUSTOM_COLOR};var O=[A,S];var c=function e(t){var r=t.colors,a=t.initialData,n=t.onSelectSwatch,s=t.onSelectCustomColor,o=t.onColorChange,c=t.selectByColorId,i=void 0!==c&&c,u=t.width,l=void 0===u?"unset":u;var d=(0,x.useState)(a.type||A.value),p=(0,P.default)(d,2),m=p[0],f=p[1];var v=(0,x.useState)((0,j.resolveColorReference)(a,r)),b=(0,P.default)(v,2),g=b[0],C=b[1];var h=function e(t){C(t);null===o||void 0===o?void 0:o(t);null===s||void 0===s?void 0:s(t)};var y=function e(t){C(t.value);null===o||void 0===o?void 0:o(t.value);null===n||void 0===n?void 0:n(t)};return x.default.createElement(x.default.Fragment,null,x.default.createElement(_.Box,{px:2},x.default.createElement(E.Tabs,{options:O,value:m,onChange:f,fitted:true})),x.default.createElement(_.Box,{p:2,pb:3,width:l},m===A.value&&x.default.createElement(_.Flex,{justifyContent:"space-between"},r.map(function(t){var e;var r=i?(null===(e=a.sitePaletteColor)||void 0===e?void 0:e.id)===t.id:g===t.value;return x.default.createElement(w.ColorPicker.Swatch.Selectable,{key:t.id,mx:1,color:t.value,isSelected:r,onClick:function e(){return y(t)},size:"sizes.200"})})),m===S.value&&x.default.createElement(_.Box,{minWidth:"254px"},x.default.createElement(w.ColorPicker,{value:g||"#FF0000",onChange:h},x.default.createElement(w.ColorPicker.Map,null),x.default.createElement(w.ColorPicker.Hue,null),x.default.createElement(w.ColorPicker.Input.HEX,null)))))};c.propTypes={colors:s.default.arrayOf(s.default.shape({id:s.default.string,value:s.default.string})).isRequired,initialData:s.default.shape({type:s.default.oneOf(Object.values(o.ColorOverrideTypes)),customColor:s.default.string,sitePalette:s.default.shape({id:s.default.string,alpha:s.default.number})}).isRequired,onColorChange:s.default.func,onSelectSwatch:s.default.func,onSelectCustomColor:s.default.func,width:s.default.string};var i=c;t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatter.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a(r("./common/temp/node_modules/lodash/isInteger.js"));var v=a(r("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js"));var i=r("./src/main/webapp/universal/src/shared/utils/currency/CurrencyTemplates.js");var u=a(r("./src/main/webapp/universal/src/shared/utils/currency/CurrencyUtils.js"));var b=a(r("./common/temp/node_modules/lodash/round.js"));function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),true).forEach(function(e){(0,o.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var C={trimZeroFractions:false,group:true};var d=/^(\d+)(\d{3})/;function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return e.replace(".",t)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";while(e.match(d))e=e.replace(d,"$1".concat(t,"$2"));return e}function p(e){return g({},i.Templates.DEFAULT,{},e.DEFAULT||{})}function P(e,t){return g({},e.DEFAULT,{},e[t]||{})}function x(e,t,r){return r.trimZeroFractions&&(0,c.default)(e)?0:u.default.getFractionDigits(t)}var m=function(){function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,n.default)(this,f);this.templates=i.Templates[e]||{};this.templates.DEFAULT=p(this.templates);!this.templates&&false;t&&f.enableDebugging();this.locale=e}(0,s.default)(f,[{key:"format",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t instanceof v.default))throw new Error("Format expects a Money instance.");r=g({},C,{},r);var a=f.debug?"":"";var n=t.toFloat();var s=Math.abs(n);var o=n<0?"-":"";var c=t.currencyCode;var i=P(this.templates,c);var u=x(n,c,r);var l=String((0,b.default)(s,u).toFixed(u));l=h(l,i.decimalSeparator);r.group&&(l=y(l,i.thousandsSeparator));var d=i.symbol;var p=i.formatter;var m=p(d,l,o,c);return a+m+a}}],[{key:"enableDebugging",value:function e(){f.debug=true}},{key:"disableDebugging",value:function e(){f.debug=false}}]);return f}();t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var i=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var u=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var l=a(r("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatter.js"));var d={format:u.formatMoney,get templates(){throw new Error("[MoneyFormatterProvider] custom templates are not supported in CLDR mode")}};var p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,n.default)(this,t);(0,o.default)(this,"useCldrMode",void 0);(0,o.default)(this,"commerceMoneyFormatter",void 0);this.useCldrMode=e;this.commerceMoneyFormatter=new l.default("native")}(0,s.default)(t,[{key:"setUseCldrMode",value:function e(t){this.useCldrMode=t}},{key:"formatter",get:function e(){if(this.useCldrMode)return d;return this.commerceMoneyFormatter}}]);return t}();var m=new p(i.legacyV6Flags.isFeatureEnabled(c.default.CLDR_NUMBER_FORMATTER));var f=m;t.default=f;e.exports=t.default},"./src/main/webapp/universal/src/shared/images/configuration/no-image.png":function(e,t,r){"use strict";r.r(t);t["default"]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozMzdDN0I3OUU1ODYxMUUxOTM1QzhBNzYyREExMzk4MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozMzdDN0I3QUU1ODYxMUUxOTM1QzhBNzYyREExMzk4MyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjMzN0M3Qjc3RTU4NjExRTE5MzVDOEE3NjJEQTEzOTgzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjMzN0M3Qjc4RTU4NjExRTE5MzVDOEE3NjJEQTEzOTgzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+uXjyAAAABKhJREFUeNrs17GNwkAQhlGMqANxmXNyqoAy6YErgNwZiEaW7QD5pAN+z3vSxGuNpU+7Q2ttBZBgECxAsAAECxAsAMECECxAsAAEC0CwAMECECwAwQIEC0CwAAQLECwAwQIQLECwAAQLQLAAwQIQLADBAgQLQLAABAsQrBemabJ1WIhxHN963trKgZm2nzpYsIA5Dn2ufX4EC/j2WJ37nPrcBAtIiNXFkxAQK8EClhArwQJiYiVYQEysBAuIiZVgATGxEiwgJlaCBcTESrCAmFgJFhATK8ECsYqJlWCBWMXESrBArC5JHy5YIFaCBYiVYAElYyVYIFaCBYiVYAFlYyVYIFaCBYiVYAFlYyVYIFaCBYiVYAFlYyVYIFaCBYiVYAFlYyVYIFaCBYiVYIFYlY2VYIFYCRYgVoIFYlWaYIFYCRYgVoIFYiVYgFgJFiBWggViJViAWAkWIFaCBWIlWIBYCRaIlVgJFoiVYAFiJVggVggWiJVgAWIlWCBWCBaIlWABYiVYIFYIFoiVYAFiJVggVggWiJVggVghWCBWCBaIlWCBWCFYIFaCZQUgVoIFYoVggVgJFiBWggVihWCBWAkWiJVYCRaIFYIFYiVYIFYIFogVggViJVggVggWiBWCBWIlWCBWCBaIFYIFYiVYIFYIFogVgoVYIVggVggWiBWChVghWCBWCBaIFYKFWCFYIFYIFoiVYIFYIVggVggWYiVWggVihWCBWCFYiBWCBWKFYIFYIViIFYIFYoVggVghWIgVggVihWCBWCFYiBWCBWKFYCFWIFiIFYIFYoVgIVYgWIgVggVihWAhViBYiBWCBWKFYCFWIFiIFYKFWIkVgoVYIVggVggWYgWChVghWCBWCBZiBYKFWCFYIFYIFmIFgoVYIViIlVghWIgVCBZihWAhViBYiBUIFmKFYCFWIFiIFQgWYoVgIVYgWIgVCBZihWAhViBYiBUIlliBYCFWIFiIFQiWWIFgIVYgWIgVgoVYgWAhViBYiBWChViBYCFWIFhiJVYIFmIFgoVYwd9trCAyVsc+v9aBGxZiBYKFWIFgiRUIFmIFgoVYgWCJFQgWYgWChViBYIkVCBZiBYIlVmIFgiVWIFiIFQiWWAGCJVYgWIgVCJZYAYIlViBYiBUIllgBgiVWIFiIFQiWWIFgWYFYgWCJFSBYYgWChViBYIkVIFhiBYKFWIFgiRUgWGIFgoVYgWCJFSBYYgWCJVZiBYIlVoBgiRUIllgBgiVWgGCJFQiWWAGCJVaAYIkVCJZYAYIlVoBgiRUIllgBgiVWQLFgiRUIllgBgiVWQKlgiRUIllgBgiVWQKlgiRUIllgBgiVWQKlgiRUIllgBgiVWQKlgiRUIllgBgiVWQKlgiRUIllgBgiVWQKlgiRUQESyxAiKCJVZARLDECogIllgBEcESKyAiWGIFRARLrICIYIkVEBEssQIigrUTK2CuzYfOvffZ93n4BUDCk1CsgFmG1potAIIFIFiAYAEIFoBgAYIFIFgAggUIFoBgAQgWIFgAggUgWIBgAQgWgGABggUgWACCBQgWgGABCBYgWACCBSBYgGAB/IenAAMAgBuRuY2xhS4AAAAASUVORK5CYII="},"./src/main/webapp/universal/src/shared/types/NormalizedProduct.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isPhysicalProduct=s;t.isDigitalProduct=o;t.isServiceProduct=c;t.isGiftCardProduct=i;t.isSubscribable=u;var n=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));function s(e){return e.productType===n.default.PHYSICAL}function o(e){return e.productType===n.default.DIGITAL}function c(e){return e.productType===n.default.SERVICE}function i(e){return e.productType===n.default.GIFT_CARD}function u(e){return s(e)||c(e)}},"./src/main/webapp/universal/src/shared/types/NormalizedVariant.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPhysicalVariant=s;t.ShippingSizeUnit=t.ShippingWeightUnit=void 0;var a;t.ShippingWeightUnit=a;(function(e){e["KILOGRAM"]="KILOGRAM";e["POUND"]="POUND"})(a||(t.ShippingWeightUnit=a={}));var n;t.ShippingSizeUnit=n;(function(e){e["CENTIMETER"]="CENTIMETER";e["INCH"]="INCH"})(n||(t.ShippingSizeUnit=n={}));function s(e){var t=e;return void 0!==t.shippingWeight&&void 0!==t.shippingSize}},"./src/main/webapp/universal/src/shared/types/SubscriptionPlan.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BillingPeriodUnit=void 0;var a;t.BillingPeriodUnit=a;(function(e){e["WEEK"]="WEEK";e["MONTH"]="MONTH"})(a||(t.BillingPeriodUnit=a={}))},"./src/main/webapp/universal/src/shared/utils/ColorUtils.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.resolveColorReference=f;t.matchColorToSitePaletteColor=v;t.getHeaderEffectsTrackingInfo=t.generateCustomColorReference=t.generatePaletteColorReference=t.colorDifference=t.isHsl=t.isHex=void 0;var s=a(r("./common/temp/node_modules/@sqs/utils/color/parseColor.js"));var i=r("./src/main/webapp/universal/src/apps/App/shared/constants/ColorConfig.js");var n=function e(t){return"string"===typeof t&&"#"===t.charAt(0)};t.isHex=n;var o=function e(t){return"string"===typeof t&&"hsl"===t.substring(0,3)};t.isHsl=o;var c=["red","green","blue"];var u=function e(t,r){var a=(0,s.default)(t);var n=(0,s.default)(r);if(!a||!n)return null;return c.reduce(function(e,t){return e+Math.max(a[t],n[t])-Math.min(a[t],n[t])},0)*a.alpha};t.colorDifference=u;var l=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:i.ColorOverrideTypes.SITE_PALETTE_COLOR,sitePaletteColor:{id:t,alpha:r}}};t.generatePaletteColorReference=l;var d=function e(t){return{type:i.ColorOverrideTypes.CUSTOM_COLOR,customColor:t}};t.generateCustomColorReference=d;var p=function e(t,r){var a=["solidHeaderBorderColor","gradientHeaderBorderColor","solidHeaderDropShadowColor","gradientHeaderDropShadowColor","solidHeaderBackgroundColor","gradientHeaderBackgroundColor","solidHeaderNavigationColor","gradientHeaderNavigationColor"];if(a.includes(t)){var n=t.split(/(?=[A-Z])/);var s=n.shift();var o=n[0].toLowerCase()+n.slice(1).join("");var c=r.type===i.ColorOverrideTypes.SITE_PALETTE_COLOR?"palette":"custom";return[s,o,c]}return null};t.getHeaderEffectsTrackingInfo=p;function m(r,e){return e.find(function(e){var t=e.id;return t===r})}function f(e,t){if((null===e||void 0===e?void 0:e.type)===i.ColorOverrideTypes.SITE_PALETTE_COLOR){var r=m(e.sitePaletteColor.id,t);return null===r||void 0===r?void 0:r.value}if((null===e||void 0===e?void 0:e.type)===i.ColorOverrideTypes.CUSTOM_COLOR)return e.customColor}function v(t,e){return e.find(function(e){return e.value===t})}},"./src/main/webapp/universal/src/shared/utils/Rte/TextColorMappingConstants.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.tweakNames=t.fontMappingNodeCommands=t.fontMappingCommandToTweakName=t.command=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=r("./common/temp/node_modules/@sqs/rte-react/dist/index.js");var o;var c=s.COMMAND.TEXT_COLOR_MAPPING;t.command=c;var i=(o={},(0,n.default)(o,s.COMMAND.HEADING_1,"headingExtraLargeColor"),(0,n.default)(o,s.COMMAND.HEADING_2,"headingLargeColor"),(0,n.default)(o,s.COMMAND.HEADING_3,"headingMediumColor"),(0,n.default)(o,s.COMMAND.HEADING_4,"headingSmallColor"),(0,n.default)(o,s.COMMAND.PARAGRAPH_LARGE,"paragraphLargeColor"),(0,n.default)(o,s.COMMAND.PARAGRAPH,"paragraphMediumColor"),(0,n.default)(o,s.COMMAND.PARAGRAPH_SMALL,"paragraphSmallColor"),o);t.fontMappingCommandToTweakName=i;var u=Object.keys(i);t.fontMappingNodeCommands=u;var l=Object.values(i);t.tweakNames=l},"./src/main/webapp/universal/src/shared/utils/Rte/components/TextColorMappingButton.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/color-palette.js");r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var n=a(r("./common/temp/node_modules/prop-types/index.js"));var o=a(r("./common/temp/node_modules/react/index.js"));var s=r("./src/main/webapp/frontend/packages/brand/color-palette/lib/index.js");var p=r("./common/temp/node_modules/@sqs/rte-react/dist/index.js");var c=r("./common/temp/node_modules/@sqs/rosetta-compositions/build/lib/index.js");var i=r("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var m=r("./src/main/webapp/universal/src/apps/App/shared/utils/SectionDomUtils.ts");var f=r("./src/main/webapp/universal/src/apps/App/shared/utils/selectors.js");var u=r("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var l=r("./src/main/webapp/universal/src/apps/App/shared/redux/selectors/index.js");var v=r("./src/main/webapp/universal/src/shared/utils/Rte/TextColorMappingConstants.js");function d(e,t){var r=null===e||void 0===e?void 0:e.itemStates.textColorMapping;var a=null===r||void 0===r?void 0:r.active;if(!a)return null;if(!r.attrs)return null;var n=r.attrs.colorId;if(!n)return null;if("custom"===n)return r.attrs.custom;var s=(0,f.getPaletteColor)(t,{id:n});return s}function b(r,e,t,a){var n=(0,m.getClosestSectionEl)(a.get("contentBox").getDOMNode());var s=(0,m.getThemeDataBySectionEl)(n);var o=t.find(function(e){var t=e.themeId;return t===s.themeId});var c=o.mappings.filter(function(e){var t=e.variableName;return v.tweakNames.includes(t)});var i=v.fontMappingNodeCommands.find(function(e){var t;return null===r||void 0===r?void 0:null===(t=r.itemStates[e])||void 0===t?void 0:t.active})||p.COMMAND.PARAGRAPH;var u=v.fontMappingCommandToTweakName[i];var l=c.find(function(e){var t=e.variableName;return t===u});var d=l.custom?l.custom:(0,f.getPaletteColor)(e,{id:l.colorId});return d}function g(e){var t=e.activePalette,r=e.block,a=e.menuState,n=e.themes;var s=d(a,t)||b(a,t,n,r);return o.default.createElement(i.Flex,{justifyContent:"space-around"},o.default.createElement(c.ColorPicker.Swatch,{size:"sizes.175",color:s}))}g.propTypes={activePalette:s.PalettePropType.isRequired,block:n.default.shape({get:n.default.func}).isRequired,menuState:n.default.shape({itemStates:n.default.object.isRequired}).isRequired,themes:n.default.arrayOf(n.default.object).isRequired};var C=(0,u.cmsStoreConnect)(function e(t){return{activePalette:(0,l.getActivePalette)(t),themes:(0,l.getThemes)(t)}})(g);var h=C;t.default=h;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/Rte/components/TextColorMappingFlyout.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;r("./src/main/webapp/universal/src/shared/i18n/configurations/color-palette.js");var n=a(r("./common/temp/node_modules/prop-types/index.js"));var p=a(r("./common/temp/node_modules/react/index.js"));var m=r("./src/main/webapp/frontend/packages/brand/color-palette/lib/index.js");var f=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var v=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var s=r("./src/main/webapp/frontend/packages/universal-utils/cjs/index.js");var b=r("./common/temp/node_modules/@sqs/utils/palette/index.js");var g=a(r("./src/main/webapp/universal/src/shared/components/TabbedSwatchCustomPicker.jsx"));var C=r("./src/main/webapp/universal/src/apps/App/shared/constants/ColorConfig.js");var h=a(r("./src/main/webapp/universal/src/apps/App/shared/components/Colors/SwatchPicker.js"));var o=r("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var c=r("./src/main/webapp/universal/src/apps/App/shared/redux/selectors/index.js");var y=(0,s.createLogger)("TextColorMappingFlyout","steelblue");function i(e){var t=e.activePalette,n=e.onChange,r=e.onRequestClose,a=e.value;var s=a.textContent,o=a.colorId,c=a.custom;var i={type:c?C.ColorOverrideTypes.CUSTOM_COLOR:C.ColorOverrideTypes.SITE_PALETTE_COLOR,customColor:c,sitePaletteColor:{id:o,alpha:1}};var u=b.utils.sortColorsBySystemColorOrder(t.colors,m.paletteConstantsV2.SYSTEM_COLOR_AS_ORDERED_ARRAY_V2);var l=function e(t){var r=t.id===o;var a={colorId:r?null:t.id,custom:null,isDeselect:r,textContent:s};y("Apply textColorMapping swatch",a);n(a)};var d=function e(t){var r={colorId:"custom",custom:t,textContent:s};y("Apply textColorMapping custom",r);n(r)};return v.legacyV6Flags.isFeatureEnabled(f.default.SEVEN_ONE_RTE_TEXT_COLOR_MAPPING_CUSTOM)?p.default.createElement(g.default,{initialData:i,colors:u,onSelectSwatch:l,onSelectCustomColor:d,selectByColorId:true}):p.default.createElement(h.default,{activeSlotId:o,onSelect:l,palette:t})}i.propTypes={autoFocus:n.default.bool,className:n.default.string,dispatch:n.default.func,value:n.default.shape({textContent:n.default.string,colorId:n.default.string,custom:n.default.string}),itemConfigEditorProps:n.default.shape({className:n.default.string,modalClassName:n.default.string,overlayClassName:n.default.string,pageDropdownClassName:n.default.string}),onChange:n.default.func,onRequestClose:n.default.func,renderedInField:n.default.bool,activePalette:m.PalettePropType};var u=(0,o.cmsStoreConnect)(function e(t){return{activePalette:(0,c.getActivePalette)(t)}})(i);var l=u;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/Rte/components/textColorMapping.less":function(e,t,r){e.exports={popoverContainer:"_32KGBgr29"}},"./src/main/webapp/universal/src/shared/utils/Rte/getDeleteSectionItemConfig.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var o=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=function e(){return{command:"removeBlock",title:(0,o.t)("Remove Block"),children:function e(){return n.default.createElement(s.Trash,{color:"red.300"})}}};var i=c;t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/Rte/getFontMappingItemConfig.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=O;t.getFontMappingOptions=t.FontMappingOptions=t.Variants=void 0;var o=n(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var c=n(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=n(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=n(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=n(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=n(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=n(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var b=n(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=n(r("./common/temp/node_modules/prop-types/index.js"));var g=a(r("./common/temp/node_modules/react/index.js"));var C=r("./common/temp/node_modules/@sqs/rte-react/dist/index.js");var m=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=r("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var v=r("./src/main/webapp/universal/src/shared/constants/SevenOneFontMappings.js");var h=n(r("./src/main/webapp/universal/src/apps/App/shared/components/ToolbarDropdownSelect.js"));function y(n){var s=P();return function e(){var t=(0,d.default)(n),r;if(s){var a=(0,d.default)(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);return(0,l.default)(this,r)}}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var x={NODES:"nodes",MARKS:"marks"};t.Variants=x;var _="monospace";var w=[{id:v.MAPPING_SIZE_TYPE.HEADING_1,label:f.BlockLevelStyles.HEADING_1.title,nodeCommand:C.COMMAND.HEADING_1,mappingSize:"heading-1",keybinding:"Mod-Alt-6"},{id:v.MAPPING_SIZE_TYPE.HEADING_2,label:f.BlockLevelStyles.HEADING_2.title,nodeCommand:C.COMMAND.HEADING_2,mappingSize:"heading-2",keybinding:"Mod-Alt-5"},{id:v.MAPPING_SIZE_TYPE.HEADING_3,label:f.BlockLevelStyles.HEADING_3.title,nodeCommand:C.COMMAND.HEADING_3,mappingSize:"heading-3",keybinding:"Mod-Alt-4"},{id:v.MAPPING_SIZE_TYPE.HEADING_4,label:f.BlockLevelStyles.HEADING_4.title,nodeCommand:C.COMMAND.HEADING_4,mappingSize:"heading-4",keybinding:"Mod-Alt-3"},{id:v.MAPPING_SIZE_TYPE.BODY_1,label:f.BlockLevelStyles.PARAGRAPH_LARGE.title,nodeCommand:C.COMMAND.PARAGRAPH_LARGE,mappingSize:"paragraph-1",keybinding:"Mod-Alt-2"},{id:v.MAPPING_SIZE_TYPE.BODY_2,label:f.BlockLevelStyles.NORMAL.title,nodeCommand:C.COMMAND.PARAGRAPH,mappingSize:"paragraph-2",keybinding:"Mod-Alt-1"},{id:v.MAPPING_SIZE_TYPE.BODY_3,label:f.BlockLevelStyles.PARAGRAPH_SMALL.title,nodeCommand:C.COMMAND.PARAGRAPH_SMALL,mappingSize:"paragraph-3",keybinding:"Mod-Alt-0"},{id:_,label:f.BlockLevelStyles.CODE.title,nodeCommand:C.COMMAND.CODE_BLOCK,keybinding:"Mod-Alt-m"}];t.FontMappingOptions=w;function E(e){return e===x.NODES?function e(t){var r,a;var n=t.config,s=t.menuState;return null===(r=s.itemStates)||void 0===r?void 0:null===(a=r[n.nodeCommand])||void 0===a?void 0:a.active}:function e(t){var r,a,n,s;var o=t.config,c=t.menuState;if("site-default"===o.id){var i,u;return!(null!==(i=c.itemStates)&&void 0!==i&&null!==(u=i.fontMapping)&&void 0!==u&&u.active)}if(!o.mappingSize||!(null!==(r=c.itemStates)&&void 0!==r&&null!==(a=r.fontMapping)&&void 0!==a&&a.active))return false;var l=null===(n=c.itemStates)||void 0===n?void 0:null===(s=n.fontMapping)||void 0===s?void 0:s.attrs;if(null!==l&&void 0!==l&&l.mappingSize)return o.mappingSize===l.mappingSize;try{var d=document;while(null!==(p=d.activeElement)&&void 0!==p&&p.contentDocument){var p;d=d.activeElement.contentDocument}var m=d.defaultView;var f=m.getSelection();var v=f.anchorNode.parentElement;var b=Array.from(v.classList);return b.find(function(e){return e==="sqsrte-".concat(o.mappingSize)})}catch(e){return false}}}var j=function e(s,o){var t=w.filter(function(e){var t=e.mappingSize,r=e.nodeCommand;if(s===x.NODES){var a,n;return null===(a=o.itemStates)||void 0===a?void 0:null===(n=a[r])||void 0===n?void 0:n.enabled}return t});s===x.MARKS&&t.length>0&&t.unshift({id:"site-default",label:(0,m.t)("Site Default")});return t};t.getFontMappingOptions=j;var A=function e(t){var r=t.closeItemConfigEditor,u=t.execCommand,a=t.itemEditorActiveCommand,l=t.menuState,d=t.variant;var n=(0,g.useState)(false),s=(0,b.default)(n,2),o=s[0],c=s[1];(0,g.useEffect)(function(){a&&c(false)},[a]);var p=(0,g.useMemo)(function(){return j(d,l)},[d,l]);var i=(0,g.useMemo)(function(){return E(d)},[d]);var m=p.find(function(e){return i({config:e,menuState:l})});var f=function e(r){var t=p.find(function(e){var t=e.id;return t===r});if(!t)return;var a=d===x.NODES;var n=a?t.nodeCommand:C.COMMAND.FONT_MAPPING;var s={mappingSize:t.mappingSize};u(n,s);if(a){var o;var c=null===(o=l.itemStates.nodeFontMapping)||void 0===o?void 0:o.attrs.editor.view.dom;var i=(null===c||void 0===c?void 0:c.getBoundingClientRect().bottom)<0;i&&c.scrollIntoView()}};var v=function e(){"function"===typeof r&&r()};return g.default.createElement(h.default,{options:p,onBeforeOpen:v,onChange:f,state:[o,c],value:null===m||void 0===m?void 0:m.id})};A.propTypes={closeItemConfigEditor:s.default.func,execCommand:s.default.func.isRequired,menuState:s.default.shape({itemStates:s.default.object.isRequired}).isRequired};var S=function(e){(0,u.default)(s,e);var a=y(s);function s(){var n;(0,o.default)(this,s);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n=a.call.apply(a,[this].concat(t));(0,p.default)((0,i.default)(n),"makeKeyHandler",function(a){return function(e){var t=n.props.execCommand;var r={mappingSize:a.mappingSize};t(C.COMMAND.FONT_MAPPING,r)}});return n}(0,c.default)(s,[{key:"componentWillMount",value:function e(){var r=this;if(this.props.variant===x.MARKS){var a=this.context.registerKeybinding;w.forEach(function(e){if(e.keybinding){var t=r.makeKeyHandler(e);a(e.keybinding,t)}})}}},{key:"render",value:function e(){return g.default.createElement(A,this.props)}}]);return s}(g.default.Component);(0,p.default)(S,"contextTypes",{handleCommand:s.default.func,registerKeybinding:s.default.func});function O(e){var t=e.variant;t=t||x.NODES;var r=t===x.NODES?f.CustomCommands.NODE_FONT_MAPPING:C.COMMAND.FONT_MAPPING;return{command:r,variant:t,renderer:S}}},"./src/main/webapp/universal/src/shared/utils/Rte/getFrameCompatibleLinkItemConfig.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=u;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var o=r("./common/temp/node_modules/@sqs/core-components/build/lib/index.js");var c=r("./src/main/webapp/universal/src/shared/constants/TextEditor.js");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(){var e,t;var r=(null===(e=document.querySelector("#sqs-site-frame"))||void 0===e?void 0:null===(t=e.contentDocument)||void 0===t?void 0:t.body)||document.body;var a=r.ownerDocument.defaultView;var n=a!==a.top;var s=!n;return i({},o.RteItemConfig.link,{handleCommand:i({},o.RteItemConfig.link.handleCommand,{fields:[i({},o.RteItemConfig.link.handleCommand.fields[0],{props:i({},o.RteItemConfig.link.handleCommand.fields[0].props,{lockFocus:s,modalMountAt:r,zIndex:c.zIndexes.MODALS})})]})})}e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/Rte/getPastePlainItemConfig.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var n=a(r("./common/temp/node_modules/react/index.js"));var s=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var o=r("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var c=r("./src/main/webapp/universal/src/shared/constants/TextEditor.js");function i(){return{collapses:true,suppressActiveState:true,command:c.CustomCommands.PASTE_PLAIN,title:(0,s.t)("Paste as Plain Text"),children:function e(t){return n.default.createElement(o.ClipboardText,null)}}}e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/Rte/getTextColorMappingItemConfig.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getValue=u;t.parseValue=l;t.default=d;var n=a(r("./common/temp/node_modules/react/index.js"));var p=r("./common/temp/node_modules/@sqs/rte-core/dist/index.js");var s=r("./src/main/webapp/universal/src/shared/i18n/index.ts");var m=r("./src/main/webapp/universal/src/shared/utils/Rte/TextColorMappingConstants.js");var o=a(r("./src/main/webapp/universal/src/shared/utils/Rte/components/TextColorMappingButton.js"));var c=a(r("./src/main/webapp/universal/src/shared/utils/Rte/components/TextColorMappingFlyout.js"));var i=a(r("./src/main/webapp/universal/src/shared/utils/Rte/components/textColorMapping.less"));function u(e,t,r){var a=r.schema,n=r.selection;var s=(0,p.getClosestMarkInfo)(a.marks[m.command],r),o=s.mark,c=s.from,i=s.to;var u=o?Math.min(c,n.from):c;var l=o?Math.max(i,n.to):i;var d=r.doc.cut(u,l).textContent;return{textContent:d,colorId:null===o||void 0===o?void 0:o.attrs.colorId,custom:null===o||void 0===o?void 0:o.attrs.custom}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.textContent,r=e.colorId,a=e.custom,n=void 0===a?null:a;return{command:m.command,attrs:{colorId:r,custom:n},textContent:t}}function d(e,t){var a=t.block;return{children:function e(t){var r=t.menuState;return n.default.createElement(o.default,{block:a,menuState:r})},command:m.command,handleCommand:{popoverContainerClassName:i.default.popoverContainer,title:(0,s.t)("Text Color",{}),skipFocusOnChange:true,shouldUpdateOnChange:true,shouldCloseOnUpdate:true,fields:[{comp:c.default,props:{},getValue:u,parseValue:l}]},suppressActiveState:true,title:(0,s.t)("Text Color",{})}}},"./src/main/webapp/universal/src/shared/utils/RteToolbarUtils.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:true});t.getOptionByCommand=S;t.getRosettaMenuState=O;t.assertRosettaCommands=I;t.damaskToRosettaToolbarOptions=T;t.schemaToToolbarOptions=k;t.getDefaultsBySchemaType=F;t.getItemsFromMapping=D;t.parseConfig=R;t.getToolbarItemsRosetta=N;t.getToolbarItemsDamask=V;t.getItems=q;t.groupItems=B;t.fireEvent=U;t.EMOTION_CACHE_KEY=void 0;var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));r("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");var d=r("./common/temp/node_modules/@sqs/rte-core/dist/index.js");var c=r("./common/temp/node_modules/@sqs/core-components/build/lib/index.js");var p=r("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var i=r("./src/main/webapp/universal/src/shared/utils/CMSV7Events/blockEditorEvents.ts");var u=a(r("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js"));var m=r("./src/main/webapp/universal/src/shared/utils/RteUtils.js");var l=n(r("./src/main/webapp/universal/src/shared/utils/Rte/getFontMappingItemConfig.js"));var f=a(r("./src/main/webapp/universal/src/shared/utils/Rte/getDeleteSectionItemConfig.js"));var v=a(r("./src/main/webapp/universal/src/shared/utils/Rte/getFrameCompatibleLinkItemConfig.js"));var b=a(r("./src/main/webapp/universal/src/shared/utils/Rte/getTextColorMappingItemConfig.js"));var g=a(r("./src/main/webapp/universal/src/shared/utils/Rte/getPastePlainItemConfig.js"));var C=r("./src/main/webapp/universal/src/apps/App/shared/utils/UndoRedoUtils.js");var h=r("./src/main/webapp/frontend/packages/websites-constants/lib/index.js");var y=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var P=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var x;function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),true).forEach(function(e){(0,s.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var E="rosetta-rte-toolbar-cache-key";t.EMOTION_CACHE_KEY=E;var j=2;var A=[c.RteItemConfig.undo,c.RteItemConfig.redo];function S(e,r){return e.find(function(e){var t=e.command;return t===r})}function O(e,t){var r=e.toolbarOptions,a=e.editor,n=e.state;var s=(null===a||void 0===a?void 0:a.getMenuState(n))||n;var o={};y.legacyV6Flags.isFeatureEnabled(P.default.RTE_TOOLBAR_RELEASE)&&S(r,p.CustomCommands.NODE_FONT_MAPPING)&&(o[p.CustomCommands.NODE_FONT_MAPPING]={active:void 0,attrs:{editor:a,state:n},enabled:true});S(r,p.CustomCommands.PASTE_PLAIN)&&(o[p.CustomCommands.PASTE_PLAIN]={active:void 0,attrs:void 0,enabled:true});var c=t===h.BlockTypeStrings.BlockTypeKeys[j];c&&S(r,p.CustomCommands.REMOVE_BLOCK)&&(o[p.CustomCommands.REMOVE_BLOCK]={active:void 0,attrs:void 0,enabled:true});var i=S(r,d.COMMAND.TEXT_COLOR_MAPPING);if((0,m.isTextColorMappingEnabled)()&&i){var u=o[d.COMMAND.TEXT_COLOR_MAPPING]||{};o[d.COMMAND.TEXT_COLOR_MAPPING]=w({},u,{attrs:w({},u.attrs,{menuState:s})})}var l=w({},s,{itemStates:w({},s.itemStates,{},o)});return l}function I(e,t){var r=Object.keys(e.itemStates);var a=t.filter(function(e){if((0,C.isUndoRedoEnabled)()&&A.includes(e))return false;var t=e.command;if(t&&!r.includes(t))return true}).map(function(e){var t=e.command;return t});if(a.length>0)throw new Error("toolbarOptions has items not in menuState: ".concat(a.join(",")))}function T(e){return e.map(function(e){return e.isDivider?"divider":e})}function k(e){if(!e)return{};var t=p.Schemas[e];if(!t){console.error("Unrecognized schemaType",e);return{}}var r=w({},t);r.align=Array.isArray(t.align);r.italic=t.italics;return r}function F(e){return w({align:true,bold:true,clearFormatting:true,italic:true,link:false,pastePlain:true,undoRedo:true},k(e),{underline:false})}function D(s,e){return Object.entries(e).reduce(function(e,t){var r=(0,o.default)(t,2),a=r[0],n=r[1];return s[a]&&n?e.concat(n):e},[])}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.schema||F(e.type);var r=e.isInline?{indent:false,lists:false,quote:false}:{};return Object.assign({},t,r)}var M=function e(t){return t.isInFrame?(0,v.default)():c.RteItemConfig.link};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=Object.assign({},R(t),e);var a=M(r);var n=(0,b.default)(r,t);var s=[];if(y.legacyV6Flags.isFeatureEnabled(P.default.RTE_TOOLBAR_RELEASE)){s.push.apply(s,D(r,{heading:[(0,l.default)({variant:l.Variants.NODES})]}));u.default.isSevenOne()&&s.push.apply(s,D(r,{fontMapping:[(0,l.default)({variant:l.Variants.MARKS})]}));s.push("divider")}s.push.apply(s,D(r,{bold:[c.RteItemConfig.bold],italic:[c.RteItemConfig.italic],underline:[c.RteItemConfig.underline]}));(0,m.isTextColorMappingEnabled)()&&s.push.apply(s,D(r,{textColorMapping:[n]}));s.push.apply(s,D(r,{link:[a]}));y.legacyV6Flags.isFeatureEnabled(P.default.RTE_TOOLBAR_RELEASE)||r.customBlockType&&s.push.apply(s,r.customBlockType);(r.heading||r.align)&&s.push("divider");y.legacyV6Flags.isFeatureEnabled(P.default.RTE_TOOLBAR_RELEASE)||s.push.apply(s,D(r,{heading:[c.RteItemConfig.blockType]}));s.push.apply(s,D(r,{align:[c.RteItemConfig.align]}));(r.quote||r.lists)&&s.push("divider");s.push.apply(s,D(r,{quote:[c.RteItemConfig.blockQuote],lists:[c.RteItemConfig.unorderedList,c.RteItemConfig.orderedList]}));(r.strikethrough||r.subscript||r.superscript)&&s.push("divider");s.push.apply(s,D(r,{strikethrough:[c.RteItemConfig.strikethrough],subscript:[c.RteItemConfig.subscript],superscript:[c.RteItemConfig.superscript],indent:["divider",c.RteItemConfig.outdent,c.RteItemConfig.indent]}));(r.pastePlain||r.undoRedo||r.clearFormatting)&&s.push("divider");s.push.apply(s,D(r,{pastePlain:[(0,g.default)()],undoRedo:A,clearFormatting:[c.RteItemConfig.clearFormatting]}));r.removeBlock&&s.push(p.DIVIDER);s.push.apply(s,D(r,{removeBlock:[(0,f.default)()]}));return s}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=Object.assign({},R(t),e);var a=[];a.push.apply(a,D(r,{undoRedo:(0,C.isUndoRedoEnabled)()?void 0:[p.Items.UNDO,p.Items.REDO],buttonAlignment:[p.Items.BUTTON_ALIGN_LEFT,p.Items.BUTTON_ALIGN_CENTER,p.Items.BUTTON_ALIGN_RIGHT],buttonSize:[p.Items.BUTTON_SIZES],buttonLink:[p.Items.BUTTON_LINK],bold:[p.Items.BOLD],italic:[p.Items.ITALIC],link:[p.Items.LINK]}));(r.heading||r.align||r.quote||r.lists||r.indent)&&a.push(p.DIVIDER);a.push.apply(a,D(r,{align:[p.Items.ALIGN_LEFT,p.Items.ALIGN_CENTER,p.Items.ALIGN_RIGHT],heading:[p.Items.STYLES],quote:[p.Items.QUOTE],lists:[p.Items.ORDERED_LIST,p.Items.UNORDERED_LIST],indent:[p.Items.OUTDENT,p.Items.INDENT]}));(r.pastePlain||r.clearFormatting)&&a.push(p.DIVIDER);a.push.apply(a,D(r,{pastePlain:[p.Items.PASTE_PLAIN],clearFormatting:[p.Items.CLEAR_FORMAT],removeBlock:[p.Items.REMOVE_BLOCK]}));return a}function q(e,t){return(0,m.isRosettaRteEnabled)()?N(e,t):V(e,t)}function B(e){var t=e.toolbarOptions;var r=[];var a=[r];t.forEach(function(e){if("divider"===e){r=[];a.push(r);return}r.push(e)});return a}var L=(x={},(0,s.default)(x,d.COMMAND.BOLD,"bold"),(0,s.default)(x,d.COMMAND.STRONG,"bold"),(0,s.default)(x,d.COMMAND.ITALIC,"italic"),(0,s.default)(x,d.COMMAND.EM,"italic"),x);function U(e){var t=e.blockTypeName,r=e.command,a=e.attrs,n=e.opts;try{var s=L[r]||r;if(null!==a&&void 0!==a&&a.mappingSize){(0,i.selectTextEditorDropdownOption)({blockTypeName:t,value:a.mappingSize});return}(0,i.clickTextEditorButton)({blockTypeName:t,buttonType:s})}catch(e){}}},"./src/main/webapp/universal/src/shared/utils/RteUtils.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isRosettaRteEnabled=v;t.isTextColorMappingEnabled=b;t.removeTextColors=h;t.createState=t.createSchema=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var o=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var c=r("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var i=r("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var u=r("./common/temp/node_modules/@sqs/rte-core/dist/index.js");var l=r("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var d=a(r("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js"));var p=r("./src/main/webapp/universal/src/apps/App/shared/utils/UndoRedoUtils.js");function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function v(){var e=(0,i.getBreakpoint)(c.breakpoints);if((0,o.isRosettaRichTextToolbarLayoutEngineEnabled)(e))return true;if(o.legacyV6Flags.isFeatureEnabled(s.default.RTE_TOOLBAR_RELEASE))return true;return false}function b(){return o.legacyV6Flags.isFeatureEnabled(s.default.SEVEN_ONE_RTE_TEXT_COLOR_MAPPING)&&d.default.isSevenOne()}var g=function e(t){var r=t.doc,a=t.schema,n=t.schemaType,s=t.isInline,o=t.isLinkable;a=a||l.defaultSchemas[n];var c=f({},a,{link:o});d.default.isSevenOne()||(c.fontMapping=false);b()&&(c.textColorMapping=true);if(s)return u.EditorSchema.createInline(f({},c,{},l.INLINE_FLAGS));r=r||{multiple:true,required:true};return u.EditorSchema.create(c,r)};t.createSchema=g;var C=function e(t){var r=t.initialData,a=t.placeholder,n=t.schema;var s=!(0,p.isUndoRedoEnabled)();var o={schema:n,placeholder:a,useHistory:s,plugins:(0,u.getPlugins)(n,{commands:(0,u.getCommandConfigs)(n,{useHistory:s}),useHistory:s,placeholder:a})};var c=null;if("string"===typeof r)c=u.EditorState.fromHTML(f({html:r},o));else{var i=null!==r&&void 0!==r&&r.getDOMNode?r.getDOMNode():r;i&&i.nodeType&&(c=u.EditorState.fromNode(f({node:i},o)))}c=c||u.EditorState.createEmpty(o);return c};t.createState=C;function h(e){var t=Array.from(e.querySelectorAll('span[class^="sqsrte-text-color"]'));t.forEach(function(e){e.outerHTML=e.innerHTML});return e}},"./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r("./src/main/webapp/frontend/packages/enums/ProductTypes.js"));var s=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var o=function e(t){switch(t){case n.default.PHYSICAL:return s.ProductType.PHYSICAL;case n.default.SERVICE:return s.ProductType.SERVICE;case n.default.GIFT_CARD:return s.ProductType.GIFT_CARD;case n.default.DIGITAL:return s.ProductType.DIGITAL;default:return null}};t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackEtsyImport.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.trackCloseImportSurvey=t.trackImportSurveyCTA=t.trackRespondImportSurvey=t.trackShowImportSurvey=t.trackSuccessBannerClosed=t.trackProgressBannerOpenDashboard=t.trackOpenProgressBanner=void 0;var n=a(r("./src/main/webapp/universal/src/shared/utils/events/TrackEventsV2.ts"));var s=a(r("./common/temp/node_modules/lodash/get.js"));var o="inventory-panel";var c="etsy";var i="product-importer";var u=new n.default("CommerceChannels",{event_owner_team:"commerce_channels",event_source:"web",product_area:"commerce_channels",website_id:(0,s.default)(window,"Static.SQUARESPACE_CONTEXT.website.id",null)});var l=function e(){u.track({actor:"user",action:"view",event_name:"CommerceChannels_View_ImportBanner",object_type:"banner",object_identifier:"import-in-progress",channel:c,product_page:o,product_section:i})};t.trackOpenProgressBanner=l;var d=function e(){u.track({actor:"user",action:"click",event_name:"CommerceChannels_Click_ToCompleteStorefront",object_type:"button",object_identifier:"import-in-progress-banner-continue-store-setup",channel:c,product_page:o,product_section:i})};t.trackProgressBannerOpenDashboard=d;var p=function e(){u.track({actor:"user",action:"click",event_name:"CommerceChannels_Click_ToCloseSuccessStateBanner",object_type:"button",object_identifier:"import-success-state-banner-close",channel:c,product_page:o,product_section:i})};t.trackSuccessBannerClosed=p;var m=function e(t){u.track({actor:"user",action:"view",event_name:"CommerceChannels_View_ProductImportSurvey",object_type:"modal",channel:c,product_page:t,product_section:i})};t.trackShowImportSurvey=m;var f=function e(t,r,a){u.track({actor:"user",action:"click",event_name:"CommerceChannels_Submit_ProductImportSurvey",object_type:"modal",object_value:r,freeform_response:a,channel:c,product_page:t,product_section:i})};t.trackRespondImportSurvey=f;var v=function e(t){u.track({actor:"user",action:"click",event_name:"CommerceChannels_Click_ProductImportSurveyCTA",object_type:"modal",object_identifier:"import-survey-button-import-cta",channel:c,product_page:t,product_section:i})};t.trackImportSurveyCTA=v;var b=function e(t){u.track({actor:"user",action:"click",event_name:"CommerceChannels_Click_Close_ProductImportSurvey",object_type:"modal",channel:c,product_page:t,product_section:i})};t.trackCloseImportSurvey=b},"./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.trackTaxCategoryChangeCategory=t.trackTaxCategorySearch=t.trackTaxCategoryClickCTA=t.trackTaxCategoryFeatureAvailable=t.TaxCategoryAction=t.trackChangeVariantCoreAttribute=t.trackDeleteVariant=t.trackSendPCFeedback=t.trackToggleSubscription=t.trackTogglePCBeta=t.trackToggleOnSale=t.trackChangeAdditionalInfo=t.trackChangeRelatedProducts=t.trackAssignForm=t.trackCreateForm=t.trackChangeVisibility=t.trackRemoveCategory=t.trackCreateNewCategory=t.trackAssignCategory=t.trackRemoveTag=t.trackAssignTag=t.trackEditProductTitle=t.trackEditProductDescription=t.trackSelectProductType=t.trackSelectStore=t.trackClickEditProduct=t.trackClickAddProduct=t.trackAddVariant=t.trackCloseWithoutSavingProductEditor=t.trackDuplicateProduct=t.trackDeleteProduct=t.trackAddProduct=t.trackSaveProductEditor=t.trackUpdateVariantOptionValue=t.trackAddProductOption=t.trackDeleteProductOption=t.trackChangeTabProductEditor=t.trackOpenProductEditor=t.ProductEditorTypes=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=a(r("./common/temp/node_modules/@sqs/track-events/v1.js"));var c=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var i=r("./src/main/webapp/universal/src/shared/utils/commerce/analytics/utils.ts");var o=r("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var u=a(r("./src/main/webapp/frontend/packages/enums/Flag.js"));var l=a(r("./src/main/webapp/universal/src/shared/i18n/eventsData.ts"));function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var m=c.ProductEditor;t.ProductEditorTypes=m;var f=new s.default({customSchemaName:"variant_images"},p({event_owner_team:"commerce",event_source:"web",product_area:"commerce-merch",product_section:"product-editor"},(0,l.default)()));var v=o.legacyV6Flags.isFeatureEnabled(u.default.NESTED_CATEGORIES)?c.ProductCollections.V2:c.ProductCollections.V1;var b=function e(t){var r=t.productId,a=t.productType,n=t.productName,s=t.productEditor;f.track({actor:"user",action:"open",object_type:"modal",object_identifier:"product-editor",indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_id:r,indirect_object_display_name:n,product_design_identifier:s})};t.trackOpenProductEditor=b;var g=function e(t){var r=t.productId,a=t.productType,n=t.productName,s=t.tabName,o=t.productEditor;f.track({actor:"user",action:"click",object_type:"tabs",object_identifier:"product-editor",object_display_name:s,indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_id:r,indirect_object_display_name:n,product_design_identifier:o})};t.trackChangeTabProductEditor=g;var C=function e(t){var r=t.optionName,a=t.productId,n=t.productName,s=t.productType,o=t.productEditor;f.track({actor:"user",action:"delete",object_type:"menuitem",object_identifier:"product-option",object_display_name:r,indirect_object_type:"commerceproduct",indirect_object_identifier:s,indirect_object_id:a,indirect_object_display_name:n,product_design_identifier:o})};t.trackDeleteProductOption=C;var h=function e(t){var r=t.optionName,a=t.productId,n=t.productName,s=t.productType,o=t.productEditor;f.track({actor:"user",action:"add",object_type:"menuitem",object_identifier:"product-option",object_display_name:r,indirect_object_type:"commerceproduct",indirect_object_identifier:s,indirect_object_id:a,indirect_object_display_name:n,product_design_identifier:o})};t.trackAddProductOption=h;var y=function e(t){var r=t.optionName,a=t.optionValue,n=t.productId,s=t.variantId,o=t.productEditor;f.track({actor:"user",action:"change",object_type:"menuitem",object_identifier:"variant-option-value",object_display_name:r,object_value:a,indirect_object_type:"variant",indirect_object_id:s,parent_product_id:n,product_design_identifier:o})};t.trackUpdateVariantOptionValue=y;var P=function e(t){var r=t.productId,a=t.productName,n=t.productType,s=t.productEditor,o=t.timeElapsed;f.track({actor:"user",action:"save",object_type:"commerceproduct",object_identifier:n,indirect_object_type:"commerceproduct",indirect_object_id:r,indirect_object_display_name:a,product_design_identifier:s,time_elapsed_ms:o})};t.trackSaveProductEditor=P;var x=function e(t){var r=t.productId,a=t.productName,n=t.productType,s=t.productEditor,o=t.timeElapsed;f.track({actor:"user",action:"add",object_type:"commerceproduct",object_identifier:n,object_id:r,object_display_name:a,product_design_identifier:s,time_elapsed_ms:o})};t.trackAddProduct=x;var _=function e(t){var r=t.productId,a=t.productName,n=t.productType,s=t.productEditor;f.track({actor:"user",action:"delete",object_type:"commerceproduct",object_identifier:n,object_id:r,object_display_name:a,product_design_identifier:s})};t.trackDeleteProduct=_;var w=function e(t){var r=t.oldProductId,a=t.newProductId,n=t.productName,s=t.productType,o=t.productEditor;f.track({actor:"user",action:"duplicate",object_type:"commerceproduct",object_identifier:s,object_id:a,object_display_name:n,indirect_object_type:"commerceproduct",indirect_object_id:r,product_design_identifier:o})};t.trackDuplicateProduct=w;var E=function e(t){var r=t.productId,a=t.productName,n=t.productType,s=t.productEditor,o=t.timeElapsed;f.track({actor:"user",action:"cancel",object_type:"modal",object_identifier:"product-editor",indirect_object_type:"commerceproduct",indirect_object_identifier:n,indirect_object_id:r,indirect_object_display_name:a,product_design_identifier:s,time_elapsed_ms:o})};t.trackCloseWithoutSavingProductEditor=E;var j=function e(t){var r=t.productId,a=t.productName,n=t.productType,s=t.variantId,o=t.productEditor;f.track({actor:"user",action:"add",object_type:"commerceproduct",object_identifier:"product-variant",object_id:s,indirect_object_type:"commerceproduct",indirect_object_identifier:n,indirect_object_id:r,indirect_object_display_name:a,parent_product_id:r,product_design_identifier:o})};t.trackAddVariant=j;var A=function e(t){f.track({actor:"user",action:"click",object_type:"button",object_identifier:"add-product",product_page:t,product_design_identifier:"".concat(v)})};t.trackClickAddProduct=A;var S=function e(t){f.track({actor:"user",action:"click",object_type:"button",object_identifier:"edit-product",product_page:t,product_design_identifier:"".concat(v)})};t.trackClickEditProduct=S;var O=function e(t){f.track({actor:"user",action:"select",object_type:"menuitem",object_identifier:"add-product-select-store",product_design_identifier:t})};t.trackSelectStore=O;var I=function e(t,r){f.track({actor:"user",action:"select",object_type:"commerceproduct",object_identifier:t,product_design_identifier:r})};t.trackSelectProductType=I;var T=function e(t,r,a,n){f.track({actor:"user",action:"change",object_type:"textarea",object_identifier:"product-description",indirect_object_type:"commerceproduct",indirect_object_identifier:r,indirect_object_display_name:t,indirect_object_id:n,product_design_identifier:a})};t.trackEditProductDescription=T;var k=function e(t,r,a,n){f.track({actor:"user",action:"change",object_type:"textarea",object_identifier:"product-title",object_value:t,indirect_object_type:"commerceproduct",indirect_object_identifier:r,indirect_object_id:n,product_design_identifier:a})};t.trackEditProductTitle=k;var F=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.tag;f.track({actor:"user",action:"add",object_type:"label",object_identifier:"product-tag",object_value:o,indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:n})};t.trackAssignTag=F;var D=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.tag;f.track({actor:"user",action:"delete",object_type:"label",object_identifier:"product-tag",object_value:o,indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:n})};t.trackRemoveTag=D;var R=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.category;f.track({actor:"user",action:"link",object_type:"label",object_identifier:"product-category",object_value:o,indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:"".concat(c.ProductCollections.V1,",").concat(n)})};t.trackAssignCategory=R;var M=function e(t,r){f.track({actor:"user",action:"create",object_type:"label",object_identifier:"product-category",object_value:t,product_design_identifier:"".concat(c.ProductCollections.V1,",").concat(r)})};t.trackCreateNewCategory=M;var N=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.category;f.track({actor:"user",action:"unlink",object_type:"label",object_identifier:"product-category",object_value:o,indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:"".concat(c.ProductCollections.V1,",").concat(n)})};t.trackRemoveCategory=N;var V=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.workflowState;f.track({actor:"user",action:"change",object_type:"setting",object_identifier:"visibility",object_value:o,indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:n})};t.trackChangeVisibility=V;var q=function e(t){f.track({actor:"user",action:"create",object_type:"form",object_identifier:"product-form",product_design_identifier:t})};t.trackCreateForm=q;var B=function e(t,r,a,n){f.track({actor:"user",action:"assign",object_type:"form",object_identifier:"product-form",indirect_object_type:"commerceproduct",indirect_object_identifier:r,indirect_object_display_name:t,indirect_object_id:n,product_design_identifier:a})};t.trackAssignForm=B;var L=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.newValue;f.track({actor:"user",action:"select",object_type:"menuitem",object_identifier:"related-products",object_value:o||"no-value-selected",indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:"".concat(v,",").concat(n)})};t.trackChangeRelatedProducts=L;var U=function e(t,r,a,n){f.track({actor:"user",action:"change",object_type:"textarea",object_identifier:"product-additional-info",indirect_object_type:"commerceproduct",indirect_object_identifier:r,indirect_object_id:n,indirect_object_display_name:t,product_design_identifier:a})};t.trackChangeAdditionalInfo=U;var G=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.isOnSale;f.track({actor:"user",action:"change",object_type:"setting",object_identifier:"on-sale-toggle",object_value:(0,i.createEventBoolean)(o),indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:n})};t.trackToggleOnSale=G;var W=function e(t,r,a,n){f.track({actor:"user",action:"change",object_type:"setting",object_identifier:"product-editor-design",object_value:a,indirect_object_type:"commerceproduct",indirect_object_identifier:r,indirect_object_display_name:t,indirect_object_id:n})};t.trackTogglePCBeta=W;var Y=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.val;f.track({actor:"user",action:"toggle",object_type:"setting",object_identifier:"subscription-product",object_value:o?"on":"off",indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:n})};t.trackToggleSubscription=Y;var z=function e(t){var r=t.productName,a=t.productType,n=t.productEditor,s=t.productId,o=t.dropdownValue,c=t.customResponse,i=t.numericValue,u=t.productSection;f.track({actor:"user",action:"submit",object_type:"form",object_identifier:"product-editor-feedback",object_value:o,indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_display_name:r,indirect_object_id:s,product_design_identifier:n,freeform_response:c.trim(),response_numeric:i,product_section:u})};t.trackSendPCFeedback=z;var H=function e(t){var r=t.productId,a=t.productName,n=t.productType,s=t.variantId,o=t.productEditor;f.track({actor:"user",action:"delete",object_type:"commerceproduct",object_identifier:"product-variant",object_id:s,indirect_object_type:"commerceproduct",indirect_object_identifier:n,indirect_object_id:r,indirect_object_display_name:a,parent_product_id:r,product_design_identifier:o})};t.trackDeleteVariant=H;var K=function e(t){var r=t.attributeType,a=t.productId,n=t.productName,s=t.productType,o=t.variantId,c=t.updatedValue,i=t.productEditor,u=t.originalValue;f.track({actor:"user",action:"change",object_type:"attribute",object_identifier:"variant-attribute",object_id:o,object_display_name:r,object_value:c,indirect_object_type:"commerceproduct",indirect_object_identifier:s,indirect_object_id:a,indirect_object_display_name:n,product_section:"product-editor",product_design_identifier:i,parent_product_id:a,old_object_value:u})};t.trackChangeVariantCoreAttribute=K;var Z;t.TaxCategoryAction=Z;(function(e){e["ADD"]="add";e["DELETE"]="delete"})(Z||(t.TaxCategoryAction=Z={}));var X=function e(t){var r=t.productId,a=t.productType,n=t.productEditor,s=t.ctaPresent,o=t.extensionEligible;f.track({actor:"user",action:"view",object_type:"section",object_identifier:"taxes",indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_id:r,product_section:"product-editor",product_design_identifier:n,tax_extension_cta_present:s,tax_extension_tax_categories_present:o})};t.trackTaxCategoryFeatureAvailable=X;var J=function e(t){var r=t.productId,a=t.productType,n=t.productEditor;f.track({actor:"user",action:"click",object_type:"button",object_identifier:"tax-extension",indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_id:r,product_section:"product-editor",product_design_identifier:n})};t.trackTaxCategoryClickCTA=J;var Q=function e(t){var r=t.productId,a=t.productType,n=t.productEditor;f.track({actor:"user",action:"search",object_type:"textarea",object_identifier:"tax-categories-search",indirect_object_type:"commerceproduct",indirect_object_identifier:a,indirect_object_id:r,product_section:"product-editor",product_design_identifier:n})};t.trackTaxCategorySearch=Q;var $=function e(t){var r=t.action,a=t.categoryAction,n=t.categoryName,s=t.productId,o=t.productType,c=t.productEditor;f.track({actor:"user",action:r,object_type:"taxcategory",object_identifier:a,object_value:n,indirect_object_type:"commerceproduct",indirect_object_identifier:o,indirect_object_id:s,product_section:"product-editor",product_design_identifier:c})};t.trackTaxCategoryChangeCategory=$},"./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackVariantImages.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.trackCloseVariantImagePicker=t.trackOpenVariantImagePicker=t.trackChangeVariantImage=t.trackRemoveVariantImage=t.trackUploadImage=t.trackAddVariantImage=void 0;var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=a(r("./common/temp/node_modules/@sqs/track-events/v1.js"));var o=a(r("./src/main/webapp/universal/src/shared/i18n/eventsData.ts"));function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var u=new s.default({customSchemaName:"variant_images"},i({event_owner_team:"commerce",event_source:"web",product_area:"commerce-merch",product_section:"product-editor"},(0,o.default)()));var l=function e(t){var r=t.imageId,a=t.productId,n=t.variantId,s=t.productEditor;u.track({actor:"user",action:"assign",object_type:"image",object_identifier:"variant-image",object_id:r,indirect_object_type:"variant",indirect_object_id:n,parent_product_id:a,product_design_identifier:s})};t.trackAddVariantImage=l;var d=function e(t){var r=t.imageId,a=t.productName,n=t.productId,s=t.productType,o=t.productSection,c=t.productEditor;u.track({actor:"user",action:"submit",object_type:"image",object_identifier:"product-image",object_id:r,indirect_object_type:"commerceproduct",indirect_object_identifier:s,indirect_object_id:n,indirect_object_display_name:a,product_section:o,product_design_identifier:c})};t.trackUploadImage=d;var p=function e(t){var r=t.imageId,a=t.productId,n=t.variantId,s=t.productEditor;u.track({actor:"user",action:"delete",object_type:"image",object_identifier:"variant-image",object_id:r,indirect_object_type:"variant",indirect_object_id:n,parent_product_id:a,product_design_identifier:s})};t.trackRemoveVariantImage=p;var m=function e(t){var r=t.imageId,a=t.productId,n=t.variantId,s=t.productEditor;u.track({actor:"user",action:"change",object_type:"image",object_identifier:"variant-image",object_id:r,indirect_object_type:"variant",indirect_object_id:n,parent_product_id:a,product_design_identifier:s})};t.trackChangeVariantImage=m;var f=function e(t){var r=t.productId,a=t.variantId,n=t.productEditor;u.track({actor:"user",action:"open",object_type:"modal",object_identifier:"variant-image-picker",indirect_object_type:"variant",indirect_object_id:a,parent_product_id:r,product_design_identifier:n})};t.trackOpenVariantImagePicker=f;var v=function e(t){var r=t.productId,a=t.variantId,n=t.productEditor;u.track({actor:"user",action:"close",object_type:"modal",object_identifier:"variant-image-picker",indirect_object_type:"variant",indirect_object_id:a,parent_product_id:r,product_design_identifier:n})};t.trackCloseVariantImagePicker=v},"./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProductCollections=t.ProductEditor=t.InventorySettingsPanel=t.ProductType=t.COMMERCE_EVENT_OWNER_TEAM=void 0;var a="commerce";t.COMMERCE_EVENT_OWNER_TEAM=a;var n;t.ProductType=n;(function(e){e["PHYSICAL"]="physical";e["SERVICE"]="service";e["GIFT_CARD"]="gift-card";e["DIGITAL"]="digital"})(n||(t.ProductType=n={}));var s;t.InventorySettingsPanel=s;(function(e){e["DISPLAY_OPTIONS"]="display-options";e["RELATED_PRODUCTS"]="related-products";e["NOTIFICATIONS"]="notifications"})(s||(t.InventorySettingsPanel=s={}));var o;t.ProductEditor=o;(function(e){e["YUI_EDITOR"]="yui-editor";e["PRODUCT_COMPOSER_V1"]="product-composer-v1"})(o||(t.ProductEditor=o={}));var c;t.ProductCollections=c;(function(e){e["V1"]="product-collections-v1";e["V2"]="product-collections-v2"})(c||(t.ProductCollections=c={}))},"./src/main/webapp/universal/src/shared/utils/commerce/api/RestockNotificationApi.ts":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.sendEmailsForProducts=t.sendEmailsForProduct=t.fetchTotalEmailCountForVariants=t.fetchSignupGroupEmails=t.fetchAllRestockNotificationSignupGroups=t.fetchRestockNotificationSignupGroups=t.signUpForRestockNotification=void 0;var u=a(r("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var d=a(r("./common/temp/node_modules/@sqs/network/lib/index.js"));var p="/api/site-users/account/notifications/restock";var s=function e(t){return d.default.post(p,t)};t.signUpForRestockNotification=s;var c=function e(t){return d.default.get("".concat(p,"/groups"),{params:{cursor:t}})};t.fetchRestockNotificationSignupGroups=c;var o=function(){var t=(0,n.default)(u.default.mark(function e(){var r,a,n,s,o;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=true;n=[];case 2:if(!a){t.next=12;break}t.next=5;return c(r);case 5:s=t.sent;o=s.data;a=o.hasNextPage;r=o.nextPageCursor;n.push.apply(n,(0,l.default)(o.signUpGroups));t.next=2;break;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();t.fetchAllRestockNotificationSignupGroups=o;var i=function(){var a=(0,n.default)(u.default.mark(function e(r,a){var n,s,o,c,i;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s=true;o=[];case 2:if(!s){t.next=12;break}t.next=5;return d.default.get(p,{params:{productId:r,variantId:a,cursor:n}});case 5:c=t.sent;i=c.data;s=i.hasNextPage;n=i.nextPageCursor;o.push.apply(o,(0,l.default)(i.signUps));t.next=2;break;case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}},e)}));return function e(t,r){return a.apply(this,arguments)}}();t.fetchSignupGroupEmails=i;var m=function(){var a=(0,n.default)(u.default.mark(function e(r,a){var n,s;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(0===a.length)){t.next=2;break}return t.abrupt("return",0);case 2:n=a.map(function(e){return i(r,e)});t.next=5;return Promise.all(n);case 5:s=t.sent;return t.abrupt("return",s.reduce(function(e,t){return e+t.length},0));case 7:case"end":return t.stop()}},e)}));return function e(t,r){return a.apply(this,arguments)}}();t.fetchTotalEmailCountForVariants=m;var f=function e(t,r){return d.default.post("".concat(p,"/send"),{productId:t,variantId:r})};t.sendEmailsForProduct=f;var v=function e(t){return d.default.post("".concat(p,"/send/all"),{sendRequests:t})};t.sendEmailsForProducts=v},"./src/main/webapp/universal/src/shared/utils/currency/Currencies.js":function(e,t,r){"use strict";var a={EUR:{code:"EUR",currencyName:"Euro",fractionDigits:2,numericCode:978},USD:{code:"USD",currencyName:"US Dollar",fractionDigits:2,numericCode:840},AUD:{code:"AUD",currencyName:"Australian Dollar",fractionDigits:2,numericCode:36},NOK:{code:"NOK",currencyName:"Norwegian Krone",fractionDigits:2,numericCode:578},CAD:{code:"CAD",currencyName:"Canadian Dollar",fractionDigits:2,numericCode:124},NZD:{code:"NZD",currencyName:"New Zealand Dollar",fractionDigits:2,numericCode:554},DKK:{code:"DKK",currencyName:"Danish Krone",fractionDigits:2,numericCode:208},GBP:{code:"GBP",currencyName:"Pound Sterling",fractionDigits:2,numericCode:826},HKD:{code:"HKD",currencyName:"Hong Kong Dollar",fractionDigits:2,numericCode:344},CHF:{code:"CHF",currencyName:"Swiss Franc",fractionDigits:2,numericCode:756},MXN:{code:"MXN",currencyName:"Mexican Peso",fractionDigits:2,numericCode:484},SGD:{code:"SGD",currencyName:"Singapore Dollar",fractionDigits:2,numericCode:702},SEK:{code:"SEK",currencyName:"Swedish Krona",fractionDigits:2,numericCode:752},CZK:{code:"CZK",currencyName:"Czech Koruna",fractionDigits:2,numericCode:203},ILS:{code:"ILS",currencyName:"Israeli New Sheqel",fractionDigits:2,numericCode:376},PHP:{code:"PHP",currencyName:"Philippine Peso",fractionDigits:2,numericCode:608},RUB:{code:"RUB",currencyName:"Russian Ruble",fractionDigits:2,numericCode:643},PLN:{code:"PLN",currencyName:"Polish Zloty",fractionDigits:2,numericCode:616},THB:{code:"THB",currencyName:"Thai Baht",fractionDigits:2,numericCode:764},MYR:{code:"MYR",currencyName:"Malaysian Ringgit",fractionDigits:2,numericCode:458},ARS:{code:"ARS",currencyName:"Argentine Peso",fractionDigits:2,numericCode:32},BRL:{code:"BRL",currencyName:"Brazilian Real",fractionDigits:2,numericCode:986},COP:{code:"COP",currencyName:"Colombian Peso",fractionDigits:2,numericCode:170},IDR:{code:"IDR",currencyName:"Indonesian Rupiah",fractionDigits:2,numericCode:360},INR:{code:"INR",currencyName:"Indian Rupee",fractionDigits:2,numericCode:356},JPY:{code:"JPY",currencyName:"Yen",fractionDigits:0,numericCode:392},ZAR:{code:"ZAR",currencyName:"South African Rand",fractionDigits:2,numericCode:710}};e.exports=a},"./src/main/webapp/universal/src/shared/utils/currency/CurrencyFormatters.js":function(e,t,r){"use strict";e.exports={defaultFormatter:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var n=arguments.length>3?arguments[3]:void 0;return"".concat(a).concat(r," ").concat(n).trim()},leadingSymbolFormatter:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"".concat(a).concat(t).concat(r)},leadingSymbolAndSpaceFormatter:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"".concat(a).concat(t," ").concat(r)},symbolCurrencyCodeFormatter:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var n=arguments.length>3?arguments[3]:void 0;return"".concat(a).concat(t).concat(r," ").concat(n).trim()},trailingSymbolFormatter:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"".concat(a).concat(r).concat(t).trim()},trailingSpaceAndSymbolFormatter:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"".concat(a).concat(r," ").concat(t).trim()}}},"./src/main/webapp/universal/src/shared/utils/currency/CurrencyTemplates.js":function(e,t,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s;function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));r.push.apply(r,a)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),true).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var i=r("./common/temp/node_modules/lodash/get.js");var u=r("./src/main/webapp/universal/src/shared/utils/currency/CurrencyFormatters.js"),l=u.defaultFormatter,d=u.leadingSymbolFormatter,p=u.leadingSymbolAndSpaceFormatter,m=u.symbolCurrencyCodeFormatter,f=u.trailingSpaceAndSymbolFormatter;var v=(s={"en-US":{AUD:{symbol:"A$",formatter:d},CAD:{symbol:"CA$",formatter:d},EUR:{symbol:"",formatter:d},GBP:{symbol:"",formatter:d},HKD:{symbol:"HK$",formatter:d},USD:{symbol:"$",formatter:d}},native:{ARS:{symbol:"$",formatter:m},AUD:{symbol:"$",formatter:m},BRL:{symbol:"R$",formatter:d},CAD:{symbol:"$",formatter:m},CHF:{symbol:"CHF",formatter:d},COP:{symbol:"COL$",formatter:d},DKK:{symbol:"kr",formatter:f},EUR:{symbol:"",formatter:d},GBP:{symbol:"",formatter:d},HKD:{symbol:"HK$",formatter:d},MXN:{symbol:"$",formatter:d},NOK:{symbol:"kr",formatter:f},NZD:{symbol:"$",formatter:d},SEK:{symbol:"kr",formatter:f},SGD:{symbol:"S$",formatter:d},USD:{symbol:"$",formatter:d},CZK:{symbol:"K",formatter:f},IDR:{symbol:"Rp",formatter:d},ILS:{symbol:"",formatter:p},INR:{symbol:"",formatter:d},JPY:{symbol:"",formatter:d},PHP:{symbol:"Php",formatter:d},RUB:{symbol:"p.",formatter:f},PLN:{symbol:"z",formatter:f},THB:{symbol:"",formatter:d},MYR:{symbol:"RM",formatter:d},ZAR:{symbol:"R",formatter:d}}},(0,n.default)(s,"__test__",{AAA:{symbol:"$",decimalSeparator:",",thousandsSeparator:"."}}),(0,n.default)(s,"DEFAULT",{symbol:"",thousandsSeparator:",",decimalSeparator:".",maxIntegerPlaces:15,formatter:l}),s);e.exports={Templates:v,createTemplate:function e(t,r){var a=i(v,[t,r],{});return c({},v.DEFAULT,{},a)}}},"./src/main/webapp/universal/src/shared/utils/currency/CurrencyUtils.js":function(e,t,r){"use strict";var a=r("./src/main/webapp/universal/src/shared/utils/currency/Currencies.js");e.exports={getFractionDigits:function e(t){var r=a[t];return r?r.fractionDigits:2}}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/46-21e58cb2c5b369377518d-min.en-US.js.map